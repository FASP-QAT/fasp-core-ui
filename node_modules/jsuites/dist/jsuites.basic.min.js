!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.jSuites=e.jsuites=t()}(this,function(){"use strict";var e=function(t){var n={init:function(){var e=document.querySelector(".japp");n.el=e||document.body;for(var t=document.querySelectorAll("[data-autoload]"),o=0;o<t.length;o++){var a=t[o].getAttribute("data-autoload");"function"==typeof window[a]&&window[a](t[o])}},guid:function(){for(var e="",t=0;t<32;t++)e+=Math.floor(15*Math.random()).toString(15);return e},getWindowWidth:function(){var e=window,t=document,n=t.documentElement,o=t.getElementsByTagName("body")[0];return e.innerWidth||n.clientWidth||o.clientWidth},getWindowHeight:function(){var e=window,t=document,n=t.documentElement,o=t.getElementsByTagName("body")[0];return e.innerHeight||n.clientHeight||o.clientHeight},getPosition:function(e){if(e.changedTouches&&e.changedTouches[0])var t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY;else t=window.Event?e.pageX:e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),n=window.Event?e.pageY:e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);return[t,n]},click:function(e){if(e.click)e.click();else{var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}},getElement:function(e,t){var n=!1;return function e(o){o.className&&o.classList.contains(t)&&(n=o),o.parentNode&&e(o.parentNode)}(e),n},getLinkElement:function(e){var t=!1;return function e(n){"A"!=n.tagName&&"DIV"!=n.tagName||!n.getAttribute("data-href")||(t=n),n.parentNode&&e(n.parentNode)}(e),t},getFormElements:function(e){var t={};if(e)var n=e.querySelectorAll("input, select, textarea");else n=document.querySelectorAll("input, select, textarea");for(var o=0;o<n.length;o++){var a=n[o],r=a.name,s=a.value;r&&(t[r]=s)}return t},exists:function(e,t){var n=new XMLHttpRequest;n.open("HEAD",e,!1),n.send(),n.status&&t(n.status)},getFiles:function(t){t||console.error("No element defined in the arguments of your method");var n=t.querySelectorAll(".jfile");if(n.length>0){for(var o=[],a=0;a<n.length;a++){var r={},s=n[a].getAttribute("src");n[a].classList.contains("jremove")?r.remove=1:("data"==s.substr(0,4)?(r.content=s.substr(s.indexOf(",")+1),r.extension=n[a].getAttribute("data-extension")):(r.file=s,r.extension=n[a].getAttribute("data-extension"),r.extension||(r.extension=s.substr(s.lastIndexOf(".")+1)),e.files[r.file]&&(r.content=e.files[r.file])),n[a].getAttribute("data-name")&&(r.name=n[a].getAttribute("data-name")),n[a].getAttribute("data-file")&&(r.file=n[a].getAttribute("data-file")),n[a].getAttribute("data-size")&&(r.size=n[a].getAttribute("data-size")),n[a].getAttribute("data-date")&&(r.date=n[a].getAttribute("data-date")),n[a].getAttribute("data-cover")&&(r.cover=n[a].getAttribute("data-cover"))),o[a]=r}return o}},ajax:function(e){if(e.data||(e.data={}),e.type&&(e.method=e.type),e.data){var t=[],o=Object.keys(e.data);if(o.length)for(var a=0;a<o.length;a++)if("object"==typeof e.data[o[a]])for(var r=e.data[o[a]],s=0;s<r.length;s++)if("string"==typeof r[s])t.push(o[a]+"["+s+"]="+encodeURIComponent(r[s]));else for(var i=Object.keys(r[s]),l=0;l<i.length;l++)t.push(o[a]+"["+s+"]["+i[l]+"]="+encodeURIComponent(r[s][i[l]]));else t.push(o[a]+"="+encodeURIComponent(e.data[o[a]]));"GET"==e.method&&t.length>0&&(e.url.indexOf("?")<0&&(e.url+="?"),e.url+=t.join("&"))}var d=new XMLHttpRequest;return d.open(e.method,e.url,!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"==e.method?(d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):"json"==e.dataType&&d.setRequestHeader("Content-Type","text/json"),1!=e.cache&&(d.setRequestHeader("pragma","no-cache"),d.setRequestHeader("cache-control","no-cache")),1==e.withCredentials&&(d.withCredentials=!0),"function"==typeof e.beforeSend&&e.beforeSend(d),d.onload=function(){if(200===d.status)if("json"==e.dataType)try{var t=JSON.parse(d.responseText);e.success&&"function"==typeof e.success&&e.success(t)}catch(n){e.error&&"function"==typeof e.error&&e.error(t)}else{t=d.responseText;e.success&&"function"==typeof e.success&&e.success(t)}else e.error&&"function"==typeof e.error&&e.error(d.responseText);if(n.ajax.requests&&n.ajax.requests.length){var o=n.ajax.requests.indexOf(d);n.ajax.requests.splice(o,1),n.ajax.requests.length||e.complete&&"function"==typeof e.complete&&e.complete(t)}},t?d.send(t.join("&")):d.send(),n.ajax.requests.push(d),d}};n.ajax.requests=[],n.slideLeft=function(e,t,n){1==t?(e.classList.add("slide-left-in"),setTimeout(function(){e.classList.remove("slide-left-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-left-out"),setTimeout(function(){e.classList.remove("slide-left-out"),"function"==typeof n&&n()},400))},n.slideRight=function(e,t,n){1==t?(e.classList.add("slide-right-in"),setTimeout(function(){e.classList.remove("slide-right-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-right-out"),setTimeout(function(){e.classList.remove("slide-right-out"),"function"==typeof n&&n()},400))},n.slideTop=function(e,t,n){1==t?(e.classList.add("slide-top-in"),setTimeout(function(){e.classList.remove("slide-top-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-top-out"),setTimeout(function(){e.classList.remove("slide-top-out"),"function"==typeof n&&n()},400))},n.slideBottom=function(e,t,n){1==t?(e.classList.add("slide-bottom-in"),setTimeout(function(){e.classList.remove("slide-bottom-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-bottom-out"),setTimeout(function(){e.classList.remove("slide-bottom-out"),"function"==typeof n&&n()},100))},n.fadeIn=function(e,t){e.classList.add("fade-in"),setTimeout(function(){e.classList.remove("fade-in"),"function"==typeof t&&t()},2e3)},n.fadeOut=function(e,t){e.classList.add("fade-out"),setTimeout(function(){e.classList.remove("fade-out"),"function"==typeof t&&t()},1e3)},n.keyDownControls=function(t){if(27==t.which){var n=document.querySelectorAll(".jslider");if(n.length>0)for(var o=0;o<n.length;o++)n[o].slider.close();document.querySelector(".jdialog")&&e.dialog.close()}else 13==t.which&&document.querySelector(".jdialog")&&("function"==typeof e.dialog.options.onconfirm&&e.dialog.options.onconfirm(),e.dialog.close());e.mask&&e.mask.apply(t)};var o=function(t){var n=null;if(n=e.getLinkElement(t.target)){var o=n.getAttribute("data-href");"#back"==o?window.history.back():"#panel"==o?e.panel():e.pages(o)}};return document.addEventListener("swipeleft",function(t){var n;(n=e.getElement(t.target,"option"))&&n.querySelector(".option-actions")?n.scrollTo({left:100,behavior:"smooth"}):(n=e.getElement(t.target,"jcalendar"))&&e.calendar.current?e.calendar.current.prev():e.panel&&(n=e.panel.get())&&"none"!=n.style.display&&e.panel.close()}),document.addEventListener("swiperight",function(t){var n;(n=e.getElement(t.target,"option"))&&n.querySelector(".option-actions")?n.scrollTo({left:0,behavior:"smooth"}):(n=e.getElement(t.target,"jcalendar"))&&e.calendar.current?e.calendar.current.next():e.panel&&(n=e.panel.get())&&"none"==n.style.display&&e.panel()}),document.addEventListener("keydown",n.keyDownControls),"ontouchend"in document.documentElement==!0?document.addEventListener("touchend",o):document.addEventListener("mouseup",o),document.addEventListener("mouseover",function(t){e.tooltip&&e.tooltip(t)}),document.addEventListener("mouseout",function(t){e.tooltip&&e.tooltip.hide()}),document.addEventListener("DOMContentLoaded",function(){n.init()}),window.onpopstate=function(t){t.state&&t.state.route&&e.pages.get(t.state.route)&&e.pages(t.state.route,{ignoreHistory:!0})},n}();return e.files=[],e.calendar=function(t,n){var o={options:{}};e.calendar.current||(e.calendar.current=null);var a={data:null,type:null,validRange:null,startingDay:null,format:"DD/MM/YYYY",readonly:!0,today:!1,time:!1,resetButton:!0,placeholder:"",months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_short:["S","M","T","W","T","F","S"],value:null,onclose:null,onchange:null,fullscreen:!1,mode:null,position:null,opened:!1};for(var r in a)n&&n.hasOwnProperty(r)?o.options[r]=n[r]:o.options[r]=a[r];if(o.options.value||"INPUT"==t.tagName&&t.value&&(o.options.value=t.value),o.options.format=o.options.format.toUpperCase(),o.options.value){var s=(i=o.options.value.split(" "))[1],i=i[0].split("-"),l=parseInt(i[0]),d=parseInt(i[1]),c=parseInt(i[2]);if(s){s=s.split(":");var u=parseInt(s[0]),p=parseInt(s[1])}else u=0,p=0}else l=(i=new Date).getFullYear(),d=i.getMonth()+1,c=i.getDate(),u=i.getHours(),p=i.getMinutes();o.date=[l,d,c,u,p,0];var f=function(e){return 1==(e=""+e).length&&(e="0"+e),e},m=document.createElement("div");m.className="jcalendar-reset",m.innerHTML="Reset";var h=document.createElement("div");h.className="jcalendar-confirm",h.innerHTML="Done";var g=document.createElement("div");g.className="jcalendar-controls",o.options.resetButton&&g.appendChild(m),g.appendChild(h);var v=document.createElement("div");v.className="jcalendar-container";var y=document.createElement("div");y.className="jcalendar-content",y.appendChild(g),v.appendChild(y);var b=document.createElement("div");if(b.className="jcalendar-table",y.appendChild(b),"INPUT"==t.tagName)var w=document.createElement("div");else w=t;w.className="jcalendar",w.appendChild(v);var L=document.createElement("td");L.setAttribute("colspan","2"),L.className="jcalendar-prev";var j=document.createElement("span");j.className="jcalendar-year";var x=document.createElement("span");x.className="jcalendar-month";var E=document.createElement("td");E.className="jcalendar-header",E.setAttribute("colspan","3"),E.appendChild(x),E.appendChild(j);var C=document.createElement("td");C.setAttribute("colspan","2"),C.className="jcalendar-next";var A=document.createElement("tr");A.appendChild(L),A.appendChild(E),A.appendChild(C);var T=document.createElement("thead");T.appendChild(A);var I=document.createElement("tbody"),N=document.createElement("tfoot"),D=document.createElement("table");D.setAttribute("cellpadding","0"),D.setAttribute("cellspacing","0"),D.appendChild(T),D.appendChild(I),D.appendChild(N),b.appendChild(D);var M=document.createElement("select");M.className="jcalendar-select",M.onchange=function(){o.date[3]=this.value};for(p=0;p<24;p++){(k=document.createElement("option")).value=p,k.innerHTML=f(p),M.appendChild(k)}var H=document.createElement("select");H.className="jcalendar-select",H.onchange=function(){o.date[4]=this.value};for(p=0;p<60;p++){var k;(k=document.createElement("option")).value=p,k.innerHTML=f(p),H.appendChild(k)}var S=document.createElement("div");S.className="jcalendar-controls";var O=document.createElement("div");O.className="jcalendar-time",O.style.maxWidth="140px",O.appendChild(M),O.appendChild(H);var R=document.createElement("input");R.setAttribute("type","button"),R.className="jcalendar-update",R.value="Update";var P=document.createElement("div");P.style.flexGrow="10",P.appendChild(R),S.appendChild(O),S.appendChild(P),y.appendChild(S);var Y=document.createElement("div");Y.className="jcalendar-backdrop",w.appendChild(Y);var q=function(){var e=w.querySelector(".jcalendar-selected");e&&e.classList.contains("jcalendar-disabled")?(R.setAttribute("disabled","disabled"),M.setAttribute("disabled","disabled"),H.setAttribute("disabled","disabled")):(R.removeAttribute("disabled"),M.removeAttribute("disabled"),H.removeAttribute("disabled"))};o.open=function(n){if(!w.classList.contains("jcalendar-focus"))if(e.calendar.current&&e.calendar.current.close(),e.calendar.current=o,w.classList.add("jcalendar-focus"),o.getDays(),o.options.time&&(M.value=o.date[3],H.value=o.date[4]),e.getWindowWidth()<800||o.options.fullscreen)w.classList.add("jcalendar-fullsize"),e.slideBottom(y,1);else{const e=t.getBoundingClientRect(),n=y.getBoundingClientRect();o.options.position?(v.style.position="fixed",window.innerHeight<e.bottom+n.height?v.style.top=e.top-(n.height+2)+"px":v.style.top=e.top+e.height+2+"px",v.style.left=e.left+"px"):window.innerHeight<e.bottom+n.height?v.style.bottom=1*e.height+n.height+2+"px":v.style.top="2px"}},o.close=function(n,a){if(e.calendar.current){if(e.calendar.current=null,!1!==a){var r=w.querySelector(".jcalendar-selected");if("string"==typeof a)var s=a;else if(r&&r.classList.contains("jcalendar-disabled"))s=o.options.value;else s=o.getValue();o.setValue(s)}n||"function"!=typeof o.options.onclose||o.options.onclose(t),w.classList.remove("jcalendar-focus")}return o.options.value},o.prev=function(){"years"==o.options.mode?(o.date[0]=o.date[0]-12,o.getYears()):(o.date[1]<2?(o.date[0]=o.date[0]-1,o.date[1]=12):o.date[1]=o.date[1]-1,o.getDays())},o.next=function(){"years"==o.options.mode?(o.date[0]=parseInt(o.date[0])+12,o.getYears()):(o.date[1]>11?(o.date[0]=parseInt(o.date[0])+1,o.date[1]=1):o.date[1]=parseInt(o.date[1])+1,o.getDays())},o.setValue=function(e){e||(e=""+e);var n=e,a=o.options.value;o.setLabel(n,o.options.format);(s=n.split(" "))[1]||(s[1]="00:00:00");var r=s[1].split(":"),s=s[0].split("-"),i=parseInt(s[0]),l=parseInt(s[1]),d=parseInt(s[2]),c=parseInt(r[0]),u=parseInt(r[1]);o.date=[i,l,d,c,u,0];e=o.setLabel(n,o.options.format);a!=n&&("INPUT"==t.tagName&&(t.value=e),o.options.value=n,"function"==typeof o.options.onchange&&o.options.onchange(t,n,a)),o.getDays()},o.getValue=function(){return o.date?o.options.time?f(o.date[0])+"-"+f(o.date[1])+"-"+f(o.date[2])+" "+f(o.date[3])+":"+f(o.date[4])+":"+f(0):f(o.date[0])+"-"+f(o.date[1])+"-"+f(o.date[2])+" "+f(0)+":"+f(0)+":"+f(0):""},o.update=function(e){if(e.classList.contains("jcalendar-disabled"));else{o.date[2]=e.innerText,o.options.time?(o.date[3]=M.value,o.date[4]=H.value):o.close();var t=w.querySelector(".jcalendar-selected");t&&t.classList.remove("jcalendar-selected"),e.classList.add("jcalendar-selected")}q()},o.reset=function(){o.close(!1,"")},o.getDays=function(){o.options.mode="days";var t=new Date,n=o.date&&o.date[0]?o.date[0]:parseInt(t.getFullYear()),a=o.date&&o.date[1]?o.date[1]:parseInt(t.getMonth())+1,r=o.date&&o.date[2]?o.date[2]:parseInt(t.getDay()),s=o.date&&o.date[3]?o.date[3]:parseInt(t.getHours()),i=o.date&&o.date[4]?o.date[4]:parseInt(t.getMinutes());o.date=[n,a,r,s,i,0],j.innerHTML=n,x.innerHTML=o.options.months[a-1];var l=t.getMonth()==a-1&&t.getFullYear()==n,d=t.getDate(),c=(t=new Date(n,a,0,0,0)).getDate(),u=(t=new Date(n,a-1,0,0,0)).getDay()+1;u-=f=o.options.startingDay||0,I.innerHTML="",(g=document.createElement("tr")).setAttribute("align","center"),I.appendChild(g);for(var p=0;p<7;p++){(y=document.createElement("td")).classList.add("jcalendar-weekday"),y.innerHTML=o.options.weekdays_short[f],g.appendChild(y),++f>6&&(f=0)}for(var f=0,m=0,h=0;h<5;h++){var g;(g=document.createElement("tr")).setAttribute("align","center");var v=!0;for(p=0;p<7;p++){var y;if((y=document.createElement("td")).classList.add("jcalendar-set-day"),f>=u&&f<u+c){m++,y.innerHTML=m,m==r&&y.classList.add("jcalendar-selected"),l&&d==m&&(y.style.fontWeight="bold");var b=e.calendar.now(new Date(n,a-1,m),!0);if(o.options.validRange){if(!o.options.validRange[0]||b>=o.options.validRange[0])var w=!0;else w=!1;if(!o.options.validRange[1]||b<=o.options.validRange[1])var L=!0;else L=!1;w&&L||y.classList.add("jcalendar-disabled")}v=!1}g.appendChild(y),f++}0==v&&I.appendChild(g)}o.options.time?O.style.display="":O.style.display="none",q()},o.getMonths=function(){o.options.mode="months";var e=o.options.months;j.innerHTML=o.date[0],x.innerHTML="";var t='<td colspan="7"><table width="100%"><tr align="center">';for(p=0;p<12;p++){p>0&&!(p%4)&&(t+='</tr><tr align="center">'),t+='<td class="jcalendar-set-month" data-value="'+(parseInt(p)+1)+'">'+e[p]+"</td>"}t+="</tr></table></td>",I.innerHTML=t},o.getYears=function(){o.options.mode="years";var e=[];for(p=0;p<25;p++)e[p]=parseInt(o.date[0])+(p-12);var t='<td colspan="7"><table width="100%"><tr align="center">';for(p=0;p<25;p++)p>0&&!(p%5)&&(t+='</tr><tr align="center">'),t+='<td class="jcalendar-set-year">'+e[p]+"</td>";t+="</tr></table></td>",I.innerHTML=t},o.setLabel=function(t,n){return e.calendar.getDateString(t,n)},o.fromFormatted=function(t,n){return e.calendar.extractDateFromString(t,n)};var F=function(e){var t=e.target.className;"jcalendar-prev"==t?(o.prev(),e.stopPropagation(),e.preventDefault()):"jcalendar-next"==t?(o.next(),e.stopPropagation(),e.preventDefault()):"jcalendar-month"==t?(o.getMonths(),e.stopPropagation(),e.preventDefault()):"jcalendar-year"==t?(o.getYears(),e.stopPropagation(),e.preventDefault()):"jcalendar-set-year"==t?(o.date[0]=e.target.innerText,o.getDays(),e.stopPropagation(),e.preventDefault()):"jcalendar-set-month"==t?(o.date[1]=parseInt(e.target.getAttribute("data-value")),o.getDays(),e.stopPropagation(),e.preventDefault()):"jcalendar-confirm"==t||"jcalendar-update"==t?(o.close(),e.stopPropagation(),e.preventDefault()):"jcalendar-close"==t?(o.close(),e.stopPropagation(),e.preventDefault()):"jcalendar-backdrop"==t?(o.close(!1,!1),e.stopPropagation(),e.preventDefault()):"jcalendar-reset"==t?(o.reset(),e.stopPropagation(),e.preventDefault()):e.target.classList.contains("jcalendar-set-day")&&e.target.innerText&&(o.update(e.target),e.stopPropagation(),e.preventDefault())};return t.addEventListener("keyup",function(t){if(t.target.value&&t.target.value.length>3){var n=e.calendar.extractDateFromString(t.target.value,o.options.format);n&&"true"==t.target.getAttribute("data-completed")&&o.setValue(n)}}),w.addEventListener("swipeleft",function(t){e.slideLeft(D,0,function(){o.next(),e.slideRight(D,1)}),t.preventDefault(),t.stopPropagation()}),w.addEventListener("swiperight",function(t){e.slideRight(D,0,function(){o.prev(),e.slideLeft(D,1)}),t.preventDefault(),t.stopPropagation()}),"ontouchend"in document.documentElement==!0?(w.addEventListener("touchend",F),t.addEventListener("touchend",function(e){o.open()})):(w.addEventListener("mouseup",F),t.addEventListener("mouseup",function(e){o.open()})),"INPUT"==t.tagName&&(t.parentNode.insertBefore(w,t.nextSibling),t.setAttribute("autocomplete","off"),t.setAttribute("data-mask",o.options.format.toLowerCase()),o.options.readonly&&t.setAttribute("readonly","readonly"),o.options.placeholder&&t.setAttribute("placeholder",o.options.placeholder),t.classList.add("jcalendar-input"),t.value=o.setLabel(o.getValue(),o.options.format)),t.calendar=o,1==o.options.opened&&o.open(),o},e.calendar.prettify=function(e,t){if(!t)t={justNow:"Just now",xMinutesAgo:"{0}m ago",xHoursAgo:"{0}h ago",xDaysAgo:"{0}d ago",xWeeksAgo:"{0}w ago",xMonthsAgo:"{0} mon ago",xYearsAgo:"{0}y ago"};var n=new Date,o=new Date(e),a=parseInt((n-o)/1e3/60);if(String.prototype.format=function(e){return this.replace("{0}",e)},0==a)var r=t.justNow;else if(a<90)r=t.xMinutesAgo.format(a);else if(a<1440)r=t.xHoursAgo.format(Math.round(a/60));else if(a<20160)r=t.xDaysAgo.format(Math.round(a/1440));else if(a<43200)r=t.xWeeksAgo.format(Math.round(a/10080));else if(a<1036800)r=t.xMonthsAgo.format(Math.round(a/43200));else r=t.xYearsAgo.format(Math.round(a/525600));return r},e.calendar.prettifyAll=function(){for(var t=document.querySelectorAll(".prettydate"),n=0;n<t.length;n++)t[n].getAttribute("data-date")?t[n].innerHTML=e.calendar.prettify(t[n].getAttribute("data-date")):(t[n].setAttribute("data-date",t[n].innerHTML),t[n].innerHTML=e.calendar.prettify(t[n].innerHTML))},e.calendar.now=function(e,t){if(!e)e=new Date;var n=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),r=e.getHours(),s=e.getMinutes(),i=e.getSeconds(),l=function(e){return 1==(e=""+e).length&&(e="0"+e),e};return 1==t?l(n)+"-"+l(o)+"-"+l(a):l(n)+"-"+l(o)+"-"+l(a)+" "+l(r)+":"+l(s)+":"+l(i)},e.calendar.extractDateFromString=function(e,t){var n=""+e,o=t.replace(/[0-9]/g,""),a=1,r=o.search("YYYY");r=n.substr(r,4),parseInt(r)!=r&&(a=0);var s=o.search("MM");s=n.substr(s,2),(parseInt(s)!=s||i>12)&&(a=0);var i=o.search("DD");i=n.substr(i,2),(parseInt(i)!=i||i>31)&&(a=0);var l=o.search("HH");l>=0?(l=n.substr(l,2),(!parseInt(l)||l>23)&&(l="00")):l="00";var d=o.search("MI");d>=0?(d=n.substr(d,2),(!parseInt(d)||d>59)&&(d="00")):d="00";var c=o.search("SS");return c>=0?(c=n.substr(c,2),(!parseInt(c)||c>59)&&(c="00")):c="00",1==a&&e.length==o.length?r+"-"+s+"-"+i+" "+l+":"+d+":"+c:""},e.calendar.getDateString=function(e,t){if(!t)t="DD/MM/YYYY";if(e){var n=""+e,o="",a="",r="";if((n=n.split(" "))[1]?(a=(o=n[1].split(":"))[1]?o[1]:"00",r=o[2]?o[2]:"00",o=o[0]?o[0]:"00"):(o="00",a="00",r="00"),(n=n[0].split("-"))[0]&&n[1]&&n[2]&&n[0]>0&&n[1]>0&&n[1]<13&&n[2]>0&&n[2]<32){var s=new Date(n[0],n[1]-1,n[2]),i=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),l=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");n[1]=(n[1].length<2?"0":"")+n[1],n[2]=(n[2].length<2?"0":"")+n[2],o=(o.length<2?"0":"")+o,a=(a.length<2?"0":"")+a,r=(r.length<2?"0":"")+r,e=(e=(e=(e=(e=(e=(e=t).replace("WD",i[s.getDay()])).replace("DD",n[2])).replace("MM",n[1])).replace("YYYY",n[0])).replace("YY",n[0].substring(2,4))).replace("MON",l[parseInt(n[1])-1].toUpperCase()),o&&(e=e.replace("HH24",o)),e=(e=(e=(e=o>12?(e=e.replace("HH12",o-12)).replace("HH",o):(e=e.replace("HH12",o)).replace("HH",o)).replace("MI",a)).replace("MM",a)).replace("SS",r)}else e=""}return e},e.calendar.isOpen=function(t){e.calendar.current&&(t.target.className&&-1!=t.target.className.indexOf("jcalendar")||e.calendar.current.close(!1,!1))},"ontouchstart"in document.documentElement==!0?document.addEventListener("touchstart",e.calendar.isOpen):document.addEventListener("mousedown",e.calendar.isOpen),e.color=function(t,n){var o={options:{},values:[]};e.color.current||(e.color.current=null);var a={placeholder:"",value:null,onclose:null,onchange:null,closeOnChange:!0};for(var r in a)n&&n.hasOwnProperty(r)?o.options[r]=n[r]:o.options[r]=a[r];for(var s={red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},lightgreen:{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100"},deeporange:{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},bluegrey:{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"}},i=[],l=Object.keys(s),d=Object.keys(s[l[0]]),c=0;c<l.length;c++)for(var u=0;u<d.length;u++)i[u]||(i[u]=[]),i[u][c]=s[l[c]][d[u]];o.options.value&&(t.value=o.options.value);var p=document.createElement("div");p.className="jcolor";var f=document.createElement("div");f.className="jcolor-backdrop",p.appendChild(f);var m=document.createElement("div");m.className="jcolor-content";var h=document.createElement("div");h.className="jcolor-close",h.innerHTML="Done",h.onclick=function(){o.close()},m.appendChild(h);var g=document.createElement("table");g.setAttribute("cellpadding","7"),g.setAttribute("cellspacing","0");for(c=0;c<i.length;c++){var v=document.createElement("tr");for(u=0;u<i[c].length;u++){var y=document.createElement("td");y.style.backgroundColor=i[c][u],y.setAttribute("data-value",i[c][u]),y.innerHTML="",v.appendChild(y),o.options.value==i[c][u]&&y.classList.add("jcolor-selected"),o.values[i[c][u]]=y}g.appendChild(v)}return o.open=function(){if(e.color.current&&e.color.current!=o&&e.color.current.close(),!e.color.current){e.color.current=o,p.classList.add("jcolor-focus");const n=m.getBoundingClientRect();if(e.getWindowWidth()<800)m.style.top="",m.classList.add("jcolor-fullscreen"),e.slideBottom(m,1),f.style.display="block";else{m.classList.contains("jcolor-fullscreen")&&(m.classList.remove("jcolor-fullscreen"),f.style.display="");const e=t.getBoundingClientRect();window.innerHeight<e.bottom+n.height?m.style.top=-1*(n.height+e.height+2)+"px":m.style.top="2px"}p.focus()}},o.close=function(n){return e.color.current&&(e.color.current=null,n||"function"!=typeof o.options.onclose||o.options.onclose(t),p.classList.remove("jcolor-focus")),f.style.display="",o.options.value},o.setValue=function(e){e&&(t.value=e,o.options.value=e);var n=p.querySelector(".jcolor-selected");n&&n.classList.remove("jcolor-selected"),o.values[e].classList.add("jcolor-selected"),"function"==typeof o.options.onchange&&o.options.onchange(t,e),1==o.options.closeOnChange&&o.close()},o.getValue=function(){return o.options.value},t.addEventListener("focus",function(e){o.open()}),t.addEventListener("mousedown",function(t){e.color.current||setTimeout(function(){o.open(),t.preventDefault()},200)}),p.addEventListener("mouseup",function(t){"TD"==t.target.tagName&&(e.color.current.setValue(t.target.getAttribute("data-value")),e.color.current&&e.color.current.close())}),document.addEventListener("mousedown",function(t){e.color.current&&(e.getElement(t.target,"jcolor")||e.color.current.close())}),p.setAttribute("tabindex","900"),o.options.placeholder&&t.setAttribute("placeholder",o.options.placeholder),m.appendChild(g),p.appendChild(m),"INPUT"==t.tagName?t.parentNode.insertBefore(p,t.nextSibling):t.appendChild(p),t.color=o,o},e.contextmenu=function(e,t){var n={options:{}},o={items:null,onclick:null};for(var a in o)t&&t.hasOwnProperty(a)?n.options[a]=t[a]:n.options[a]=o[a];return e.classList.add("jcontextmenu"),e.setAttribute("tabindex","900"),n.open=function(t,o){if(o&&(n.options.items=o,n.create(o)),t.target)var a=t.clientX,r=t.clientY;else a=t.x,r=t.y;e.classList.add("jcontextmenu-focus"),e.focus();const s=e.getBoundingClientRect();window.innerHeight<r+s.height?e.style.top=r-s.height+"px":e.style.top=r+"px",window.innerWidth<a+s.width?a-s.width>0?e.style.left=a-s.width+"px":e.style.left="10px":e.style.left=a+"px"},n.close=function(){e.classList.contains("jcontextmenu-focus")&&e.classList.remove("jcontextmenu-focus")},n.create=function(t){e.innerHTML="";for(var n=0;n<t.length;n++){if(t[n].type&&"line"==t[n].type)var o=document.createElement("hr");else{o=document.createElement("div");var a=document.createElement("a");if(a.innerHTML=t[n].title,t[n].disabled?o.className="jcontextmenu-disabled":t[n].onclick&&(o.method=t[n].onclick,o.addEventListener("mouseup",function(){this.method(this)})),o.appendChild(a),t[n].shortcut){var r=document.createElement("span");r.innerHTML=t[n].shortcut,o.appendChild(r)}}e.appendChild(o)}},"function"==typeof n.options.onclick&&e.addEventListener("click",function(e){n.options.onclick(n)}),e.addEventListener("blur",function(e){setTimeout(function(){n.close()},120)}),window.addEventListener("mousewheel",function(){n.close()}),n.options.items&&n.create(n.options.items),e.contextmenu=n,n},e.contextmenu.getElement=function(e){var t=0;return function e(n){n.parentNode&&n.getAttribute("aria-contextmenu-id")?t=n.getAttribute("aria-contextmenu-id"):n.parentNode&&e(n.parentNode)}(e),t},document.addEventListener("contextmenu",function(t){var n=e.contextmenu.getElement(t.target);if(n){var o=document.querySelector("#"+n);o?(o.contextmenu.open(t),t.preventDefault()):console.error("JSUITES: Contextmenu id not found")}}),e.dropdown=function(t,n){var o={options:{}};if("SELECT"==t.tagName){var a=e.dropdown.extractFromDom(t,n);t=a.el,n=a.options}var r={url:null,data:[],multiple:!1,autocomplete:!1,type:null,width:null,opened:!1,value:null,placeholder:"",position:!1,onchange:null,onload:null,onopen:null,onclose:null,onblur:null};for(var s in r)n&&n.hasOwnProperty(s)?o.options[s]=n[s]:o.options[s]=r[s];e.dropdown.current||(e.dropdown.current=null),o.items=[],o.groups=[],o.selected=[],t.classList.add("jdropdown"),"searchbar"==o.options.type?t.classList.add("jdropdown-searchbar"):"list"==o.options.type?t.classList.add("jdropdown-list"):"picker"==o.options.type?t.classList.add("jdropdown-picker"):e.getWindowWidth()<800?(t.classList.add("jdropdown-picker"),o.options.type="picker"):(o.options.width&&(t.style.width=o.options.width,t.style.minWidth=o.options.width),t.classList.add("jdropdown-default"),o.options.type="default");var i=document.createElement("div");i.className="jdropdown-container-header";var l=document.createElement("input");l.className="jdropdown-header","function"==typeof o.options.onblur&&(l.onblur=function(){o.options.onblur(t)});var d=document.createElement("div");d.className="jdropdown-container";var c=document.createElement("div");c.className="jdropdown-content";var u=document.createElement("div");u.className="jdropdown-close",u.innerHTML="Done";var p=document.createElement("div");if(p.className="jdropdown-backdrop",1==o.options.autocomplete){t.setAttribute("data-autocomplete",!0);var f=null;l.addEventListener("keyup",function(e){f&&clearTimeout(f),f=setTimeout(function(){o.find(l.value),f=null},500),t.classList.contains("jdropdown-focus")||e.which>65&&o.open()})}else l.setAttribute("readonly","readonly");return!o.options.placeholder&&t.getAttribute("placeholder")&&(o.options.placeholder=t.getAttribute("placeholder")),o.options.placeholder&&l.setAttribute("placeholder",o.options.placeholder),i.appendChild(l),"searchbar"==o.options.type?i.appendChild(u):d.appendChild(u),d.appendChild(c),t.appendChild(i),t.appendChild(d),t.appendChild(p),o.init=function(){o.options.url?e.ajax({url:o.options.url,method:"GET",dataType:"json",success:function(e){e&&(o.setData(e),null!=o.options.value&&o.setValue(o.options.value),"function"==typeof o.options.onload&&o.options.onload(t,o,e))}}):(o.setData(),null!=o.options.value&&o.setValue(o.options.value),"function"==typeof o.options.onload&&o.options.onload(t,o,data)),1==o.options.opened&&o.open()},o.getUrl=function(){return o.options.url},o.setUrl=function(t){o.options.url=t,e.ajax({url:o.options.url,method:"GET",dataType:"json",success:function(e){o.setData(e)}})},o.createItem=function(e){var t={};if(t.element=document.createElement("div"),t.element.className="jdropdown-item",t.value=e.id,t.text=e.name,t.textLowerCase=""+e.name.toLowerCase(),e.image){var n=document.createElement("img");n.className="jdropdown-image",n.src=e.image,e.title||n.classList.add("jdropdown-image-small"),t.element.appendChild(n)}var o=document.createElement("div");if(o.className="jdropdown-description",o.innerHTML=e.name,e.title){var a=document.createElement("div");a.className="jdropdown-title",a.innerHTML=e.title,o.appendChild(a)}return t.element.appendChild(o),t},o.setData=function(e){e&&(o.options.data=e);e=o.options.data;d.removeChild(c),c.innerHTML="",o.reset(),o.items=[];var t=[],n=[];if(e.length){for(var a=0;a<e.length;a++)"object"!=typeof e[a]&&(o.options.data[a]=e[a]={id:e[a],name:e[a]}),e[a].group?(n[e[a].group]||(n[e[a].group]=[]),n[e[a].group].push(a)):t.push(a);var r=Object.keys(n);if(r.length>0)for(a=0;a<r.length;a++){var s=document.createElement("div");s.className="jdropdown-group";var i=document.createElement("div");i.className="jdropdown-group-name",i.innerHTML=r[a];var l=document.createElement("i");l.className="jdropdown-group-arrow jdropdown-group-arrow-down",i.appendChild(l);var u=document.createElement("div");u.className="jdropdown-group-items";for(var p=0;p<n[r[a]].length;p++){var f=o.createItem(e[n[r[a]][p]]);u.appendChild(f.element),o.items.push(f)}s.appendChild(i),s.appendChild(l),s.appendChild(u),c.appendChild(s)}if(t.length)for(a=0;a<t.length;a++){f=o.createItem(e[t[a]]);o.items.push(f),c.appendChild(f.element)}for(a=0;a<o.items.length;a++)o.items[a].element.setAttribute("data-index",a)}d.appendChild(c)},o.getText=function(e){for(var t=[],n=0;n<o.selected.length;n++)o.items[o.selected[n]]&&t.push(o.items[o.selected[n]].text);return e?t:t.join("; ")},o.getValue=function(e){for(var t=[],n=0;n<o.selected.length;n++)o.items[o.selected[n]]&&t.push(o.items[o.selected[n]].value);return e?t:t.join(";")},o.setValue=function(e){for(var t=0;t<o.selected.length;t++)o.items[o.selected[t]].element.classList.remove("jdropdown-selected");if(o.selected=[],null!=e)if(Array.isArray(e))for(t=0;t<o.items.length;t++)for(var n=0;n<e.length;n++)o.items[t].value==e[n]&&(o.selected.push(t),o.items[t].element.classList.add("jdropdown-selected"));else for(t=0;t<o.items.length;t++)o.items[t].value==e&&(o.selected.push(t),o.items[t].element.classList.add("jdropdown-selected"));o.updateLabel()},o.selectIndex=function(e){if(o.items&&o.items[e]){e=e=parseInt(e);var n=o.getValue(),a=o.getText();if(null!=o.currentIndex&&o.items[o.currentIndex].element.classList.remove("jdropdown-cursor"),o.items[e].element.classList.add("jdropdown-cursor"),o.currentIndex=e,o.options.multiple){if(o.items[e].element.classList.contains("jdropdown-selected")){o.items[e].element.classList.remove("jdropdown-selected");var r=o.selected.indexOf(e);o.selected.splice(r,1)}else o.items[e].element.classList.add("jdropdown-selected"),o.selected.push(e);o.options.autocomplete||o.updateLabel()}else o.items[e].element.classList.contains("jdropdown-selected")?o.resetSelected():(o.resetSelected(),o.items[e].element.classList.add("jdropdown-selected"),o.selected.push(e),o.close());var s=o.getValue(),i=o.getText();"function"==typeof o.options.onchange&&o.options.onchange(t,e,n,s,a,i)}},o.selectItem=function(t){if(e.dropdown.current){var n=t.getAttribute("data-index");null!=n&&o.selectIndex(n)}},o.find=function(e){e=e?e.toLowerCase():null;for(var t=0;t<o.items.length;t++)null==e||-1!=o.items[t].textLowerCase.indexOf(e)?o.items[t].element.style.display="":-1==o.selected.indexOf(t)?o.items[t].element.style.display="none":o.items[t].element.style.display=""},o.updateLabel=function(){l.value=o.getText()},o.open=function(){if(e.dropdown.current!=t&&(e.dropdown.current&&e.dropdown.current.dropdown.close(),e.dropdown.current=t),!t.classList.contains("jdropdown-focus")){t.classList.add("jdropdown-focus"),e.getWindowWidth()<800&&(null!=o.options.type&&"picker"!=o.options.type||e.slideBottom(d,1)),1==o.options.autocomplete&&(o.find(),l.value="",l.focus());var n=o.selected&&o.selected[0]?o.selected[0]:0;if(o.updateCursor(n),!o.options.type||"default"==o.options.type){const e=t.getBoundingClientRect(),n=d.getBoundingClientRect();o.options.position?(d.style.position="fixed",window.innerHeight<e.bottom+n.height?(d.style.top="",d.style.bottom=window.innerHeight-e.top+1+"px"):(d.style.top=e.bottom+"px",d.style.bottom=""),d.style.left=e.left+"px"):window.innerHeight<e.bottom+n.height?(d.style.top="",d.style.bottom=e.height+1+"px"):(d.style.top="",d.style.bottom=""),d.style.minWidth=e.width+"px"}}"function"==typeof o.options.onopen&&o.options.onopen(t)},o.close=function(n){return e.dropdown.current&&(e.dropdown.current=null,o.resetCursor(),o.updateLabel(),n||"function"!=typeof o.options.onclose||o.options.onclose(t),l.blur&&l.blur(),t.classList.remove("jdropdown-focus")),o.getValue()},o.updateCursor=function(e){if(o.items&&o.items[e]&&o.items[e].element){o.resetCursor(),o.items[e].element.classList.add("jdropdown-cursor"),o.currentIndex=parseInt(e);c.scrollTop;var t=o.items[o.currentIndex].element;c.scrollTop=t.offsetTop-t.scrollTop+t.clientTop-95}},o.resetCursor=function(){null!=o.currentIndex&&(o.items&&o.items[o.currentIndex]&&o.items[o.currentIndex].element.classList.remove("jdropdown-cursor"),o.currentIndex=null)},o.resetSelected=function(){if(o.selected){for(var e=0;e<o.selected.length;e++)o.items[o.selected[e]]&&o.items[o.selected[e]].element.classList.remove("jdropdown-selected");o.selected=[]}},o.reset=function(){o.resetCursor(),o.resetSelected(),o.updateLabel()},o.firstVisible=function(){for(var e=null,t=0;t<o.items.length;t++)if("none"!=o.items[t].element.style.display){e=t;break}if(null==e)return!1;o.updateCursor(e)},o.first=function(){for(var e=null,t=o.currentIndex-1;t>=0;t--)"none"!=o.items[t].element.style.display&&(e=t);if(null==e)return!1;o.updateCursor(e)},o.last=function(){for(var e=null,t=o.currentIndex+1;t<o.items.length;t++)"none"!=o.items[t].element.style.display&&(e=t);if(null==e)return!1;o.updateCursor(e)},o.next=function(){for(var e=null,t=o.currentIndex+1;t<o.items.length;t++)if("none"!=o.items[t].element.style.display){e=t;break}if(null==e)return!1;o.updateCursor(e)},o.prev=function(){for(var e=null,t=o.currentIndex-1;t>=0;t--)if("none"!=o.items[t].element.style.display){e=t;break}if(null==e)return!1;o.updateCursor(e)},e.dropdown.hasEvents||("ontouchsend"in document.documentElement==!0?document.addEventListener("touchsend",e.dropdown.mouseup):document.addEventListener("mouseup",e.dropdown.mouseup),document.addEventListener("keydown",e.dropdown.onkeydown),e.dropdown.hasEvents=!0),o.init(),t.dropdown=o,o},e.dropdown.hasEvents=!1,e.dropdown.mouseup=function(t){var n=e.getElement(t.target,"jdropdown");if(n){var o=n.dropdown;if(t.target.classList.contains("jdropdown-header"))n.classList.contains("jdropdown-focus")&&n.classList.contains("jdropdown-default")?o.close():o.open();else if(t.target.classList.contains("jdropdown-group-name")){var a=t.target.nextSibling.children;if("none"!=t.target.nextSibling.style.display)for(var r=0;r<a.length;r++)"none"!=a[r].style.display&&o.selectItem(a[r])}else t.target.classList.contains("jdropdown-group-arrow")?t.target.classList.contains("jdropdown-group-arrow-down")?(t.target.classList.remove("jdropdown-group-arrow-down"),t.target.classList.add("jdropdown-group-arrow-up"),t.target.parentNode.nextSibling.style.display="none"):(t.target.classList.remove("jdropdown-group-arrow-up"),t.target.classList.add("jdropdown-group-arrow-down"),t.target.parentNode.nextSibling.style.display=""):t.target.classList.contains("jdropdown-item")?o.selectItem(t.target):t.target.classList.contains("jdropdown-image")?o.selectIndex(t.target.parentNode.getAttribute("data-index")):t.target.classList.contains("jdropdown-description")?o.selectIndex(t.target.parentNode.getAttribute("data-index")):t.target.classList.contains("jdropdown-title")?o.selectIndex(t.target.parentNode.parentNode.getAttribute("data-index")):(t.target.classList.contains("jdropdown-close")||t.target.classList.contains("jdropdown-backdrop"))&&o.close();t.stopPropagation(),t.preventDefault()}else e.dropdown.current&&e.dropdown.current.dropdown.close()},e.dropdown.onkeydown=function(t){if(e.dropdown.current){var n=e.dropdown.current.dropdown,o=n.currentIndex;t.shiftKey||13!=t.which&&27!=t.which&&35!=t.which&&36!=t.which&&38!=t.which&&40!=t.which||(13==t.which?n.selectIndex(o):38==t.which?null==o?n.firstVisible():o>0&&n.prev():40==t.which?null==o?n.firstVisible():o+1<n.options.data.length&&n.next():36==t.which?n.first():35==t.which?n.last():27==t.which&&n.close(),t.stopPropagation(),t.preventDefault())}},e.dropdown.extractFromDom=function(e,t){var n=e;if(t||(t={}),!e.getAttribute("multiple")||t&&null!=t.multiple||(t.multiple=!0),!e.getAttribute("placeholder")||t&&null!=t.placeholder||(t.placeholder=e.getAttribute("placeholder")),!e.getAttribute("data-autocomplete")||t&&null!=t.autocomplete||(t.autocomplete=!0),t&&null!=t.width||(t.width=e.offsetWidth),!e.value||t&&null!=t.value||(t.value=e.value),!t||null==t.data){t.data=[];for(var o=0;o<e.children.length;o++)if("OPTGROUP"==e.children[o].tagName)for(var a=0;a<e.children[o].children.length;a++)t.data.push({id:e.children[o].children[a].value,name:e.children[o].children[a].innerHTML,group:e.children[o].getAttribute("label")});else t.data.push({id:e.children[o].value,name:e.children[o].innerHTML})}t&&null!=t.onchange||(t.onchange=function(e,o,a,r){1==t.multiple?obj.items[o].classList.contains("jdropdown-selected")?n.options[o].setAttribute("selected","selected"):n.options[o].removeAttribute("selected"):n.value=r});var r=document.createElement("div");return e.parentNode.insertBefore(r,e),e.style.display="none",{el:e=r,options:t}},e.image=function(t,n){var o={options:{}},a={minWidth:!1,onchange:null,singleFile:!0,remoteParser:null,text:{extensionNotAllowed:"The extension is not allowed",imageTooSmall:"The resolution is too low, try a image with a better resolution. width > 800px"}};for(var r in a)n&&n.hasOwnProperty(r)?o.options[r]=n[r]:o.options[r]=a[r];t.classList.add("jupload"),o.addImage=function(e){e.date||(e.date="");var t=document.createElement("img");return t.setAttribute("data-date",e.lastmodified?e.lastmodified:e.date),t.setAttribute("data-name",e.name),t.setAttribute("data-size",e.size),t.setAttribute("data-small",e.small?e.small:""),t.setAttribute("data-cover",e.cover?1:0),t.setAttribute("data-extension",e.extension),t.setAttribute("src",e.file),t.className="jfile",t.style.width="100%",t},o.addImages=function(e){1==o.options.singleFile&&(t.innerHTML="");for(var n=0;n<e.length;n++)t.appendChild(o.addImage(e[n]))},o.addFromFile=function(e){if("image"==e.type.split("/")[0]){1==o.options.singleFile&&(t.innerHTML="");var n=new FileReader;n.addEventListener("load",function(n){var a=new Image;a.onload=function(){var n=document.createElement("canvas");n.width=a.width,n.height=a.height,n.getContext("2d").drawImage(a,0,0,n.width,n.height);var r={file:n.toDataURL(),extension:e.name.substr(e.name.lastIndexOf(".")+1),name:e.name,size:e.size,lastmodified:e.lastModified},s=o.addImage(r);t.appendChild(s),"function"==typeof o.options.onchange&&o.options.onchange(s)},a.src=n.srcElement.result}),n.readAsDataURL(e)}else alert(text.extentionNotAllowed)},o.addFromUrl=function(n){if("data"==n.substr(0,4)||o.options.remoteParser){if("data"==n.substr(0,4)){a=(a=(a=n.split(";"))[0].split("/"))[1]}else{var a=n.substr(n.lastIndexOf(".")+1);n=o.options.remoteParser+n}var r=new Image;r.onload=function(){var n=document.createElement("canvas");n.width=r.width,n.height=r.height,n.getContext("2d").drawImage(r,0,0,n.width,n.height),n.toBlob(function(r){var s={file:window.URL.createObjectURL(r),extension:a},i=o.addImage(s);t.appendChild(i);var l=n.toDataURL();e.files[s.file]=l.substr(l.indexOf(",")+1),"function"==typeof o.options.onchange&&o.options.onchange(i)})},r.src=n}else console.error("remoteParser not defined in your initialization")};var s=document.createElement("input");return s.type="file",s.setAttribute("accept","image/*"),s.onchange=function(){for(var e=0;e<this.files.length;e++)o.addFromFile(this.files[e])},t.addEventListener("dblclick",function(t){e.click(s)}),t.addEventListener("dragenter",function(e){t.style.border="1px dashed #000"}),t.addEventListener("dragleave",function(e){t.style.border="1px solid #eee"}),t.addEventListener("dragstop",function(e){t.style.border="1px solid #eee"}),t.addEventListener("dragover",function(e){e.preventDefault()}),t.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();var n=(e.originalEvent||e).dataTransfer.getData("text/html");if((e.originalEvent||e).dataTransfer.files.length)for(var a=0;a<e.dataTransfer.files.length;a++)o.addFromFile(e.dataTransfer.files[a]);else if(n){1==o.options.singleFile&&(t.innerHTML="");var r=document.createElement("div");r.innerHTML=n;var s=r.querySelectorAll("img");if(s.length)for(a=0;a<s.length;a++)o.addFromUrl(s[a].src)}return t.style.border="1px solid #eee",!1}),t.image=o,o},e.loading=function(){var e={},t=document.createElement("div");return t.className="jloading",e.show=function(){document.body.appendChild(t)},e.hide=function(){document.body.removeChild(t)},e}(),e.mask=function(){var e={},t=0,n=[],o=[];return e.run=function(o,a,r){if(o&&a){if(r||(r="."),o==Number(o))var s=(""+o).split("."),i=(o=s[0],s[1]);else o=""+o;var l;if(t=0,n=[],e.prepare(a),l=o)for(var d=0;d<l.length;d++)null!=l[d]&&e.process(l[d]);if(i)if(e.process(r),l=i)for(d=0;d<l.length;d++)null!=l[d]&&e.process(l[d]);return n.join("")}return""},e.apply=function(a){if(a.target&&!a.target.getAttribute("readonly")){var r=a.target.getAttribute("data-mask");if(r&&a.keyCode>46){if(t=0,n=[],e.prepare(r),a.target.selectionStart<a.target.selectionEnd)var s=a.target.value.substring(0,a.target.selectionStart);else s=a.target.value;if(s)for(var i=0;i<s.length;i++)null!=s[i]&&e.process(s[i]);e.process(e.fromKeyCode(a)),a.target.value=n.join(""),o.length==n.length&&o[o.length-1].length==n[n.length-1].length?a.target.setAttribute("data-completed","true"):a.target.setAttribute("data-completed","false"),a.preventDefault()}}},e.process=function(e){do{if("mm"==o[t])return null==n[t]||""==n[t]?parseInt(e)>1&&parseInt(e)<10?(n[t]="0"+e,t++,!0):parseInt(e)<10&&(n[t]=e,!0):1==n[t]&&n[t]<2&&parseInt(e)<3?(n[t]+=e,t++,!0):0==n[t]&&n[t]<10&&(n[t]+=e,t++,!0);if("dd"==o[t])return null==n[t]||""==n[t]?parseInt(e)>3&&parseInt(e)<10?(n[t]="0"+e,t++,!0):parseInt(e)<10&&(n[t]=e,!0):3==n[t]&&parseInt(e)<2?(n[t]+=e,t++,!0):n[t]<3&&parseInt(e)<10&&(n[t]+=e,t++,!0);if("hh24"==o[t])return null==n[t]||""==n[t]?parseInt(e)>2&&parseInt(e)<10?(n[t]="0"+e,t++,!0):parseInt(e)<10&&(n[t]=e,!0):2==n[t]&&parseInt(e)<4?(n[t]+=e,t++,!0):n[t]<2&&parseInt(e)<10&&(n[t]+=e,t++,!0);if("hh"==o[t])return null==n[t]||""==n[t]?parseInt(e)>1&&parseInt(e)<10?(n[t]="0"+e,t++,!0):parseInt(e)<10&&(n[t]=e,!0):1==n[t]&&parseInt(e)<3?(n[t]+=e,t++,!0):n[t]<1&&parseInt(e)<10&&(n[t]+=e,t++,!0);if("mi"==o[t]||"ss"==o[t])return null==n[t]||""==n[t]?parseInt(e)>5&&parseInt(e)<10?(n[t]="0"+e,t++,!0):parseInt(e)<10&&(n[t]=e,!0):parseInt(e)<10&&(n[t]+=e,t++,!0);if("yy"==o[t]||"yyyy"==o[t])return parseInt(e)<10&&(null==n[t]||""==n[t]?n[t]=e:n[t]+=e,n[t].length==o[t].length&&t++,!0);if("#"==o[t]||"#.##"==o[t]||"#,##"==o[t]||"# ##"==o[t]){if(e.match(/[0-9]/g)){if("#.##"==o[t])var a=".";else if("#,##"==o[t])a=",";else if("# ##"==o[t])a=" ";else a="";if(null==n[t]||""==n[t])n[t]=e;else if(n[t]+=e,a){n[t]=n[t].match(/[0-9]/g).join("");for(var r=[],s=0,i=n[t].length-1;i>=0;i--)r.push(n[t][i]),++s%3||r.push(a);r=r.reverse(),n[t]=r.join(""),n[t].substr(0,1)==a&&(n[t]=n[t].substr(1))}return!0}if("#.##"==o[t]&&"."==e);else if("#,##"==o[t]&&","==e);else if("# ##"==o[t]&&" "==e);else if(n[t]&&o[++t]){if(o[t]==e)return n[t]=e,!0;if("0"==o[t]&&o[t+1]==e)return n[++t]=e,!0}return!1}if("0"==o[t])return!!e.match(/[0-9]/g)&&(n[t]=e,t++,!0);if("a"==o[t])return!!e.match(/[a-zA-Z]/g)&&(n[t]=e,t++,!0);if(null!=o[t]){if("\\a"==o[t])var l="a";else if("\\0"==o[t])l="0";else if("[-]"==o[t])if("-"==e||"+"==e)l=e;else l=" ";else l=o[t];if(n[t]=l,e==l)return t++,!0}t++}while(o[t])},e.prepare=function(e){o=[];for(var t=0;t<e.length;t++)e[t].match(/[0-9]|[a-z]|\\/g)?"y"==e[t]&&"y"==e[t+1]&&"y"==e[t+2]&&"y"==e[t+3]?(o.push("yyyy"),t+=3):"y"==e[t]&&"y"==e[t+1]?(o.push("yy"),t++):"m"==e[t]&&"m"==e[t+1]&&"m"==e[t+2]&&"m"==e[t+3]?(o.push("mmmm"),t+=3):"m"==e[t]&&"m"==e[t+1]&&"m"==e[t+2]?(o.push("mmm"),t+=2):"m"==e[t]&&"m"==e[t+1]?(o.push("mm"),t++):"d"==e[t]&&"d"==e[t+1]?(o.push("dd"),t++):"h"==e[t]&&"h"==e[t+1]&&"2"==e[t+2]&&"4"==e[t+3]?(o.push("hh24"),t+=3):"h"==e[t]&&"h"==e[t+1]?(o.push("hh"),t++):"m"==e[t]&&"i"==e[t+1]?(o.push("mi"),t++):"s"==e[t]&&"s"==e[t+1]?(o.push("ss"),t++):"a"==e[t]&&"m"==e[t+1]?(o.push("am"),t++):"p"==e[t]&&"m"==e[t+1]?(o.push("pm"),t++):"\\"==e[t]&&"0"==e[t+1]?(o.push("\\0"),t++):"\\"==e[t]&&"a"==e[t+1]?(o.push("\\a"),t++):o.push(e[t]):"#"==e[t]&&"."==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(o.push("#.##"),t+=3):"#"==e[t]&&","==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(o.push("#,##"),t+=3):"#"==e[t]&&" "==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(o.push("# ##"),t+=3):"["==e[t]&&"-"==e[t+1]&&"]"==e[t+2]?(o.push("[-]"),t+=2):o.push(e[t])},e.fromKeyCode=function(e){var t={188:"44",109:"45",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},n={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"},o=e.which;return t.hasOwnProperty(o)&&(o=t[o]),o=!e.shiftKey&&o>=65&&o<=90?String.fromCharCode(o+32):e.shiftKey&&n.hasOwnProperty(o)?n[o]:96<=o&&o<=105?String.fromCharCode(o-48):String.fromCharCode(o)},e}(),e.modal=function(t,n){var o={options:{}},a={url:null,onopen:null,onclose:null,closed:!1,width:null,height:null,title:null};for(var r in a)n&&n.hasOwnProperty(r)?o.options[r]=n[r]:o.options[r]=a[r];!o.options.title&&t.getAttribute("title")&&(o.options.title=t.getAttribute("title"));for(var s=document.createElement("div"),i=0;i<t.children.length;i++)s.appendChild(t.children[i]);o.content=document.createElement("div"),o.content.className="jmodal_content",o.content.innerHTML=t.innerHTML;for(i=0;i<s.children.length;i++)o.content.appendChild(s.children[i]);o.container=document.createElement("div"),o.container.className="jmodal",o.container.appendChild(o.content),o.options.width&&(o.container.style.width=o.options.width),o.options.height&&(o.container.style.height=o.options.height),o.options.title?o.container.setAttribute("title",o.options.title):o.container.classList.add("no-title"),t.innerHTML="",t.style.display="none",t.appendChild(o.container);var l=document.createElement("div");return l.className="jmodal_backdrop",t.appendChild(l),o.open=function(){t.style.display="block";const n=o.container.getBoundingClientRect();e.getWindowWidth()<n.width?(o.container.style.top="",o.container.style.left="",o.container.classList.add("jmodal_fullscreen"),e.slideBottom(o.container,1)):l.style.display="block",e.modal.current=o,"function"==typeof o.options.onopen&&o.options.onopen(t,o)},o.resetPosition=function(){o.container.style.top="",o.container.style.left=""},o.isOpen=function(){return"none"!=t.style.display},o.close=function(){t.style.display="none",l.style.display="",e.modal.current=null,o.container.classList.remove("jmodal_fullscreen"),"function"==typeof o.options.onclose&&o.options.onclose(t,o)},e.modal.hasEvents||(e.modal.current=o,"ontouchstart"in document.documentElement==!0?document.addEventListener("touchstart",e.modal.mouseDownControls):(document.addEventListener("mousedown",e.modal.mouseDownControls),document.addEventListener("mousemove",e.modal.mouseMoveControls),document.addEventListener("mouseup",e.modal.mouseUpControls)),document.addEventListener("keydown",e.modal.keyDownControls),e.modal.hasEvents=!0),o.options.url?e.ajax({url:o.options.url,method:"GET",success:function(e){o.content.innerHTML=e,o.options.closed||o.open()}}):o.options.closed||o.open(),t.modal=o,o},e.modal.current=null,e.modal.position=null,e.modal.keyDownControls=function(t){27==t.which&&e.modal.current&&e.modal.current.close()},e.modal.mouseUpControls=function(t){e.modal.current&&(e.modal.current.container.style.cursor="auto"),e.modal.position=null},e.modal.mouseMoveControls=function(t){if(e.modal.current&&e.modal.position)if(1==t.which||3==t.which){var n=e.modal.position;e.modal.current.container.style.top=n[1]+(t.clientY-n[3])+n[5]/2+"px",e.modal.current.container.style.left=n[0]+(t.clientX-n[2])+n[4]/2+"px",e.modal.current.container.style.cursor="move"}else e.modal.current.container.style.cursor="auto"},e.modal.mouseDownControls=function(t){e.modal.position=[],t.target.classList.contains("jmodal")&&setTimeout(function(){var n=t.target.getBoundingClientRect();if(t.changedTouches&&t.changedTouches[0])var o=t.changedTouches[0].clientX,a=t.changedTouches[0].clientY;else o=t.clientX,a=t.clientY;n.width-(o-n.left)<50&&a-n.top<50?setTimeout(function(){e.modal.current.close()},100):t.target.getAttribute("title")&&a-n.top<50&&(document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),e.modal.position=[n.left,n.top,t.clientX,t.clientY,n.width,n.height])},100)},e});