{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = sortFields;\n\nvar _has = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _toposort = _interopRequireDefault(require(\"toposort\"));\n\nvar _propertyExpr = require(\"property-expr\");\n\nvar _Reference = _interopRequireDefault(require(\"../Reference\"));\n\nvar _isSchema = _interopRequireDefault(require(\"./isSchema\"));\n\nfunction sortFields(fields, excludes) {\n  if (excludes === void 0) {\n    excludes = [];\n  }\n\n  var edges = [],\n      nodes = [];\n\n  function addNode(depPath, key) {\n    var node = (0, _propertyExpr.split)(depPath)[0];\n    if (!~nodes.indexOf(node)) nodes.push(node);\n    if (!~excludes.indexOf(key + \"-\" + node)) edges.push([key, node]);\n  }\n\n  for (var key in fields) {\n    if ((0, _has.default)(fields, key)) {\n      var value = fields[key];\n      if (!~nodes.indexOf(key)) nodes.push(key);\n      if (_Reference.default.isRef(value) && value.isSibling) addNode(value.path, key);else if ((0, _isSchema.default)(value) && value._deps) value._deps.forEach(function (path) {\n        return addNode(path, key);\n      });\n    }\n  }\n\n  return _toposort.default.array(nodes, edges).reverse();\n}\n\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/home/altius/fasp-core-ui/node_modules/yup/lib/util/sortFields.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","sortFields","_has","_toposort","_propertyExpr","_Reference","_isSchema","fields","excludes","edges","nodes","addNode","depPath","key","node","split","indexOf","push","value","isRef","isSibling","path","_deps","forEach","array","reverse","module"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,OAAR,GAAkBC,UAAlB;;AAEA,IAAIC,IAAI,GAAGN,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAjC;;AAEA,IAAIM,SAAS,GAAGP,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAAtC;;AAEA,IAAIO,aAAa,GAAGP,OAAO,CAAC,eAAD,CAA3B;;AAEA,IAAIQ,UAAU,GAAGT,sBAAsB,CAACC,OAAO,CAAC,cAAD,CAAR,CAAvC;;AAEA,IAAIS,SAAS,GAAGV,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAtC;;AAEA,SAASI,UAAT,CAAoBM,MAApB,EAA4BC,QAA5B,EAAsC;AACpC,MAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AACvBA,IAAAA,QAAQ,GAAG,EAAX;AACD;;AAED,MAAIC,KAAK,GAAG,EAAZ;AAAA,MACIC,KAAK,GAAG,EADZ;;AAGA,WAASC,OAAT,CAAiBC,OAAjB,EAA0BC,GAA1B,EAA+B;AAC7B,QAAIC,IAAI,GAAG,CAAC,GAAGV,aAAa,CAACW,KAAlB,EAAyBH,OAAzB,EAAkC,CAAlC,CAAX;AACA,QAAI,CAAC,CAACF,KAAK,CAACM,OAAN,CAAcF,IAAd,CAAN,EAA2BJ,KAAK,CAACO,IAAN,CAAWH,IAAX;AAC3B,QAAI,CAAC,CAACN,QAAQ,CAACQ,OAAT,CAAiBH,GAAG,GAAG,GAAN,GAAYC,IAA7B,CAAN,EAA0CL,KAAK,CAACQ,IAAN,CAAW,CAACJ,GAAD,EAAMC,IAAN,CAAX;AAC3C;;AAED,OAAK,IAAID,GAAT,IAAgBN,MAAhB,EAAwB;AACtB,QAAI,CAAC,GAAGL,IAAI,CAACF,OAAT,EAAkBO,MAAlB,EAA0BM,GAA1B,CAAJ,EAAoC;AAClC,UAAIK,KAAK,GAAGX,MAAM,CAACM,GAAD,CAAlB;AACA,UAAI,CAAC,CAACH,KAAK,CAACM,OAAN,CAAcH,GAAd,CAAN,EAA0BH,KAAK,CAACO,IAAN,CAAWJ,GAAX;AAC1B,UAAIR,UAAU,CAACL,OAAX,CAAmBmB,KAAnB,CAAyBD,KAAzB,KAAmCA,KAAK,CAACE,SAA7C,EAAwDT,OAAO,CAACO,KAAK,CAACG,IAAP,EAAaR,GAAb,CAAP,CAAxD,KAAsF,IAAI,CAAC,GAAGP,SAAS,CAACN,OAAd,EAAuBkB,KAAvB,KAAiCA,KAAK,CAACI,KAA3C,EAAkDJ,KAAK,CAACI,KAAN,CAAYC,OAAZ,CAAoB,UAAUF,IAAV,EAAgB;AAC1K,eAAOV,OAAO,CAACU,IAAD,EAAOR,GAAP,CAAd;AACD,OAFuI;AAGzI;AACF;;AAED,SAAOV,SAAS,CAACH,OAAV,CAAkBwB,KAAlB,CAAwBd,KAAxB,EAA+BD,KAA/B,EAAsCgB,OAAtC,EAAP;AACD;;AAEDC,MAAM,CAAC5B,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = sortFields;\n\nvar _has = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _toposort = _interopRequireDefault(require(\"toposort\"));\n\nvar _propertyExpr = require(\"property-expr\");\n\nvar _Reference = _interopRequireDefault(require(\"../Reference\"));\n\nvar _isSchema = _interopRequireDefault(require(\"./isSchema\"));\n\nfunction sortFields(fields, excludes) {\n  if (excludes === void 0) {\n    excludes = [];\n  }\n\n  var edges = [],\n      nodes = [];\n\n  function addNode(depPath, key) {\n    var node = (0, _propertyExpr.split)(depPath)[0];\n    if (!~nodes.indexOf(node)) nodes.push(node);\n    if (!~excludes.indexOf(key + \"-\" + node)) edges.push([key, node]);\n  }\n\n  for (var key in fields) {\n    if ((0, _has.default)(fields, key)) {\n      var value = fields[key];\n      if (!~nodes.indexOf(key)) nodes.push(key);\n      if (_Reference.default.isRef(value) && value.isSibling) addNode(value.path, key);else if ((0, _isSchema.default)(value) && value._deps) value._deps.forEach(function (path) {\n        return addNode(path, key);\n      });\n    }\n  }\n\n  return _toposort.default.array(nodes, edges).reverse();\n}\n\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}