{"ast":null,"code":"'use strict';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar SERVER_RENDERED = typeof navigator === 'undefined' || global['PREVENT_CODEMIRROR_RENDER'] === true;\nvar cm;\n\nif (!SERVER_RENDERED) {\n  cm = require('codemirror');\n}\n\nvar Helper = function () {\n  function Helper() {}\n\n  Helper.equals = function (x, y) {\n    var _this = this;\n\n    var ok = Object.keys,\n        tx = _typeof(x),\n        ty = _typeof(y);\n\n    return x && y && tx === 'object' && tx === ty ? ok(x).length === ok(y).length && ok(x).every(function (key) {\n      return _this.equals(x[key], y[key]);\n    }) : x === y;\n  };\n\n  return Helper;\n}();\n\nvar Shared = function () {\n  function Shared(editor, props) {\n    this.editor = editor;\n    this.props = props;\n  }\n\n  Shared.prototype.delegateCursor = function (position, scroll, focus) {\n    var doc = this.editor.getDoc();\n\n    if (focus) {\n      this.editor.focus();\n    }\n\n    scroll ? doc.setCursor(position) : doc.setCursor(position, null, {\n      scroll: false\n    });\n  };\n\n  Shared.prototype.delegateScroll = function (coordinates) {\n    this.editor.scrollTo(coordinates.x, coordinates.y);\n  };\n\n  Shared.prototype.delegateSelection = function (ranges, focus) {\n    var doc = this.editor.getDoc();\n    doc.setSelections(ranges);\n\n    if (focus) {\n      this.editor.focus();\n    }\n  };\n\n  Shared.prototype.apply = function (props) {\n    if (props && props.selection && props.selection.ranges) {\n      this.delegateSelection(props.selection.ranges, props.selection.focus || false);\n    }\n\n    if (props && props.cursor) {\n      this.delegateCursor(props.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n\n    if (props && props.scroll) {\n      this.delegateScroll(props.scroll);\n    }\n  };\n\n  Shared.prototype.applyNext = function (props, next, preserved) {\n    if (props && props.selection && props.selection.ranges) {\n      if (next && next.selection && next.selection.ranges && !Helper.equals(props.selection.ranges, next.selection.ranges)) {\n        this.delegateSelection(next.selection.ranges, next.selection.focus || false);\n      }\n    }\n\n    if (props && props.cursor) {\n      if (next && next.cursor && !Helper.equals(props.cursor, next.cursor)) {\n        this.delegateCursor(preserved.cursor || next.cursor, next.autoScroll || false, next.autoCursor || false);\n      }\n    }\n\n    if (props && props.scroll) {\n      if (next && next.scroll && !Helper.equals(props.scroll, next.scroll)) {\n        this.delegateScroll(next.scroll);\n      }\n    }\n  };\n\n  Shared.prototype.applyUserDefined = function (props, preserved) {\n    if (preserved && preserved.cursor) {\n      this.delegateCursor(preserved.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n  };\n\n  Shared.prototype.wire = function (props) {\n    var _this = this;\n\n    Object.keys(props || {}).filter(function (p) {\n      return /^on/.test(p);\n    }).forEach(function (prop) {\n      switch (prop) {\n        case 'onBlur':\n          {\n            _this.editor.on('blur', function (cm, event) {\n              _this.props.onBlur(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onContextMenu':\n          {\n            _this.editor.on('contextmenu', function (cm, event) {\n              _this.props.onContextMenu(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onCopy':\n          {\n            _this.editor.on('copy', function (cm, event) {\n              _this.props.onCopy(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onCursor':\n          {\n            _this.editor.on('cursorActivity', function (cm) {\n              _this.props.onCursor(_this.editor, _this.editor.getDoc().getCursor());\n            });\n          }\n          break;\n\n        case 'onCursorActivity':\n          {\n            _this.editor.on('cursorActivity', function (cm) {\n              _this.props.onCursorActivity(_this.editor);\n            });\n          }\n          break;\n\n        case 'onCut':\n          {\n            _this.editor.on('cut', function (cm, event) {\n              _this.props.onCut(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDblClick':\n          {\n            _this.editor.on('dblclick', function (cm, event) {\n              _this.props.onDblClick(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDragEnter':\n          {\n            _this.editor.on('dragenter', function (cm, event) {\n              _this.props.onDragEnter(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onDragLeave':\n          {\n            _this.editor.on('dragleave', function (cm, event) {\n              _this.props.onDragLeave(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDragOver':\n          {\n            _this.editor.on('dragover', function (cm, event) {\n              _this.props.onDragOver(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onDragStart':\n          {\n            _this.editor.on('dragstart', function (cm, event) {\n              _this.props.onDragStart(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDrop':\n          {\n            _this.editor.on('drop', function (cm, event) {\n              _this.props.onDrop(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onFocus':\n          {\n            _this.editor.on('focus', function (cm, event) {\n              _this.props.onFocus(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onGutterClick':\n          {\n            _this.editor.on('gutterClick', function (cm, lineNumber, gutter, event) {\n              _this.props.onGutterClick(_this.editor, lineNumber, gutter, event);\n            });\n          }\n          break;\n\n        case 'onKeyDown':\n          {\n            _this.editor.on('keydown', function (cm, event) {\n              _this.props.onKeyDown(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onKeyPress':\n          {\n            _this.editor.on('keypress', function (cm, event) {\n              _this.props.onKeyPress(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onKeyUp':\n          {\n            _this.editor.on('keyup', function (cm, event) {\n              _this.props.onKeyUp(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onMouseDown':\n          {\n            _this.editor.on('mousedown', function (cm, event) {\n              _this.props.onMouseDown(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onPaste':\n          {\n            _this.editor.on('paste', function (cm, event) {\n              _this.props.onPaste(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onRenderLine':\n          {\n            _this.editor.on('renderLine', function (cm, line, element) {\n              _this.props.onRenderLine(_this.editor, line, element);\n            });\n\n            break;\n          }\n\n        case 'onScroll':\n          {\n            _this.editor.on('scroll', function (cm) {\n              _this.props.onScroll(_this.editor, _this.editor.getScrollInfo());\n            });\n          }\n          break;\n\n        case 'onSelection':\n          {\n            _this.editor.on('beforeSelectionChange', function (cm, data) {\n              _this.props.onSelection(_this.editor, data);\n            });\n          }\n          break;\n\n        case 'onTouchStart':\n          {\n            _this.editor.on('touchstart', function (cm, event) {\n              _this.props.onTouchStart(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onUpdate':\n          {\n            _this.editor.on('update', function (cm) {\n              _this.props.onUpdate(_this.editor);\n            });\n          }\n          break;\n\n        case 'onViewportChange':\n          {\n            _this.editor.on('viewportChange', function (cm, from, to) {\n              _this.props.onViewportChange(_this.editor, from, to);\n            });\n          }\n          break;\n      }\n    });\n  };\n\n  return Shared;\n}();\n\nvar Controlled = function (_super) {\n  __extends(Controlled, _super);\n\n  function Controlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedNext = false;\n    _this.appliedUserDefined = false;\n    _this.deferred = null;\n    _this.emulating = false;\n    _this.hydrated = false;\n\n    _this.initCb = function () {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n    return _this;\n  }\n\n  Controlled.prototype.hydrate = function (props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function (key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function (key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n\n            _this.mirror.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      this.deferred ? this.resolveChange() : this.initChange(props.value || '');\n    }\n\n    this.hydrated = true;\n  };\n\n  Controlled.prototype.initChange = function (value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n    var lastLine = doc.lastLine();\n    var lastChar = doc.getLine(doc.lastLine()).length;\n    doc.replaceRange(value || '', {\n      line: 0,\n      ch: 0\n    }, {\n      line: lastLine,\n      ch: lastChar\n    });\n    this.mirror.setValue(value);\n    doc.clearHistory();\n    this.mirror.clearHistory();\n    this.emulating = false;\n  };\n\n  Controlled.prototype.resolveChange = function () {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n\n    if (this.deferred.origin === 'undo') {\n      doc.undo();\n    } else if (this.deferred.origin === 'redo') {\n      doc.redo();\n    } else {\n      doc.replaceRange(this.deferred.text, this.deferred.from, this.deferred.to, this.deferred.origin);\n    }\n\n    this.emulating = false;\n    this.deferred = null;\n  };\n\n  Controlled.prototype.mirrorChange = function (deferred) {\n    var doc = this.editor.getDoc();\n\n    if (deferred.origin === 'undo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.undo();\n    } else if (deferred.origin === 'redo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.redo();\n    } else {\n      this.mirror.replaceRange(deferred.text, deferred.from, deferred.to, deferred.origin);\n    }\n\n    return this.mirror.getValue();\n  };\n\n  Controlled.prototype.componentDidMount = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref);\n    this.shared = new Shared(this.editor, this.props);\n    this.mirror = cm(function () {});\n    this.editor.on('electricInput', function () {\n      _this.mirror.setHistory(_this.editor.getDoc().getHistory());\n    });\n    this.editor.on('cursorActivity', function () {\n      _this.mirror.setCursor(_this.editor.getDoc().getCursor());\n    });\n    this.editor.on('beforeChange', function (cm, data) {\n      if (_this.emulating) {\n        return;\n      }\n\n      data.cancel();\n      _this.deferred = data;\n\n      var phantomChange = _this.mirrorChange(_this.deferred);\n\n      if (_this.props.onBeforeChange) _this.props.onBeforeChange(_this.editor, _this.deferred, phantomChange);\n    });\n    this.editor.on('change', function (cm, data) {\n      if (!_this.mounted) {\n        return;\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n\n    if (this.editor.getOption('autofocus')) {\n      this.editor.focus();\n    }\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  Controlled.prototype.componentWillReceiveProps = function (nextProps) {\n    if (SERVER_RENDERED) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (nextProps.value !== this.props.value) {\n      this.hydrated = false;\n    }\n\n    if (!this.props.autoCursor && this.props.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(nextProps);\n\n    if (!this.appliedNext) {\n      this.shared.applyNext(this.props, nextProps, preserved);\n      this.appliedNext = true;\n    }\n\n    this.shared.applyUserDefined(this.props, preserved);\n    this.appliedUserDefined = true;\n  };\n\n  Controlled.prototype.componentWillUnmount = function () {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  Controlled.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    return !SERVER_RENDERED;\n  };\n\n  Controlled.prototype.render = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 ' + this.props.className : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return Controlled;\n}(React.Component);\n\nexports.Controlled = Controlled;\n\nvar UnControlled = function (_super) {\n  __extends(UnControlled, _super);\n\n  function UnControlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedUserDefined = false;\n    _this.continueChange = false;\n    _this.detached = false;\n    _this.hydrated = false;\n\n    _this.initCb = function () {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n\n    _this.onBeforeChangeCb = function () {\n      _this.continueChange = true;\n    };\n\n    return _this;\n  }\n\n  UnControlled.prototype.hydrate = function (props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function (key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function (key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      var doc = this.editor.getDoc();\n      var lastLine = doc.lastLine();\n      var lastChar = doc.getLine(doc.lastLine()).length;\n      doc.replaceRange(props.value || '', {\n        line: 0,\n        ch: 0\n      }, {\n        line: lastLine,\n        ch: lastChar\n      });\n    }\n\n    this.hydrated = true;\n  };\n\n  UnControlled.prototype.componentDidMount = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n    this.detached = this.props.detach === true;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref);\n    this.shared = new Shared(this.editor, this.props);\n    this.editor.on('beforeChange', function (cm, data) {\n      if (_this.props.onBeforeChange) {\n        _this.props.onBeforeChange(_this.editor, data, _this.editor.getValue(), _this.onBeforeChangeCb);\n      }\n    });\n    this.editor.on('change', function (cm, data) {\n      if (!_this.mounted || !_this.props.onChange) {\n        return;\n      }\n\n      if (_this.props.onBeforeChange) {\n        if (_this.continueChange) {\n          _this.props.onChange(_this.editor, data, _this.editor.getValue());\n        }\n      } else {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n    this.editor.getDoc().clearHistory();\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  UnControlled.prototype.componentWillReceiveProps = function (nextProps) {\n    if (this.detached && nextProps.detach === false) {\n      this.detached = false;\n\n      if (this.props.editorDidAttach) {\n        this.props.editorDidAttach(this.editor);\n      }\n    }\n\n    if (!this.detached && nextProps.detach === true) {\n      this.detached = true;\n\n      if (this.props.editorDidDetach) {\n        this.props.editorDidDetach(this.editor);\n      }\n    }\n\n    if (SERVER_RENDERED || this.detached) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (nextProps.value !== this.props.value) {\n      this.hydrated = false;\n      this.applied = false;\n      this.appliedUserDefined = false;\n    }\n\n    if (!this.props.autoCursor && this.props.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(nextProps);\n\n    if (!this.applied) {\n      this.shared.apply(this.props);\n      this.applied = true;\n    }\n\n    if (!this.appliedUserDefined) {\n      this.shared.applyUserDefined(this.props, preserved);\n      this.appliedUserDefined = true;\n    }\n  };\n\n  UnControlled.prototype.componentWillUnmount = function () {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  UnControlled.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var update = true;\n    if (SERVER_RENDERED) update = false;\n    if (this.detached) update = false;\n    return update;\n  };\n\n  UnControlled.prototype.render = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 ' + this.props.className : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return UnControlled;\n}(React.Component);\n\nexports.UnControlled = UnControlled;","map":{"version":3,"sources":["/home/altius/Documents/QAT/fasp-core-ui/node_modules/react-codemirror2/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_typeof","obj","Symbol","iterator","constructor","__extends","_extendStatics","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","__","create","defineProperty","exports","value","React","require","SERVER_RENDERED","navigator","global","cm","Helper","equals","x","y","_this","ok","keys","tx","ty","every","Shared","editor","props","delegateCursor","position","scroll","focus","doc","getDoc","setCursor","delegateScroll","coordinates","scrollTo","delegateSelection","ranges","setSelections","selection","cursor","autoScroll","getOption","applyNext","next","preserved","autoCursor","applyUserDefined","wire","filter","test","forEach","prop","on","event","onBlur","onContextMenu","onCopy","onCursor","getCursor","onCursorActivity","onCut","onDblClick","onDragEnter","onDragLeave","onDragOver","onDragStart","onDrop","onFocus","lineNumber","gutter","onGutterClick","onKeyDown","onKeyPress","onKeyUp","onMouseDown","onPaste","line","element","onRenderLine","onScroll","getScrollInfo","data","onSelection","onTouchStart","onUpdate","from","to","onViewportChange","Controlled","_super","applied","appliedNext","appliedUserDefined","deferred","emulating","hydrated","initCb","editorDidConfigure","mounted","hydrate","_options","options","userDefinedOptions","defaults","optionDelta","some","setOption","mirror","resolveChange","initChange","lastLine","lastChar","getLine","replaceRange","ch","setValue","clearHistory","origin","undo","redo","text","mirrorChange","setHistory","getHistory","getValue","componentDidMount","defineMode","name","fn","ref","shared","cancel","phantomChange","onBeforeChange","onChange","editorDidMount","componentWillReceiveProps","nextProps","undefined","componentWillUnmount","editorWillUnmount","shouldComponentUpdate","nextState","render","className","createElement","self","Component","UnControlled","continueChange","detached","onBeforeChangeCb","detach","editorDidAttach","editorDidDetach","update"],"mappings":"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","sourcesContent":["'use strict';\n\nfunction _extends() {\n  _extends = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\n\nvar __extends = void 0 && (void 0).__extends || function() {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    }\n    instanceof Array && function(d, b) {\n      d.__proto__ = b;\n    } || function(d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function(d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar SERVER_RENDERED = typeof navigator === 'undefined' || global['PREVENT_CODEMIRROR_RENDER'] === true;\nvar cm;\n\nif (!SERVER_RENDERED) {\n  cm = require('codemirror');\n}\n\nvar Helper = function() {\n  function Helper() {}\n\n  Helper.equals = function(x, y) {\n    var _this = this;\n\n    var ok = Object.keys,\n      tx = _typeof(x),\n      ty = _typeof(y);\n\n    return x && y && tx === 'object' && tx === ty ? ok(x).length === ok(y).length && ok(x).every(function(key) {\n      return _this.equals(x[key], y[key]);\n    }) : x === y;\n  };\n\n  return Helper;\n}();\n\nvar Shared = function() {\n  function Shared(editor, props) {\n    this.editor = editor;\n    this.props = props;\n  }\n\n  Shared.prototype.delegateCursor = function(position, scroll, focus) {\n    var doc = this.editor.getDoc();\n\n    if (focus) {\n      this.editor.focus();\n    }\n\n    scroll ? doc.setCursor(position) : doc.setCursor(position, null, {\n      scroll: false\n    });\n  };\n\n  Shared.prototype.delegateScroll = function(coordinates) {\n    this.editor.scrollTo(coordinates.x, coordinates.y);\n  };\n\n  Shared.prototype.delegateSelection = function(ranges, focus) {\n    var doc = this.editor.getDoc();\n    doc.setSelections(ranges);\n\n    if (focus) {\n      this.editor.focus();\n    }\n  };\n\n  Shared.prototype.apply = function(props) {\n    if (props && props.selection && props.selection.ranges) {\n      this.delegateSelection(props.selection.ranges, props.selection.focus || false);\n    }\n\n    if (props && props.cursor) {\n      this.delegateCursor(props.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n\n    if (props && props.scroll) {\n      this.delegateScroll(props.scroll);\n    }\n  };\n\n  Shared.prototype.applyNext = function(props, next, preserved) {\n    if (props && props.selection && props.selection.ranges) {\n      if (next && next.selection && next.selection.ranges && !Helper.equals(props.selection.ranges, next.selection.ranges)) {\n        this.delegateSelection(next.selection.ranges, next.selection.focus || false);\n      }\n    }\n\n    if (props && props.cursor) {\n      if (next && next.cursor && !Helper.equals(props.cursor, next.cursor)) {\n        this.delegateCursor(preserved.cursor || next.cursor, next.autoScroll || false, next.autoCursor || false);\n      }\n    }\n\n    if (props && props.scroll) {\n      if (next && next.scroll && !Helper.equals(props.scroll, next.scroll)) {\n        this.delegateScroll(next.scroll);\n      }\n    }\n  };\n\n  Shared.prototype.applyUserDefined = function(props, preserved) {\n    if (preserved && preserved.cursor) {\n      this.delegateCursor(preserved.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n  };\n\n  Shared.prototype.wire = function(props) {\n    var _this = this;\n\n    Object.keys(props || {}).filter(function(p) {\n      return /^on/.test(p);\n    }).forEach(function(prop) {\n      switch (prop) {\n        case 'onBlur':\n          {\n            _this.editor.on('blur', function(cm, event) {\n              _this.props.onBlur(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onContextMenu':\n          {\n            _this.editor.on('contextmenu', function(cm, event) {\n              _this.props.onContextMenu(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onCopy':\n          {\n            _this.editor.on('copy', function(cm, event) {\n              _this.props.onCopy(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onCursor':\n          {\n            _this.editor.on('cursorActivity', function(cm) {\n              _this.props.onCursor(_this.editor, _this.editor.getDoc().getCursor());\n            });\n          }\n          break;\n\n        case 'onCursorActivity':\n          {\n            _this.editor.on('cursorActivity', function(cm) {\n              _this.props.onCursorActivity(_this.editor);\n            });\n          }\n          break;\n\n        case 'onCut':\n          {\n            _this.editor.on('cut', function(cm, event) {\n              _this.props.onCut(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDblClick':\n          {\n            _this.editor.on('dblclick', function(cm, event) {\n              _this.props.onDblClick(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDragEnter':\n          {\n            _this.editor.on('dragenter', function(cm, event) {\n              _this.props.onDragEnter(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onDragLeave':\n          {\n            _this.editor.on('dragleave', function(cm, event) {\n              _this.props.onDragLeave(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDragOver':\n          {\n            _this.editor.on('dragover', function(cm, event) {\n              _this.props.onDragOver(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onDragStart':\n          {\n            _this.editor.on('dragstart', function(cm, event) {\n              _this.props.onDragStart(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDrop':\n          {\n            _this.editor.on('drop', function(cm, event) {\n              _this.props.onDrop(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onFocus':\n          {\n            _this.editor.on('focus', function(cm, event) {\n              _this.props.onFocus(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onGutterClick':\n          {\n            _this.editor.on('gutterClick', function(cm, lineNumber, gutter, event) {\n              _this.props.onGutterClick(_this.editor, lineNumber, gutter, event);\n            });\n          }\n          break;\n\n        case 'onKeyDown':\n          {\n            _this.editor.on('keydown', function(cm, event) {\n              _this.props.onKeyDown(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onKeyPress':\n          {\n            _this.editor.on('keypress', function(cm, event) {\n              _this.props.onKeyPress(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onKeyUp':\n          {\n            _this.editor.on('keyup', function(cm, event) {\n              _this.props.onKeyUp(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onMouseDown':\n          {\n            _this.editor.on('mousedown', function(cm, event) {\n              _this.props.onMouseDown(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onPaste':\n          {\n            _this.editor.on('paste', function(cm, event) {\n              _this.props.onPaste(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onRenderLine':\n          {\n            _this.editor.on('renderLine', function(cm, line, element) {\n              _this.props.onRenderLine(_this.editor, line, element);\n            });\n\n            break;\n          }\n\n        case 'onScroll':\n          {\n            _this.editor.on('scroll', function(cm) {\n              _this.props.onScroll(_this.editor, _this.editor.getScrollInfo());\n            });\n          }\n          break;\n\n        case 'onSelection':\n          {\n            _this.editor.on('beforeSelectionChange', function(cm, data) {\n              _this.props.onSelection(_this.editor, data);\n            });\n          }\n          break;\n\n        case 'onTouchStart':\n          {\n            _this.editor.on('touchstart', function(cm, event) {\n              _this.props.onTouchStart(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onUpdate':\n          {\n            _this.editor.on('update', function(cm) {\n              _this.props.onUpdate(_this.editor);\n            });\n          }\n          break;\n\n        case 'onViewportChange':\n          {\n            _this.editor.on('viewportChange', function(cm, from, to) {\n              _this.props.onViewportChange(_this.editor, from, to);\n            });\n          }\n          break;\n      }\n    });\n  };\n\n  return Shared;\n}();\n\nvar Controlled = function(_super) {\n  __extends(Controlled, _super);\n\n  function Controlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedNext = false;\n    _this.appliedUserDefined = false;\n    _this.deferred = null;\n    _this.emulating = false;\n    _this.hydrated = false;\n\n    _this.initCb = function() {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n    return _this;\n  }\n\n  Controlled.prototype.hydrate = function(props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function(key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function(key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n\n            _this.mirror.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      this.deferred ? this.resolveChange() : this.initChange(props.value || '');\n    }\n\n    this.hydrated = true;\n  };\n\n  Controlled.prototype.initChange = function(value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n    var lastLine = doc.lastLine();\n    var lastChar = doc.getLine(doc.lastLine()).length;\n    doc.replaceRange(value || '', {\n      line: 0,\n      ch: 0\n    }, {\n      line: lastLine,\n      ch: lastChar\n    });\n    this.mirror.setValue(value);\n    doc.clearHistory();\n    this.mirror.clearHistory();\n    this.emulating = false;\n  };\n\n  Controlled.prototype.resolveChange = function() {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n\n    if (this.deferred.origin === 'undo') {\n      doc.undo();\n    } else if (this.deferred.origin === 'redo') {\n      doc.redo();\n    } else {\n      doc.replaceRange(this.deferred.text, this.deferred.from, this.deferred.to, this.deferred.origin);\n    }\n\n    this.emulating = false;\n    this.deferred = null;\n  };\n\n  Controlled.prototype.mirrorChange = function(deferred) {\n    var doc = this.editor.getDoc();\n\n    if (deferred.origin === 'undo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.undo();\n    } else if (deferred.origin === 'redo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.redo();\n    } else {\n      this.mirror.replaceRange(deferred.text, deferred.from, deferred.to, deferred.origin);\n    }\n\n    return this.mirror.getValue();\n  };\n\n  Controlled.prototype.componentDidMount = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref);\n    this.shared = new Shared(this.editor, this.props);\n    this.mirror = cm(function() {});\n    this.editor.on('electricInput', function() {\n      _this.mirror.setHistory(_this.editor.getDoc().getHistory());\n    });\n    this.editor.on('cursorActivity', function() {\n      _this.mirror.setCursor(_this.editor.getDoc().getCursor());\n    });\n    this.editor.on('beforeChange', function(cm, data) {\n      if (_this.emulating) {\n        return;\n      }\n\n      data.cancel();\n      _this.deferred = data;\n\n      var phantomChange = _this.mirrorChange(_this.deferred);\n\n      if (_this.props.onBeforeChange) _this.props.onBeforeChange(_this.editor, _this.deferred, phantomChange);\n    });\n    this.editor.on('change', function(cm, data) {\n      if (!_this.mounted) {\n        return;\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n\n    if (this.editor.getOption('autofocus')) {\n      this.editor.focus();\n    }\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  Controlled.prototype.componentWillReceiveProps = function(nextProps) {\n    if (SERVER_RENDERED) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (nextProps.value !== this.props.value) {\n      this.hydrated = false;\n    }\n\n    if (!this.props.autoCursor && this.props.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(nextProps);\n\n    if (!this.appliedNext) {\n      this.shared.applyNext(this.props, nextProps, preserved);\n      this.appliedNext = true;\n    }\n\n    this.shared.applyUserDefined(this.props, preserved);\n    this.appliedUserDefined = true;\n  };\n\n  Controlled.prototype.componentWillUnmount = function() {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  Controlled.prototype.shouldComponentUpdate = function(nextProps, nextState) {\n    return !SERVER_RENDERED;\n  };\n\n  Controlled.prototype.render = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 ' + this.props.className : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return Controlled;\n}(React.Component);\n\nexports.Controlled = Controlled;\n\nvar UnControlled = function(_super) {\n  __extends(UnControlled, _super);\n\n  function UnControlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedUserDefined = false;\n    _this.continueChange = false;\n    _this.detached = false;\n    _this.hydrated = false;\n\n    _this.initCb = function() {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n\n    _this.onBeforeChangeCb = function() {\n      _this.continueChange = true;\n    };\n\n    return _this;\n  }\n\n  UnControlled.prototype.hydrate = function(props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function(key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function(key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      var doc = this.editor.getDoc();\n      var lastLine = doc.lastLine();\n      var lastChar = doc.getLine(doc.lastLine()).length;\n      doc.replaceRange(props.value || '', {\n        line: 0,\n        ch: 0\n      }, {\n        line: lastLine,\n        ch: lastChar\n      });\n    }\n\n    this.hydrated = true;\n  };\n\n  UnControlled.prototype.componentDidMount = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n    this.detached = this.props.detach === true;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref);\n    this.shared = new Shared(this.editor, this.props);\n    this.editor.on('beforeChange', function(cm, data) {\n      if (_this.props.onBeforeChange) {\n        _this.props.onBeforeChange(_this.editor, data, _this.editor.getValue(), _this.onBeforeChangeCb);\n      }\n    });\n    this.editor.on('change', function(cm, data) {\n      if (!_this.mounted || !_this.props.onChange) {\n        return;\n      }\n\n      if (_this.props.onBeforeChange) {\n        if (_this.continueChange) {\n          _this.props.onChange(_this.editor, data, _this.editor.getValue());\n        }\n      } else {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n    this.editor.getDoc().clearHistory();\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  UnControlled.prototype.componentWillReceiveProps = function(nextProps) {\n    if (this.detached && nextProps.detach === false) {\n      this.detached = false;\n\n      if (this.props.editorDidAttach) {\n        this.props.editorDidAttach(this.editor);\n      }\n    }\n\n    if (!this.detached && nextProps.detach === true) {\n      this.detached = true;\n\n      if (this.props.editorDidDetach) {\n        this.props.editorDidDetach(this.editor);\n      }\n    }\n\n    if (SERVER_RENDERED || this.detached) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (nextProps.value !== this.props.value) {\n      this.hydrated = false;\n      this.applied = false;\n      this.appliedUserDefined = false;\n    }\n\n    if (!this.props.autoCursor && this.props.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(nextProps);\n\n    if (!this.applied) {\n      this.shared.apply(this.props);\n      this.applied = true;\n    }\n\n    if (!this.appliedUserDefined) {\n      this.shared.applyUserDefined(this.props, preserved);\n      this.appliedUserDefined = true;\n    }\n  };\n\n  UnControlled.prototype.componentWillUnmount = function() {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  UnControlled.prototype.shouldComponentUpdate = function(nextProps, nextState) {\n    var update = true;\n    if (SERVER_RENDERED) update = false;\n    if (this.detached) update = false;\n    return update;\n  };\n\n  UnControlled.prototype.render = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 ' + this.props.className : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return UnControlled;\n}(React.Component);\n\nexports.UnControlled = UnControlled;"]},"metadata":{},"sourceType":"script"}