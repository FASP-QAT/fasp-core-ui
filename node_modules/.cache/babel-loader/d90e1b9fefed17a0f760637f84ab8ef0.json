{"ast":null,"code":"/**\r\n * (c) jSuites Javascript Web Components (v2.7)\r\n *\r\n * Author: Paul Hodel <paul.hodel@gmail.com>\r\n * Website: https://bossanova.uk/jsuites/\r\n * Description: Create amazing web based applications.\r\n *\r\n * MIT License\r\n *\r\n */\n;\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.jSuites = factory();\n})(this, function () {\n  'use strict';\n\n  var jSuites = function (options) {\n    var obj = {};\n\n    obj.init = function () {\n      // Find root element\n      var app = document.querySelector('.japp'); // Root element\n\n      if (app) {\n        obj.el = app;\n      } else {\n        obj.el = document.body;\n      }\n    };\n\n    obj.guid = function () {\n      var guid = '';\n\n      for (var i = 0; i < 32; i++) {\n        guid += Math.floor(Math.random() * 0xF).toString(0xF);\n      }\n\n      return guid;\n    };\n\n    obj.getWindowWidth = function () {\n      var w = window,\n          d = document,\n          e = d.documentElement,\n          g = d.getElementsByTagName('body')[0],\n          x = w.innerWidth || e.clientWidth || g.clientWidth;\n      return x;\n    };\n\n    obj.getWindowHeight = function () {\n      var w = window,\n          d = document,\n          e = d.documentElement,\n          g = d.getElementsByTagName('body')[0],\n          y = w.innerHeight || e.clientHeight || g.clientHeight;\n      return y;\n    };\n\n    obj.getPosition = function (e) {\n      if (e.changedTouches && e.changedTouches[0]) {\n        var x = e.changedTouches[0].pageX;\n        var y = e.changedTouches[0].pageY;\n      } else {\n        var x = window.Event ? e.pageX : e.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);\n        var y = window.Event ? e.pageY : e.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);\n      }\n\n      return [x, y];\n    };\n\n    obj.click = function (el) {\n      if (el.click) {\n        el.click();\n      } else {\n        var evt = new MouseEvent('click', {\n          bubbles: true,\n          cancelable: true,\n          view: window\n        });\n        el.dispatchEvent(evt);\n      }\n    };\n\n    obj.getElement = function (element, className) {\n      var foundElement = false;\n\n      function path(element) {\n        if (element.className) {\n          if (element.classList.contains(className)) {\n            foundElement = element;\n          }\n        }\n\n        if (element.parentNode) {\n          path(element.parentNode);\n        }\n      }\n\n      path(element);\n      return foundElement;\n    };\n\n    obj.getLinkElement = function (element) {\n      var targetElement = false;\n\n      function path(element) {\n        if ((element.tagName == 'A' || element.tagName == 'DIV') && element.getAttribute('data-href')) {\n          targetElement = element;\n        }\n\n        if (element.parentNode) {\n          path(element.parentNode);\n        }\n      }\n\n      path(element);\n      return targetElement;\n    };\n\n    obj.getFormElements = function (formObject) {\n      var ret = {};\n\n      if (formObject) {\n        var elements = formObject.querySelectorAll(\"input, select, textarea\");\n      } else {\n        var elements = document.querySelectorAll(\"input, select, textarea\");\n      }\n\n      for (var i = 0; i < elements.length; i++) {\n        var element = elements[i];\n        var name = element.name;\n        var value = element.value;\n\n        if (name) {\n          ret[name] = value;\n        }\n      }\n\n      return ret;\n    };\n\n    obj.exists = function (url, __callback) {\n      var http = new XMLHttpRequest();\n      http.open('HEAD', url, false);\n      http.send();\n\n      if (http.status) {\n        __callback(http.status);\n      }\n    };\n\n    obj.getFiles = function (element) {\n      if (!element) {\n        console.error('No element defined in the arguments of your method');\n      } // Get attachments\n\n\n      var files = element.querySelectorAll('.jfile');\n\n      if (files.length > 0) {\n        var data = [];\n\n        for (var i = 0; i < files.length; i++) {\n          var file = {};\n          var src = files[i].getAttribute('src');\n\n          if (files[i].classList.contains('jremove')) {\n            file.remove = 1;\n          } else {\n            if (src.substr(0, 4) == 'data') {\n              file.content = src.substr(src.indexOf(',') + 1);\n              file.extension = files[i].getAttribute('data-extension');\n            } else {\n              file.file = src;\n              file.extension = files[i].getAttribute('data-extension');\n\n              if (!file.extension) {\n                file.extension = src.substr(src.lastIndexOf('.') + 1);\n              }\n\n              if (jSuites.files[file.file]) {\n                file.content = jSuites.files[file.file];\n              }\n            } // Optional file information\n\n\n            if (files[i].getAttribute('data-name')) {\n              file.name = files[i].getAttribute('data-name');\n            }\n\n            if (files[i].getAttribute('data-file')) {\n              file.file = files[i].getAttribute('data-file');\n            }\n\n            if (files[i].getAttribute('data-size')) {\n              file.size = files[i].getAttribute('data-size');\n            }\n\n            if (files[i].getAttribute('data-date')) {\n              file.date = files[i].getAttribute('data-date');\n            }\n\n            if (files[i].getAttribute('data-cover')) {\n              file.cover = files[i].getAttribute('data-cover');\n            }\n          } // TODO SMALL thumbs?\n\n\n          data[i] = file;\n        }\n\n        return data;\n      }\n    };\n\n    obj.ajax = function (options) {\n      if (!options.data) {\n        options.data = {};\n      }\n\n      if (options.type) {\n        options.method = options.type;\n      }\n\n      if (options.data) {\n        var data = [];\n        var keys = Object.keys(options.data);\n\n        if (keys.length) {\n          for (var i = 0; i < keys.length; i++) {\n            if (typeof options.data[keys[i]] == 'object') {\n              var o = options.data[keys[i]];\n\n              for (var j = 0; j < o.length; j++) {\n                if (typeof o[j] == 'string') {\n                  data.push(keys[i] + '[' + j + ']=' + encodeURIComponent(o[j]));\n                } else {\n                  var prop = Object.keys(o[j]);\n\n                  for (var z = 0; z < prop.length; z++) {\n                    data.push(keys[i] + '[' + j + '][' + prop[z] + ']=' + encodeURIComponent(o[j][prop[z]]));\n                  }\n                }\n              }\n            } else {\n              data.push(keys[i] + '=' + encodeURIComponent(options.data[keys[i]]));\n            }\n          }\n        }\n\n        if (options.method == 'GET' && data.length > 0) {\n          if (options.url.indexOf('?') < 0) {\n            options.url += '?';\n          }\n\n          options.url += data.join('&');\n        }\n      }\n\n      var httpRequest = new XMLHttpRequest();\n      httpRequest.open(options.method, options.url, true);\n\n      if (options.method == 'POST') {\n        httpRequest.setRequestHeader('Accept', 'application/json');\n        httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      } else {\n        if (options.dataType == 'json') {\n          httpRequest.setRequestHeader('Content-Type', 'text/json');\n        }\n      } // No cache\n\n\n      httpRequest.setRequestHeader('pragma', 'no-cache');\n      httpRequest.setRequestHeader('cache-control', 'no-cache');\n\n      httpRequest.onload = function () {\n        if (httpRequest.status === 200) {\n          if (options.dataType == 'json') {\n            try {\n              var result = JSON.parse(httpRequest.responseText);\n\n              if (options.success && typeof options.success == 'function') {\n                options.success(result);\n              }\n            } catch (err) {\n              if (options.error && typeof options.error == 'function') {\n                options.error(result);\n              }\n            }\n          } else {\n            var result = httpRequest.responseText;\n\n            if (options.success && typeof options.success == 'function') {\n              options.success(result);\n            }\n          }\n        } else {\n          if (options.error && typeof options.error == 'function') {\n            options.error(httpRequest.responseText);\n          }\n        } // Global complete method\n\n\n        if (obj.ajax.requests && obj.ajax.requests.length) {\n          // Get index of this request in the container\n          var index = obj.ajax.requests.indexOf(httpRequest); // Remove from the ajax requests container\n\n          obj.ajax.requests.splice(index, 1); // Last one?\n\n          if (!obj.ajax.requests.length) {\n            if (options.complete && typeof options.complete == 'function') {\n              options.complete(result);\n            }\n          }\n        }\n      };\n\n      if (data) {\n        httpRequest.send(data.join('&'));\n      } else {\n        httpRequest.send();\n      }\n\n      obj.ajax.requests.push(httpRequest);\n      return httpRequest;\n    };\n\n    obj.ajax.requests = [];\n\n    obj.slideLeft = function (element, direction, done) {\n      if (direction == true) {\n        element.classList.add('slide-left-in');\n        setTimeout(function () {\n          element.classList.remove('slide-left-in');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 400);\n      } else {\n        element.classList.add('slide-left-out');\n        setTimeout(function () {\n          element.classList.remove('slide-left-out');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 400);\n      }\n    };\n\n    obj.slideRight = function (element, direction, done) {\n      if (direction == true) {\n        element.classList.add('slide-right-in');\n        setTimeout(function () {\n          element.classList.remove('slide-right-in');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 400);\n      } else {\n        element.classList.add('slide-right-out');\n        setTimeout(function () {\n          element.classList.remove('slide-right-out');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 400);\n      }\n    };\n\n    obj.slideTop = function (element, direction, done) {\n      if (direction == true) {\n        element.classList.add('slide-top-in');\n        setTimeout(function () {\n          element.classList.remove('slide-top-in');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 400);\n      } else {\n        element.classList.add('slide-top-out');\n        setTimeout(function () {\n          element.classList.remove('slide-top-out');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 400);\n      }\n    };\n\n    obj.slideBottom = function (element, direction, done) {\n      if (direction == true) {\n        element.classList.add('slide-bottom-in');\n        setTimeout(function () {\n          element.classList.remove('slide-bottom-in');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 400);\n      } else {\n        element.classList.add('slide-bottom-out');\n        setTimeout(function () {\n          element.classList.remove('slide-bottom-out');\n\n          if (typeof done == 'function') {\n            done();\n          }\n        }, 100);\n      }\n    };\n\n    obj.fadeIn = function (element, done) {\n      element.classList.add('fade-in');\n      setTimeout(function () {\n        element.classList.remove('fade-in');\n\n        if (typeof done == 'function') {\n          done();\n        }\n      }, 2000);\n    };\n\n    obj.fadeOut = function (element, done) {\n      element.classList.add('fade-out');\n      setTimeout(function () {\n        element.classList.remove('fade-out');\n\n        if (typeof done == 'function') {\n          done();\n        }\n      }, 1000);\n    };\n\n    obj.keyDownControls = function (e) {\n      if (e.which == 27) {\n        var nodes = document.querySelectorAll('.jslider');\n\n        if (nodes.length > 0) {\n          for (var i = 0; i < nodes.length; i++) {\n            nodes[i].slider.close();\n          }\n        }\n\n        if (document.querySelector('.jdialog')) {\n          jSuites.dialog.close();\n        }\n      } else if (e.which == 13) {\n        if (document.querySelector('.jdialog')) {\n          if (typeof jSuites.dialog.options.onconfirm == 'function') {\n            jSuites.dialog.options.onconfirm();\n          }\n\n          jSuites.dialog.close();\n        }\n      } // Verify mask\n\n\n      if (jSuites.mask) {\n        jSuites.mask.apply(e);\n      }\n    };\n\n    var actionUpControl = function actionUpControl(e) {\n      var element = null;\n\n      if (element = jSuites.getLinkElement(e.target)) {\n        var link = element.getAttribute('data-href');\n\n        if (link == '#back') {\n          window.history.back();\n        } else if (link == '#panel') {\n          jSuites.panel();\n        } else {\n          jSuites.pages(link);\n        }\n      }\n    };\n\n    var controlSwipeLeft = function controlSwipeLeft(e) {\n      var element = jSuites.getElement(e.target, 'option');\n\n      if (element && element.querySelector('.option-actions')) {\n        element.scrollTo({\n          left: 100,\n          behavior: 'smooth'\n        });\n      } else {\n        var element = jSuites.getElement(e.target, 'jcalendar');\n\n        if (element && jSuites.calendar.current) {\n          jSuites.calendar.current.prev();\n        } else {\n          if (jSuites.panel) {\n            var element = jSuites.panel.get();\n\n            if (element) {\n              if (element.style.display != 'none') {\n                jSuites.panel.close();\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var controlSwipeRight = function controlSwipeRight(e) {\n      var element = jSuites.getElement(e.target, 'option');\n\n      if (element && element.querySelector('.option-actions')) {\n        element.scrollTo({\n          left: 0,\n          behavior: 'smooth'\n        });\n      } else {\n        var element = jSuites.getElement(e.target, 'jcalendar');\n\n        if (element && jSuites.calendar.current) {\n          jSuites.calendar.current.next();\n        } else {\n          if (jSuites.panel) {\n            var element = jSuites.panel.get();\n\n            if (element) {\n              if (element.style.display == 'none') {\n                jSuites.panel();\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var actionOverControl = function actionOverControl(e) {\n      // Tooltip\n      if (jSuites.tooltip) {\n        jSuites.tooltip(e);\n      }\n    };\n\n    var actionOutControl = function actionOutControl(e) {\n      // Tooltip\n      if (jSuites.tooltip) {\n        jSuites.tooltip.hide();\n      }\n    }; // Create page container\n\n\n    document.addEventListener('swipeleft', controlSwipeLeft);\n    document.addEventListener('swiperight', controlSwipeRight);\n    document.addEventListener('keydown', obj.keyDownControls);\n\n    if ('ontouchend' in document.documentElement === true) {\n      document.addEventListener('touchend', actionUpControl);\n    } else {\n      document.addEventListener('mouseup', actionUpControl);\n    } // Onmouseover\n\n\n    document.addEventListener('mouseover', actionOverControl);\n    document.addEventListener('mouseout', actionOutControl);\n    document.addEventListener('DOMContentLoaded', function () {\n      obj.init();\n    }); // Pop state control\n\n    window.onpopstate = function (e) {\n      if (e.state && e.state.route) {\n        if (jSuites.pages.get(e.state.route)) {\n          jSuites.pages(e.state.route, {\n            ignoreHistory: true\n          });\n        }\n      }\n    };\n\n    return obj;\n  }();\n\n  jSuites.files = [];\n\n  jSuites.calendar = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Global container\n\n    if (!jSuites.calendar.current) {\n      jSuites.calendar.current = null;\n    } // Default configuration\n\n\n    var defaults = {\n      // Date format\n      format: 'DD/MM/YYYY',\n      // Allow keyboard date entry\n      readonly: true,\n      // Today is default\n      today: false,\n      // Show timepicker\n      time: false,\n      // Show the reset button\n      resetButton: true,\n      // Placeholder\n      placeholder: '',\n      // Translations can be done here\n      months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n      weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n      weekdays_short: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n      // Value\n      value: null,\n      // Events\n      onclose: null,\n      onchange: null,\n      // Fullscreen (this is automatic set for screensize < 800)\n      fullscreen: false,\n      // Internal mode controller\n      mode: null,\n      position: null,\n      // Create the calendar closed as default\n      opened: false\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Value\n\n\n    if (!obj.options.value && el.value) {\n      obj.options.value = el.value;\n    } // Make sure use upper case in the format\n\n\n    obj.options.format = obj.options.format.toUpperCase();\n\n    if (obj.options.value) {\n      var date = obj.options.value.split(' ');\n      var time = date[1];\n      var date = date[0].split('-');\n      var y = parseInt(date[0]);\n      var m = parseInt(date[1]);\n      var d = parseInt(date[2]);\n\n      if (time) {\n        var time = time.split(':');\n        var h = parseInt(time[0]);\n        var i = parseInt(time[1]);\n      } else {\n        var h = 0;\n        var i = 0;\n      }\n    } else {\n      var date = new Date();\n      var y = date.getFullYear();\n      var m = date.getMonth() + 1;\n      var d = date.getDate();\n      var h = date.getHours();\n      var i = date.getMinutes();\n    } // Current value\n\n\n    obj.date = [y, m, d, h, i, 0]; // Two digits\n\n    var two = function two(value) {\n      value = '' + value;\n\n      if (value.length == 1) {\n        value = '0' + value;\n      }\n\n      return value;\n    }; // Element\n\n\n    el.classList.add('jcalendar-input'); // Calendar elements\n\n    var calendarReset = document.createElement('div');\n    calendarReset.className = 'jcalendar-reset';\n    calendarReset.innerHTML = 'Reset';\n    var calendarConfirm = document.createElement('div');\n    calendarConfirm.className = 'jcalendar-confirm';\n    calendarConfirm.innerHTML = 'Done';\n    var calendarControls = document.createElement('div');\n    calendarControls.className = 'jcalendar-controls';\n\n    if (obj.options.resetButton) {\n      calendarControls.appendChild(calendarReset);\n    }\n\n    calendarControls.appendChild(calendarConfirm);\n    var calendarContainer = document.createElement('div');\n    calendarContainer.className = 'jcalendar-container';\n    var calendarContent = document.createElement('div');\n    calendarContent.className = 'jcalendar-content';\n    calendarContent.appendChild(calendarControls);\n    calendarContainer.appendChild(calendarContent); // Main element\n\n    var calendar = document.createElement('div');\n    calendar.className = 'jcalendar';\n    calendar.appendChild(calendarContainer); // Previous button\n\n    var calendarHeaderPrev = document.createElement('td');\n    calendarHeaderPrev.setAttribute('colspan', '2');\n    calendarHeaderPrev.className = 'jcalendar-prev'; // Header with year and month\n\n    var calendarLabelYear = document.createElement('span');\n    calendarLabelYear.className = 'jcalendar-year';\n    var calendarLabelMonth = document.createElement('span');\n    calendarLabelMonth.className = 'jcalendar-month';\n    var calendarHeaderTitle = document.createElement('td');\n    calendarHeaderTitle.className = 'jcalendar-header';\n    calendarHeaderTitle.setAttribute('colspan', '3');\n    calendarHeaderTitle.appendChild(calendarLabelMonth);\n    calendarHeaderTitle.appendChild(calendarLabelYear);\n    var calendarHeaderNext = document.createElement('td');\n    calendarHeaderNext.setAttribute('colspan', '2');\n    calendarHeaderNext.className = 'jcalendar-next';\n    var calendarHeaderRow = document.createElement('tr');\n    calendarHeaderRow.appendChild(calendarHeaderPrev);\n    calendarHeaderRow.appendChild(calendarHeaderTitle);\n    calendarHeaderRow.appendChild(calendarHeaderNext);\n    var calendarHeader = document.createElement('thead');\n    calendarHeader.appendChild(calendarHeaderRow);\n    var calendarBody = document.createElement('tbody');\n    var calendarFooter = document.createElement('tfoot'); // Calendar table\n\n    var calendarTable = document.createElement('table');\n    calendarTable.setAttribute('cellpadding', '0');\n    calendarTable.setAttribute('cellspacing', '0');\n    calendarTable.appendChild(calendarHeader);\n    calendarTable.appendChild(calendarBody);\n    calendarTable.appendChild(calendarFooter);\n    calendarContent.appendChild(calendarTable);\n    var calendarSelectHour = document.createElement('select');\n    calendarSelectHour.className = 'jcalendar-select';\n\n    calendarSelectHour.onchange = function () {\n      obj.date[3] = this.value;\n    };\n\n    for (var i = 0; i < 24; i++) {\n      var element = document.createElement('option');\n      element.value = i;\n      element.innerHTML = two(i);\n      calendarSelectHour.appendChild(element);\n    }\n\n    var calendarSelectMin = document.createElement('select');\n    calendarSelectMin.className = 'jcalendar-select';\n\n    calendarSelectMin.onchange = function () {\n      obj.date[4] = this.value;\n    };\n\n    for (var i = 0; i < 60; i++) {\n      var element = document.createElement('option');\n      element.value = i;\n      element.innerHTML = two(i);\n      calendarSelectMin.appendChild(element);\n    } // Footer controls\n\n\n    var calendarControls = document.createElement('div');\n    calendarControls.className = 'jcalendar-controls';\n    var calendarControlsTime = document.createElement('div');\n    calendarControlsTime.className = 'jcalendar-time';\n    calendarControlsTime.style.maxWidth = '140px';\n    calendarControlsTime.appendChild(calendarSelectHour);\n    calendarControlsTime.appendChild(calendarSelectMin);\n    var calendarControlsUpdate = document.createElement('div');\n    calendarControlsUpdate.style.flexGrow = '10';\n    calendarControlsUpdate.innerHTML = '<input type=\"button\" class=\"jcalendar-update\" value=\"Update\">';\n    calendarControls.appendChild(calendarControlsTime);\n    calendarControls.appendChild(calendarControlsUpdate);\n    calendarContent.appendChild(calendarControls);\n    var calendarBackdrop = document.createElement('div');\n    calendarBackdrop.className = 'jcalendar-backdrop';\n    calendar.appendChild(calendarBackdrop); // Methods\n\n    obj.open = function (value) {\n      if (!calendar.classList.contains('jcalendar-focus')) {\n        if (jSuites.calendar.current) {\n          jSuites.calendar.current.close();\n        } // Current\n\n\n        jSuites.calendar.current = obj; // Show calendar\n\n        calendar.classList.add('jcalendar-focus'); // Get days\n\n        obj.getDays(); // Hour\n\n        if (obj.options.time) {\n          calendarSelectHour.value = obj.date[3];\n          calendarSelectMin.value = obj.date[4];\n        } // Get the position of the corner helper\n\n\n        if (jSuites.getWindowWidth() < 800 || obj.options.fullscreen) {\n          // Full\n          calendar.classList.add('jcalendar-fullsize'); // Animation\n\n          jSuites.slideBottom(calendarContent, 1);\n        } else {\n          var rect = el.getBoundingClientRect();\n          var rectContent = calendarContent.getBoundingClientRect();\n\n          if (obj.options.position) {\n            calendarContainer.style.position = 'fixed';\n\n            if (window.innerHeight < rect.bottom + rectContent.height) {\n              calendarContainer.style.top = rect.top - (rectContent.height + 2) + 'px';\n            } else {\n              calendarContainer.style.top = rect.top + rect.height + 2 + 'px';\n            }\n\n            calendarContainer.style.left = rect.left + 'px';\n          } else {\n            if (window.innerHeight < rect.bottom + rectContent.height) {\n              calendarContainer.style.bottom = 1 * rect.height + rectContent.height + 2 + 'px';\n            } else {\n              calendarContainer.style.top = 2 + 'px';\n            }\n          }\n        }\n      }\n    };\n\n    obj.close = function (ignoreEvents, update) {\n      // Current\n      jSuites.calendar.current = null;\n\n      if (update != false && el.tagName == 'INPUT') {\n        obj.setValue(obj.getValue());\n      } // Animation\n\n\n      if (!ignoreEvents && typeof obj.options.onclose == 'function') {\n        obj.options.onclose(el);\n      } // Hide\n\n\n      calendar.classList.remove('jcalendar-focus');\n      return obj.getValue();\n    };\n\n    obj.prev = function () {\n      // Check if the visualization is the days picker or years picker\n      if (obj.options.mode == 'years') {\n        obj.date[0] = obj.date[0] - 12; // Update picker table of days\n\n        obj.getYears();\n      } else {\n        // Go to the previous month\n        if (obj.date[1] < 2) {\n          obj.date[0] = obj.date[0] - 1;\n          obj.date[1] = 12;\n        } else {\n          obj.date[1] = obj.date[1] - 1;\n        } // Update picker table of days\n\n\n        obj.getDays();\n      }\n    };\n\n    obj.next = function () {\n      // Check if the visualization is the days picker or years picker\n      if (obj.options.mode == 'years') {\n        obj.date[0] = parseInt(obj.date[0]) + 12; // Update picker table of days\n\n        obj.getYears();\n      } else {\n        // Go to the previous month\n        if (obj.date[1] > 11) {\n          obj.date[0] = obj.date[0] + 1;\n          obj.date[1] = 1;\n        } else {\n          obj.date[1] = obj.date[1] + 1;\n        } // Update picker table of days\n\n\n        obj.getDays();\n      }\n    };\n\n    obj.setValue = function (val) {\n      if (val) {\n        // Keep value\n        obj.options.value = val; // Set label\n\n        var value = obj.setLabel(val, obj.options.format);\n        var date = obj.options.value.split(' ');\n\n        if (!date[1]) {\n          date[1] = '00:00:00';\n        }\n\n        var time = date[1].split(':');\n        var date = date[0].split('-');\n        var y = parseInt(date[0]);\n        var m = parseInt(date[1]);\n        var d = parseInt(date[2]);\n        var h = parseInt(time[0]);\n        var i = parseInt(time[1]);\n        obj.date = [y, m, d, h, i, 0];\n        var val = obj.setLabel(val, obj.options.format);\n\n        if (el.value != val) {\n          el.value = val; // On change\n\n          if (typeof obj.options.onchange == 'function') {\n            obj.options.onchange(el, val, obj.date);\n          }\n        }\n\n        obj.getDays();\n      }\n    };\n\n    obj.getValue = function () {\n      if (obj.date) {\n        if (obj.options.time) {\n          return two(obj.date[0]) + '-' + two(obj.date[1]) + '-' + two(obj.date[2]) + ' ' + two(obj.date[3]) + ':' + two(obj.date[4]) + ':' + two(0);\n        } else {\n          return two(obj.date[0]) + '-' + two(obj.date[1]) + '-' + two(obj.date[2]) + ' ' + two(0) + ':' + two(0) + ':' + two(0);\n        }\n      } else {\n        return \"\";\n      }\n    };\n    /**\n     * Update calendar\n     */\n\n\n    obj.update = function (element) {\n      obj.date[2] = element.innerText;\n\n      if (!obj.options.time) {\n        obj.close();\n      } else {\n        obj.date[3] = calendarSelectHour.value;\n        obj.date[4] = calendarSelectMin.value;\n      }\n\n      var elements = calendar.querySelector('.jcalendar-selected');\n\n      if (elements) {\n        elements.classList.remove('jcalendar-selected');\n      }\n\n      element.classList.add('jcalendar-selected');\n    };\n    /**\n     * Set to blank\n     */\n\n\n    obj.reset = function () {\n      // Clear element\n      obj.date = null; // Reset element\n\n      el.value = ''; // Close calendar\n\n      obj.close();\n    };\n    /**\n     * Get calendar days\n     */\n\n\n    obj.getDays = function () {\n      // Mode\n      obj.options.mode = 'days'; // Variables\n\n      var d = 0;\n      var today = 0;\n      var today_d = 0;\n      var calendar_day; // Setting current values in case of NULLs\n\n      var date = new Date();\n      var year = obj.date && obj.date[0] ? obj.date[0] : parseInt(date.getFullYear());\n      var month = obj.date && obj.date[1] ? obj.date[1] : parseInt(date.getMonth()) + 1;\n      var day = obj.date && obj.date[2] ? obj.date[2] : parseInt(date.getDay());\n      var hour = obj.date && obj.date[3] ? obj.date[3] : parseInt(date.getHours());\n      var min = obj.date && obj.date[4] ? obj.date[4] : parseInt(date.getMinutes());\n      obj.date = [year, month, day, hour, min, 0]; // Update title\n\n      calendarLabelYear.innerHTML = year;\n      calendarLabelMonth.innerHTML = obj.options.months[month - 1]; // Flag if this is the current month and year\n\n      if (date.getMonth() == month - 1 && date.getFullYear() == year) {\n        today = 1;\n        today_d = date.getDate();\n      }\n\n      var date = new Date(year, month, 0, 0, 0);\n      var nd = date.getDate();\n      var date = new Date(year, month - 1, 0, hour, min);\n      var fd = date.getDay() + 1; // Reset table\n\n      calendarBody.innerHTML = ''; // Weekdays Row\n\n      var row = document.createElement('tr');\n      row.setAttribute('align', 'center');\n      calendarBody.appendChild(row);\n\n      for (var i = 0; i < 7; i++) {\n        var cell = document.createElement('td');\n        cell.setAttribute('width', '30');\n        cell.classList.add('jcalendar-weekday');\n        cell.innerHTML = obj.options.weekdays_short[i];\n        row.appendChild(cell);\n      } // Avoid a blank line\n\n\n      if (fd == 7) {\n        var j = 7;\n      } else {\n        var j = 0;\n      } // Days inside the table\n\n\n      var row = document.createElement('tr');\n      row.setAttribute('align', 'center');\n      calendarBody.appendChild(row); // Days in the month\n\n      for (var i = j; i < Math.ceil((nd + fd) / 7) * 7; i++) {\n        // Create row\n        if (i > 0 && !(i % 7)) {\n          var row = document.createElement('tr');\n          row.setAttribute('align', 'center');\n          calendarBody.appendChild(row);\n        }\n\n        if (i >= fd && i < nd + fd) {\n          d += 1;\n        } else {\n          d = 0;\n        } // Create cell\n\n\n        var cell = document.createElement('td');\n        cell.setAttribute('width', '30');\n        cell.classList.add('jcalendar-set-day');\n        row.appendChild(cell);\n\n        if (d == 0) {\n          cell.innerHTML = '';\n        } else {\n          if (d < 10) {\n            cell.innerHTML = 0 + d;\n          } else {\n            cell.innerHTML = d;\n          }\n        } // Selected\n\n\n        if (d && d == day) {\n          cell.classList.add('jcalendar-selected');\n        } // Sundays\n\n\n        if (!(i % 7)) {\n          cell.style.color = 'red';\n        } // Today\n\n\n        if (today == 1 && today_d == d) {\n          cell.style.fontWeight = 'bold';\n        }\n      } // Show time controls\n\n\n      if (obj.options.time) {\n        calendarControlsTime.style.display = '';\n      } else {\n        calendarControlsTime.style.display = 'none';\n      }\n    };\n\n    obj.getMonths = function () {\n      // Mode\n      obj.options.mode = 'months'; // Loading month labels\n\n      var months = obj.options.months; // Update title\n\n      calendarLabelYear.innerHTML = obj.date[0];\n      calendarLabelMonth.innerHTML = ''; // Create months table\n\n      var html = '<td colspan=\"7\"><table width=\"100%\"><tr align=\"center\">';\n\n      for (i = 0; i < 12; i++) {\n        if (i > 0 && !(i % 4)) {\n          html += '</tr><tr align=\"center\">';\n        }\n\n        var month = parseInt(i) + 1;\n        html += '<td class=\"jcalendar-set-month\" data-value=\"' + month + '\">' + months[i] + '</td>';\n      }\n\n      html += '</tr></table></td>';\n      calendarBody.innerHTML = html;\n    };\n\n    obj.getYears = function () {\n      // Mode\n      obj.options.mode = 'years'; // Array of years\n\n      var y = [];\n\n      for (i = 0; i < 25; i++) {\n        y[i] = parseInt(obj.date[0]) + (i - 12);\n      } // Assembling the year tables\n\n\n      var html = '<td colspan=\"7\"><table width=\"100%\"><tr align=\"center\">';\n\n      for (i = 0; i < 25; i++) {\n        if (i > 0 && !(i % 5)) {\n          html += '</tr><tr align=\"center\">';\n        }\n\n        html += '<td class=\"jcalendar-set-year\">' + y[i] + '</td>';\n      }\n\n      html += '</tr></table></td>';\n      calendarBody.innerHTML = html;\n    };\n\n    obj.setLabel = function (value, format) {\n      return jSuites.calendar.getDateString(value, format);\n    };\n\n    obj.fromFormatted = function (value, format) {\n      return jSuites.calendar.extractDateFromString(value, format);\n    }; // Add properties\n\n\n    el.setAttribute('autocomplete', 'off');\n    el.setAttribute('data-mask', obj.options.format.toLowerCase());\n\n    if (obj.options.readonly) {\n      el.setAttribute('readonly', 'readonly');\n    }\n\n    if (obj.options.placeholder) {\n      el.setAttribute('placeholder', obj.options.placeholder);\n    }\n\n    var mouseUpControls = function mouseUpControls(e) {\n      var action = e.target.className; // Object id\n\n      if (action == 'jcalendar-prev') {\n        obj.prev();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-next') {\n        obj.next();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-month') {\n        obj.getMonths();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-year') {\n        obj.getYears();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-set-year') {\n        obj.date[0] = e.target.innerText;\n        obj.getDays();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-set-month') {\n        obj.date[1] = parseInt(e.target.getAttribute('data-value'));\n        obj.getDays();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-confirm' || action == 'jcalendar-update') {\n        obj.close();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-close') {\n        obj.close();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-backdrop') {\n        obj.close(false, false);\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (action == 'jcalendar-reset') {\n        obj.reset();\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (e.target.classList.contains('jcalendar-set-day')) {\n        if (e.target.innerText) {\n          obj.update(e.target);\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n    };\n\n    var keyUpControls = function keyUpControls(e) {\n      if (e.target.value && e.target.value.length > 3) {\n        var test = jSuites.calendar.extractDateFromString(e.target.value, obj.options.format);\n\n        if (test) {\n          if (e.target.getAttribute('data-completed') == 'true') {\n            obj.setValue(test);\n          }\n        }\n      }\n    };\n\n    var verifyControls = function verifyControls(e) {\n      console.log(e.target.className);\n    }; // Handle events\n\n\n    el.addEventListener(\"keyup\", keyUpControls); // Add global events\n\n    calendar.addEventListener(\"swipeleft\", function (e) {\n      jSuites.slideLeft(calendarTable, 0, function () {\n        obj.next();\n        jSuites.slideRight(calendarTable, 1);\n      });\n      e.preventDefault();\n      e.stopPropagation();\n    });\n    calendar.addEventListener(\"swiperight\", function (e) {\n      jSuites.slideRight(calendarTable, 0, function () {\n        obj.prev();\n        jSuites.slideLeft(calendarTable, 1);\n      });\n      e.preventDefault();\n      e.stopPropagation();\n    });\n\n    if ('ontouchend' in document.documentElement === true) {\n      calendar.addEventListener(\"touchend\", mouseUpControls);\n      el.addEventListener(\"touchend\", function (e) {\n        obj.open();\n      });\n    } else {\n      calendar.addEventListener(\"mouseup\", mouseUpControls);\n      el.addEventListener(\"mouseup\", function (e) {\n        obj.open();\n      });\n    } // Append element to the DOM\n\n\n    el.parentNode.insertBefore(calendar, el.nextSibling); // Keep object available from the node\n\n    el.calendar = obj;\n\n    if (obj.options.opened == true) {\n      obj.open();\n    }\n\n    return obj;\n  };\n\n  jSuites.calendar.prettify = function (d, texts) {\n    if (!texts) {\n      var texts = {\n        justNow: 'Just now',\n        xMinutesAgo: '{0}m ago',\n        xHoursAgo: '{0}h ago',\n        xDaysAgo: '{0}d ago',\n        xWeeksAgo: '{0}w ago',\n        xMonthsAgo: '{0} mon ago',\n        xYearsAgo: '{0}y ago'\n      };\n    }\n\n    var d1 = new Date();\n    var d2 = new Date(d);\n    var total = parseInt((d1 - d2) / 1000 / 60);\n\n    String.prototype.format = function (o) {\n      return this.replace('{0}', o);\n    };\n\n    if (total == 0) {\n      var text = texts.justNow;\n    } else if (total < 90) {\n      var text = texts.xMinutesAgo.format(total);\n    } else if (total < 1440) {\n      // One day\n      var text = texts.xHoursAgo.format(Math.round(total / 60));\n    } else if (total < 20160) {\n      // 14 days\n      var text = texts.xDaysAgo.format(Math.round(total / 1440));\n    } else if (total < 43200) {\n      // 30 days\n      var text = texts.xWeeksAgo.format(Math.round(total / 10080));\n    } else if (total < 1036800) {\n      // 24 months\n      var text = texts.xMonthsAgo.format(Math.round(total / 43200));\n    } else {\n      // 24 months+\n      var text = texts.xYearsAgo.format(Math.round(total / 525600));\n    }\n\n    return text;\n  };\n\n  jSuites.calendar.prettifyAll = function () {\n    var elements = document.querySelectorAll('.prettydate');\n\n    for (var i = 0; i < elements.length; i++) {\n      if (elements[i].getAttribute('data-date')) {\n        elements[i].innerHTML = jSuites.calendar.prettify(elements[i].getAttribute('data-date'));\n      } else {\n        elements[i].setAttribute('data-date', elements[i].innerHTML);\n        elements[i].innerHTML = jSuites.calendar.prettify(elements[i].innerHTML);\n      }\n    }\n  };\n\n  jSuites.calendar.now = function () {\n    var date = new Date();\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var d = date.getDate();\n    var h = date.getHours();\n    var i = date.getMinutes();\n    var s = date.getSeconds(); // Two digits\n\n    var two = function two(value) {\n      value = '' + value;\n\n      if (value.length == 1) {\n        value = '0' + value;\n      }\n\n      return value;\n    };\n\n    return two(y) + '-' + two(m) + '-' + two(d) + ' ' + two(h) + ':' + two(i) + ':' + two(s);\n  }; // Helper to extract date from a string\n\n\n  jSuites.calendar.extractDateFromString = function (date, format) {\n    var v1 = '' + date;\n    var v2 = format.replace(/[0-9]/g, '');\n    var test = 1; // Get year\n\n    var y = v2.search(\"YYYY\");\n    y = v1.substr(y, 4);\n\n    if (parseInt(y) != y) {\n      test = 0;\n    } // Get month\n\n\n    var m = v2.search(\"MM\");\n    m = v1.substr(m, 2);\n\n    if (parseInt(m) != m || d > 12) {\n      test = 0;\n    } // Get day\n\n\n    var d = v2.search(\"DD\");\n    d = v1.substr(d, 2);\n\n    if (parseInt(d) != d || d > 31) {\n      test = 0;\n    } // Get hour\n\n\n    var h = v2.search(\"HH\");\n\n    if (h >= 0) {\n      h = v1.substr(h, 2);\n\n      if (!parseInt(h) || h > 23) {\n        h = '00';\n      }\n    } else {\n      h = '00';\n    } // Get minutes\n\n\n    var i = v2.search(\"MI\");\n\n    if (i >= 0) {\n      i = v1.substr(i, 2);\n\n      if (!parseInt(i) || i > 59) {\n        i = '00';\n      }\n    } else {\n      i = '00';\n    } // Get seconds\n\n\n    var s = v2.search(\"SS\");\n\n    if (s >= 0) {\n      s = v1.substr(s, 2);\n\n      if (!parseInt(s) || s > 59) {\n        s = '00';\n      }\n    } else {\n      s = '00';\n    }\n\n    if (test == 1 && date.length == v2.length) {\n      // Update source\n      var data = y + '-' + m + '-' + d + ' ' + h + ':' + i + ':' + s;\n      return data;\n    }\n\n    return '';\n  }; // Helper to convert date into string\n\n\n  jSuites.calendar.getDateString = function (value, format) {\n    // Default calendar\n    if (!format) {\n      var format = 'DD/MM/YYYY';\n    }\n\n    if (value) {\n      var d = '' + value;\n      d = d.split(' ');\n      var h = '';\n      var m = '';\n      var s = '';\n\n      if (d[1]) {\n        h = d[1].split(':');\n        m = h[1] ? h[1] : '00';\n        s = h[2] ? h[2] : '00';\n        h = h[0] ? h[0] : '00';\n      } else {\n        h = '00';\n        m = '00';\n        s = '00';\n      }\n\n      d = d[0].split('-');\n\n      if (d[0] && d[1] && d[2] && d[0] > 0 && d[1] > 0 && d[1] < 13 && d[2] > 0 && d[2] < 32) {\n        var calendar = new Date(d[0], d[1] - 1, d[2]);\n        var weekday = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');\n        var months = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\n        d[1] = (d[1].length < 2 ? '0' : '') + d[1];\n        d[2] = (d[2].length < 2 ? '0' : '') + d[2];\n        h = (h.length < 2 ? '0' : '') + h;\n        m = (m.length < 2 ? '0' : '') + m;\n        s = (s.length < 2 ? '0' : '') + s;\n        value = format;\n        value = value.replace('WD', weekday[calendar.getDay()]);\n        value = value.replace('DD', d[2]);\n        value = value.replace('MM', d[1]);\n        value = value.replace('YYYY', d[0]);\n        value = value.replace('YY', d[0].substring(2, 4));\n        value = value.replace('MON', months[parseInt(d[1]) - 1].toUpperCase());\n\n        if (h) {\n          value = value.replace('HH24', h);\n        }\n\n        if (h > 12) {\n          value = value.replace('HH12', h - 12);\n          value = value.replace('HH', h);\n        } else {\n          value = value.replace('HH12', h);\n          value = value.replace('HH', h);\n        }\n\n        value = value.replace('MI', m);\n        value = value.replace('MM', m);\n        value = value.replace('SS', s);\n      } else {\n        value = '';\n      }\n    }\n\n    return value;\n  };\n\n  jSuites.calendar.isOpen = function (e) {\n    if (jSuites.calendar.current) {\n      if (!e.target.className || e.target.className.indexOf('jcalendar') == -1) {\n        jSuites.calendar.current.close();\n      }\n    }\n  };\n\n  if ('ontouchstart' in document.documentElement === true) {\n    document.addEventListener(\"touchstart\", jSuites.calendar.isOpen);\n  } else {\n    document.addEventListener(\"mousedown\", jSuites.calendar.isOpen);\n  }\n\n  jSuites.color = function (el, options) {\n    var obj = {};\n    obj.options = {};\n    obj.values = []; // Global container\n\n    if (!jSuites.color.current) {\n      jSuites.color.current = null;\n    }\n    /**\n     * @typedef {Object} defaults\n     * @property {(string|Array)} value - Initial value of the compontent\n     * @property {string} placeholder - The default instruction text on the element\n     * @property {requestCallback} onchange - Method to be execute after any changes on the element\n     * @property {requestCallback} onclose - Method to be execute when the element is closed\n     */\n\n\n    var defaults = {\n      placeholder: '',\n      value: null,\n      onclose: null,\n      onchange: null\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    }\n\n    var palette = {\n      \"red\": {\n        \"50\": \"#ffebee\",\n        \"100\": \"#ffcdd2\",\n        \"200\": \"#ef9a9a\",\n        \"300\": \"#e57373\",\n        \"400\": \"#ef5350\",\n        \"500\": \"#f44336\",\n        \"600\": \"#e53935\",\n        \"700\": \"#d32f2f\",\n        \"800\": \"#c62828\",\n        \"900\": \"#b71c1c\"\n      },\n      \"pink\": {\n        \"50\": \"#fce4ec\",\n        \"100\": \"#f8bbd0\",\n        \"200\": \"#f48fb1\",\n        \"300\": \"#f06292\",\n        \"400\": \"#ec407a\",\n        \"500\": \"#e91e63\",\n        \"600\": \"#d81b60\",\n        \"700\": \"#c2185b\",\n        \"800\": \"#ad1457\",\n        \"900\": \"#880e4f\"\n      },\n      \"purple\": {\n        \"50\": \"#f3e5f5\",\n        \"100\": \"#e1bee7\",\n        \"200\": \"#ce93d8\",\n        \"300\": \"#ba68c8\",\n        \"400\": \"#ab47bc\",\n        \"500\": \"#9c27b0\",\n        \"600\": \"#8e24aa\",\n        \"700\": \"#7b1fa2\",\n        \"800\": \"#6a1b9a\",\n        \"900\": \"#4a148c\"\n      },\n      \"indigo\": {\n        \"50\": \"#e8eaf6\",\n        \"100\": \"#c5cae9\",\n        \"200\": \"#9fa8da\",\n        \"300\": \"#7986cb\",\n        \"400\": \"#5c6bc0\",\n        \"500\": \"#3f51b5\",\n        \"600\": \"#3949ab\",\n        \"700\": \"#303f9f\",\n        \"800\": \"#283593\",\n        \"900\": \"#1a237e\"\n      },\n      \"blue\": {\n        \"50\": \"#e3f2fd\",\n        \"100\": \"#bbdefb\",\n        \"200\": \"#90caf9\",\n        \"300\": \"#64b5f6\",\n        \"400\": \"#42a5f5\",\n        \"500\": \"#2196f3\",\n        \"600\": \"#1e88e5\",\n        \"700\": \"#1976d2\",\n        \"800\": \"#1565c0\",\n        \"900\": \"#0d47a1\"\n      },\n      \"cyan\": {\n        \"50\": \"#e0f7fa\",\n        \"100\": \"#b2ebf2\",\n        \"200\": \"#80deea\",\n        \"300\": \"#4dd0e1\",\n        \"400\": \"#26c6da\",\n        \"500\": \"#00bcd4\",\n        \"600\": \"#00acc1\",\n        \"700\": \"#0097a7\",\n        \"800\": \"#00838f\",\n        \"900\": \"#006064\"\n      },\n      \"teal\": {\n        \"50\": \"#e0f2f1\",\n        \"100\": \"#b2dfdb\",\n        \"200\": \"#80cbc4\",\n        \"300\": \"#4db6ac\",\n        \"400\": \"#26a69a\",\n        \"500\": \"#009688\",\n        \"600\": \"#00897b\",\n        \"700\": \"#00796b\",\n        \"800\": \"#00695c\",\n        \"900\": \"#004d40\"\n      },\n      \"green\": {\n        \"50\": \"#e8f5e9\",\n        \"100\": \"#c8e6c9\",\n        \"200\": \"#a5d6a7\",\n        \"300\": \"#81c784\",\n        \"400\": \"#66bb6a\",\n        \"500\": \"#4caf50\",\n        \"600\": \"#43a047\",\n        \"700\": \"#388e3c\",\n        \"800\": \"#2e7d32\",\n        \"900\": \"#1b5e20\"\n      },\n      \"lightgreen\": {\n        \"50\": \"#f1f8e9\",\n        \"100\": \"#dcedc8\",\n        \"200\": \"#c5e1a5\",\n        \"300\": \"#aed581\",\n        \"400\": \"#9ccc65\",\n        \"500\": \"#8bc34a\",\n        \"600\": \"#7cb342\",\n        \"700\": \"#689f38\",\n        \"800\": \"#558b2f\",\n        \"900\": \"#33691e\"\n      },\n      \"lime\": {\n        \"50\": \"#f9fbe7\",\n        \"100\": \"#f0f4c3\",\n        \"200\": \"#e6ee9c\",\n        \"300\": \"#dce775\",\n        \"400\": \"#d4e157\",\n        \"500\": \"#cddc39\",\n        \"600\": \"#c0ca33\",\n        \"700\": \"#afb42b\",\n        \"800\": \"#9e9d24\",\n        \"900\": \"#827717\"\n      },\n      \"yellow\": {\n        \"50\": \"#fffde7\",\n        \"100\": \"#fff9c4\",\n        \"200\": \"#fff59d\",\n        \"300\": \"#fff176\",\n        \"400\": \"#ffee58\",\n        \"500\": \"#ffeb3b\",\n        \"600\": \"#fdd835\",\n        \"700\": \"#fbc02d\",\n        \"800\": \"#f9a825\",\n        \"900\": \"#f57f17\"\n      },\n      \"amber\": {\n        \"50\": \"#fff8e1\",\n        \"100\": \"#ffecb3\",\n        \"200\": \"#ffe082\",\n        \"300\": \"#ffd54f\",\n        \"400\": \"#ffca28\",\n        \"500\": \"#ffc107\",\n        \"600\": \"#ffb300\",\n        \"700\": \"#ffa000\",\n        \"800\": \"#ff8f00\",\n        \"900\": \"#ff6f00\"\n      },\n      \"orange\": {\n        \"50\": \"#fff3e0\",\n        \"100\": \"#ffe0b2\",\n        \"200\": \"#ffcc80\",\n        \"300\": \"#ffb74d\",\n        \"400\": \"#ffa726\",\n        \"500\": \"#ff9800\",\n        \"600\": \"#fb8c00\",\n        \"700\": \"#f57c00\",\n        \"800\": \"#ef6c00\",\n        \"900\": \"#e65100\"\n      },\n      \"deeporange\": {\n        \"50\": \"#fbe9e7\",\n        \"100\": \"#ffccbc\",\n        \"200\": \"#ffab91\",\n        \"300\": \"#ff8a65\",\n        \"400\": \"#ff7043\",\n        \"500\": \"#ff5722\",\n        \"600\": \"#f4511e\",\n        \"700\": \"#e64a19\",\n        \"800\": \"#d84315\",\n        \"900\": \"#bf360c\"\n      },\n      \"brown\": {\n        \"50\": \"#efebe9\",\n        \"100\": \"#d7ccc8\",\n        \"200\": \"#bcaaa4\",\n        \"300\": \"#a1887f\",\n        \"400\": \"#8d6e63\",\n        \"500\": \"#795548\",\n        \"600\": \"#6d4c41\",\n        \"700\": \"#5d4037\",\n        \"800\": \"#4e342e\",\n        \"900\": \"#3e2723\"\n      },\n      \"grey\": {\n        \"50\": \"#fafafa\",\n        \"100\": \"#f5f5f5\",\n        \"200\": \"#eeeeee\",\n        \"300\": \"#e0e0e0\",\n        \"400\": \"#bdbdbd\",\n        \"500\": \"#9e9e9e\",\n        \"600\": \"#757575\",\n        \"700\": \"#616161\",\n        \"800\": \"#424242\",\n        \"900\": \"#212121\"\n      },\n      \"bluegrey\": {\n        \"50\": \"#eceff1\",\n        \"100\": \"#cfd8dc\",\n        \"200\": \"#b0bec5\",\n        \"300\": \"#90a4ae\",\n        \"400\": \"#78909c\",\n        \"500\": \"#607d8b\",\n        \"600\": \"#546e7a\",\n        \"700\": \"#455a64\",\n        \"800\": \"#37474f\",\n        \"900\": \"#263238\"\n      }\n    };\n    var x = 0;\n    var y = 0;\n    var colors = [];\n    var col = Object.keys(palette);\n    var shade = Object.keys(palette[col[0]]);\n\n    for (var i = 0; i < col.length; i++) {\n      for (var j = 0; j < shade.length; j++) {\n        if (!colors[j]) {\n          colors[j] = [];\n        }\n\n        colors[j][i] = palette[col[i]][shade[j]];\n      }\n    }\n\n    ; // Value\n\n    if (obj.options.value) {\n      el.value = obj.options.value;\n    } // Table container\n\n\n    var container = document.createElement('div');\n    container.className = 'jcolor'; // Table container\n\n    var backdrop = document.createElement('div');\n    backdrop.className = 'jcolor-backdrop';\n    container.appendChild(backdrop); // Content\n\n    var content = document.createElement('div');\n    content.className = 'jcolor-content'; // Close button\n\n    var closeButton = document.createElement('div');\n    closeButton.className = 'jcolor-close';\n    closeButton.innerHTML = 'Done';\n\n    closeButton.onclick = function () {\n      obj.close();\n    };\n\n    content.appendChild(closeButton); // Table pallete\n\n    var table = document.createElement('table');\n    table.setAttribute('cellpadding', '7');\n    table.setAttribute('cellspacing', '0');\n\n    for (var i = 0; i < colors.length; i++) {\n      var tr = document.createElement('tr');\n\n      for (var j = 0; j < colors[i].length; j++) {\n        var td = document.createElement('td');\n        td.style.backgroundColor = colors[i][j];\n        td.setAttribute('data-value', colors[i][j]);\n        td.innerHTML = '';\n        tr.appendChild(td); // Selected color\n\n        if (obj.options.value == colors[i][j]) {\n          td.classList.add('jcolor-selected');\n        } // Possible values\n\n\n        obj.values[colors[i][j]] = td;\n      }\n\n      table.appendChild(tr);\n    }\n    /**\n     * Open color pallete\n     */\n\n\n    obj.open = function () {\n      if (jSuites.color.current) {\n        if (jSuites.color.current != obj) {\n          jSuites.color.current.close();\n        }\n      }\n\n      if (!jSuites.color.current) {\n        // Persist element\n        jSuites.color.current = obj; // Show colorpicker\n\n        container.classList.add('jcolor-focus');\n        var rectContent = content.getBoundingClientRect();\n\n        if (jSuites.getWindowWidth() < 800) {\n          content.style.top = '';\n          content.classList.add('jcolor-fullscreen');\n          jSuites.slideBottom(content, 1);\n          backdrop.style.display = 'block';\n        } else {\n          if (content.classList.contains('jcolor-fullscreen')) {\n            content.classList.remove('jcolor-fullscreen');\n            backdrop.style.display = '';\n          }\n\n          var rect = el.getBoundingClientRect();\n\n          if (window.innerHeight < rect.bottom + rectContent.height) {\n            content.style.top = -1 * (rectContent.height + 2) + 'px';\n          } else {\n            content.style.top = rect.height + 'px';\n          }\n        }\n\n        container.focus();\n      }\n    };\n    /**\n     * Close color pallete\n     */\n\n\n    obj.close = function (ignoreEvents) {\n      if (jSuites.color.current) {\n        jSuites.color.current = null;\n\n        if (!ignoreEvents && typeof obj.options.onclose == 'function') {\n          obj.options.onclose(el);\n        }\n\n        container.classList.remove('jcolor-focus');\n      } // Make sure backdrop is hidden\n\n\n      backdrop.style.display = '';\n      return obj.options.value;\n    };\n    /**\n     * Set value\n     */\n\n\n    obj.setValue = function (color) {\n      if (color) {\n        el.value = color;\n        obj.options.value = color;\n      } // Remove current selecded mark\n\n\n      var selected = container.querySelector('.jcolor-selected');\n\n      if (selected) {\n        selected.classList.remove('jcolor-selected');\n      } // Mark cell as selected\n\n\n      obj.values[color].classList.add('jcolor-selected'); // Onchange\n\n      if (typeof obj.options.onchange == 'function') {\n        obj.options.onchange(el, color);\n      }\n    };\n    /**\n     * Get value\n     */\n\n\n    obj.getValue = function () {\n      return obj.options.value;\n    };\n    /**\n     * If element is focus open the picker\n     */\n\n\n    el.addEventListener(\"focus\", function (e) {\n      obj.open();\n    });\n    el.addEventListener(\"mousedown\", function (e) {\n      obj.open();\n    }); // Select color\n\n    container.addEventListener(\"mouseup\", function (e) {\n      if (e.target.tagName == 'TD') {\n        jSuites.color.current.setValue(e.target.getAttribute('data-value'));\n        jSuites.color.current.close();\n      }\n    }); // Close controller\n\n    document.addEventListener(\"mousedown\", function (e) {\n      if (jSuites.color.current) {\n        var element = jSuites.getElement(e.target, 'jcolor');\n\n        if (!element) {\n          jSuites.color.current.close();\n        }\n      }\n    }); // Possible to focus the container\n\n    container.setAttribute('tabindex', '900'); // Placeholder\n\n    if (obj.options.placeholder) {\n      el.setAttribute('placeholder', obj.options.placeholder);\n    } // Append to the table\n\n\n    content.appendChild(table);\n    container.appendChild(content); // Insert picker after the element\n\n    el.parentNode.insertBefore(container, el); // Keep object available from the node\n\n    el.color = obj;\n    return obj;\n  };\n\n  jSuites.contextmenu = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      items: null,\n      onclick: null\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Class definition\n\n\n    el.classList.add('jcontextmenu'); // Focusable\n\n    el.setAttribute('tabindex', '900');\n    /**\n     * Open contextmenu\n     */\n\n    obj.open = function (e, items) {\n      if (items) {\n        // Update content\n        obj.options.items = items; // Create items\n\n        obj.create(items);\n      } // Coordinates\n\n\n      if (e.target) {\n        var x = e.clientX;\n        var y = e.clientY;\n      } else {\n        var x = e.x;\n        var y = e.y;\n      }\n\n      el.classList.add('jcontextmenu-focus');\n      el.focus();\n      var rect = el.getBoundingClientRect();\n\n      if (window.innerHeight < y + rect.height) {\n        el.style.top = y - rect.height + 'px';\n      } else {\n        el.style.top = y + 'px';\n      }\n\n      if (window.innerWidth < x + rect.width) {\n        if (x - rect.width > 0) {\n          el.style.left = x - rect.width + 'px';\n        } else {\n          el.style.left = '10px';\n        }\n      } else {\n        el.style.left = x + 'px';\n      }\n    };\n    /**\n     * Close menu\n     */\n\n\n    obj.close = function () {\n      if (el.classList.contains('jcontextmenu-focus')) {\n        el.classList.remove('jcontextmenu-focus');\n      }\n    };\n    /**\n     * Create items based on the declared objectd\n     * @param {object} items - List of object\n     */\n\n\n    obj.create = function (items) {\n      // Update content\n      el.innerHTML = ''; // Append items\n\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].type && items[i].type == 'line') {\n          var itemContainer = document.createElement('hr');\n        } else {\n          var itemContainer = document.createElement('div');\n          var itemText = document.createElement('a');\n          itemText.innerHTML = items[i].title;\n\n          if (items[i].disabled) {\n            itemContainer.className = 'jcontextmenu-disabled';\n          } else if (items[i].onclick) {\n            itemContainer.method = items[i].onclick;\n            itemContainer.addEventListener(\"mouseup\", function () {\n              // Execute method\n              this.method(this);\n            });\n          }\n\n          itemContainer.appendChild(itemText);\n\n          if (items[i].shortcut) {\n            var itemShortCut = document.createElement('span');\n            itemShortCut.innerHTML = items[i].shortcut;\n            itemContainer.appendChild(itemShortCut);\n          }\n        }\n\n        el.appendChild(itemContainer);\n      }\n    };\n\n    if (typeof obj.options.onclick == 'function') {\n      el.addEventListener('click', function (e) {\n        obj.options.onclick(obj);\n      });\n    }\n\n    el.addEventListener('blur', function (e) {\n      setTimeout(function () {\n        obj.close();\n      }, 120);\n    });\n    window.addEventListener(\"mousewheel\", function () {\n      obj.close();\n    }); // Create items\n\n    if (obj.options.items) {\n      obj.create(obj.options.items);\n    }\n\n    el.contextmenu = obj;\n    return obj;\n  };\n\n  jSuites.contextmenu.getElement = function (element) {\n    var foundId = 0;\n\n    function path(element) {\n      if (element.parentNode && element.getAttribute('aria-contextmenu-id')) {\n        foundId = element.getAttribute('aria-contextmenu-id');\n      } else {\n        if (element.parentNode) {\n          path(element.parentNode);\n        }\n      }\n    }\n\n    path(element);\n    return foundId;\n  };\n\n  document.addEventListener(\"contextmenu\", function (e) {\n    var id = jSuites.contextmenu.getElement(e.target);\n\n    if (id) {\n      var element = document.querySelector('#' + id);\n\n      if (!element) {\n        console.error('JSUITES: Contextmenu id not found');\n      } else {\n        element.contextmenu.open(e);\n        e.preventDefault();\n      }\n    }\n  });\n  /**\n   * Dialog v1.0.1\n   * Author: paul.hodel@gmail.com\n   * https://github.com/paulhodel/jtools\n   */\n\n  jSuites.dialog = function () {\n    var obj = {};\n    obj.options = {};\n    var dialog = document.createElement('div');\n    dialog.setAttribute('tabindex', '901');\n    dialog.className = 'jdialog';\n    dialog.id = 'dialog';\n    var dialogHeader = document.createElement('div');\n    dialogHeader.className = 'jdialog-header';\n    var dialogTitle = document.createElement('div');\n    dialogTitle.className = 'jdialog-title';\n    dialogHeader.appendChild(dialogTitle);\n    var dialogMessage = document.createElement('div');\n    dialogMessage.className = 'jdialog-message';\n    dialogHeader.appendChild(dialogMessage);\n    var dialogFooter = document.createElement('div');\n    dialogFooter.className = 'jdialog-footer';\n    var dialogContainer = document.createElement('div');\n    dialogContainer.className = 'jdialog-container';\n    dialogContainer.appendChild(dialogHeader);\n    dialogContainer.appendChild(dialogFooter); // Confirm\n\n    var dialogConfirm = document.createElement('div');\n    var dialogConfirmButton = document.createElement('input');\n    dialogConfirmButton.value = obj.options.confirmLabel;\n    dialogConfirmButton.type = 'button';\n\n    dialogConfirmButton.onclick = function () {\n      if (typeof obj.options.onconfirm == 'function') {\n        obj.options.onconfirm();\n      }\n\n      obj.close();\n    };\n\n    dialogConfirm.appendChild(dialogConfirmButton);\n    dialogFooter.appendChild(dialogConfirm); // Cancel\n\n    var dialogCancel = document.createElement('div');\n    var dialogCancelButton = document.createElement('input');\n    dialogCancelButton.value = obj.options.cancelLabel;\n    dialogCancelButton.type = 'button';\n\n    dialogCancelButton.onclick = function () {\n      if (typeof obj.options.oncancel == 'function') {\n        obj.options.oncancel();\n      }\n\n      obj.close();\n    };\n\n    dialogCancel.appendChild(dialogCancelButton);\n    dialogFooter.appendChild(dialogCancel); // Dialog\n\n    dialog.appendChild(dialogContainer);\n\n    obj.open = function (options) {\n      obj.options = options;\n\n      if (obj.options.title) {\n        dialogTitle.innerHTML = obj.options.title;\n      }\n\n      if (obj.options.message) {\n        dialogMessage.innerHTML = obj.options.message;\n      }\n\n      if (!obj.options.confirmLabel) {\n        obj.options.confirmLabel = 'OK';\n      }\n\n      dialogConfirmButton.value = obj.options.confirmLabel;\n\n      if (!obj.options.cancelLabel) {\n        obj.options.cancelLabel = 'Cancel';\n      }\n\n      dialogCancelButton.value = obj.options.cancelLabel;\n\n      if (obj.options.type == 'confirm') {\n        dialogCancelButton.parentNode.style.display = '';\n      } else {\n        dialogCancelButton.parentNode.style.display = 'none';\n      } // Append element to the app\n\n\n      dialog.style.opacity = 100; // Append to the page\n\n      if (jSuites.el) {\n        jSuites.el.appendChild(dialog);\n      } else {\n        document.body.appendChild(dialog);\n      } // Focus\n\n\n      dialog.focus(); // Show\n\n      setTimeout(function () {\n        dialogContainer.style.opacity = 100;\n      }, 0);\n    };\n\n    obj.close = function () {\n      dialog.style.opacity = 0;\n      dialogContainer.style.opacity = 0;\n      setTimeout(function () {\n        dialog.remove();\n      }, 100);\n    };\n\n    return obj;\n  }();\n\n  jSuites.confirm = function (message, onconfirm) {\n    if (jSuites.getWindowWidth() < 800) {\n      jSuites.dialog.open({\n        type: 'confirm',\n        message: message,\n        title: 'Confirmation',\n        onconfirm: onconfirm\n      });\n    } else {\n      if (confirm(message)) {\n        onconfirm();\n      }\n    }\n  };\n\n  jSuites.alert = function (message) {\n    if (jSuites.getWindowWidth() < 800) {\n      jSuites.dialog.open({\n        title: 'Alert',\n        message: message\n      });\n    } else {\n      alert(message);\n    }\n  };\n\n  jSuites.dropdown = function (el, options) {\n    var obj = {};\n    obj.options = {}; // If the element is a SELECT tag, create a configuration object\n\n    if (el.tagName == 'SELECT') {\n      var ret = jSuites.dropdown.extractFromDom(el, options);\n      el = ret.el;\n      options = ret.options;\n    } // Default configuration\n\n\n    var defaults = {\n      url: null,\n      data: [],\n      multiple: false,\n      autocomplete: false,\n      type: null,\n      width: null,\n      opened: false,\n      value: null,\n      placeholder: '',\n      position: false,\n      onchange: null,\n      onload: null,\n      onopen: null,\n      onclose: null,\n      onblur: null\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Global container\n\n\n    if (!jSuites.dropdown.current) {\n      jSuites.dropdown.current = null;\n    } // Containers\n\n\n    obj.items = [];\n    obj.groups = [];\n    obj.selected = []; // Create dropdown\n\n    el.classList.add('jdropdown');\n\n    if (obj.options.type == 'searchbar') {\n      el.classList.add('jdropdown-searchbar');\n    } else if (obj.options.type == 'list') {\n      el.classList.add('jdropdown-list');\n    } else if (obj.options.type == 'picker') {\n      el.classList.add('jdropdown-picker');\n    } else {\n      if (jSuites.getWindowWidth() < 800) {\n        el.classList.add('jdropdown-picker');\n        obj.options.type = 'picker';\n      } else {\n        if (obj.options.width) {\n          el.style.width = obj.options.width;\n          el.style.minWidth = obj.options.width;\n        }\n\n        el.classList.add('jdropdown-default');\n        obj.options.type = 'default';\n      }\n    } // Header container\n\n\n    var containerHeader = document.createElement('div');\n    containerHeader.className = 'jdropdown-container-header'; // Header\n\n    var header = document.createElement('input');\n    header.className = 'jdropdown-header';\n\n    if (typeof obj.options.onblur == 'function') {\n      header.onblur = function () {\n        obj.options.onblur(el);\n      };\n    } // Container\n\n\n    var container = document.createElement('div');\n    container.className = 'jdropdown-container'; // Dropdown content\n\n    var content = document.createElement('div');\n    content.className = 'jdropdown-content'; // Close button\n\n    var closeButton = document.createElement('div');\n    closeButton.className = 'jdropdown-close';\n    closeButton.innerHTML = 'Done'; // Create backdrop\n\n    var backdrop = document.createElement('div');\n    backdrop.className = 'jdropdown-backdrop'; // Autocomplete\n\n    if (obj.options.autocomplete == true) {\n      el.setAttribute('data-autocomplete', true); // Handler\n\n      var keyTimer = null;\n      header.addEventListener('keyup', function (e) {\n        if (keyTimer) {\n          clearTimeout(keyTimer);\n        }\n\n        keyTimer = setTimeout(function () {\n          obj.find(header.value);\n          keyTimer = null;\n        }, 500);\n\n        if (!el.classList.contains('jdropdown-focus')) {\n          if (e.which > 65) {\n            obj.open();\n          }\n        }\n      });\n    } else {\n      header.setAttribute('readonly', 'readonly');\n    } // Place holder\n\n\n    if (!obj.options.placeholder && el.getAttribute('placeholder')) {\n      obj.options.placeholder = el.getAttribute('placeholder');\n    }\n\n    if (obj.options.placeholder) {\n      header.setAttribute('placeholder', obj.options.placeholder);\n    } // Append elements\n\n\n    containerHeader.appendChild(header);\n\n    if (obj.options.type == 'searchbar') {\n      containerHeader.appendChild(closeButton);\n    } else {\n      container.appendChild(closeButton);\n    }\n\n    container.appendChild(content);\n    el.appendChild(containerHeader);\n    el.appendChild(container);\n    el.appendChild(backdrop);\n    /**\n     * Init dropdown\n     */\n\n    obj.init = function () {\n      if (obj.options.url) {\n        jSuites.ajax({\n          url: obj.options.url,\n          method: 'GET',\n          dataType: 'json',\n          success: function success(data) {\n            if (data) {\n              // Set data\n              obj.setData(data); // Set value\n\n              if (obj.options.value != null) {\n                obj.setValue(obj.options.value);\n              } // Onload method\n\n\n              if (typeof obj.options.onload == 'function') {\n                obj.options.onload(el, obj, data);\n              }\n            }\n          }\n        });\n      } else {\n        // Set data\n        obj.setData(); // Set value\n\n        if (obj.options.value != null) {\n          obj.setValue(obj.options.value);\n        } // Onload\n\n\n        if (typeof obj.options.onload == 'function') {\n          obj.options.onload(el, obj, data);\n        }\n      } // Open dropdown\n\n\n      if (obj.options.opened == true) {\n        obj.open();\n      }\n    };\n\n    obj.getUrl = function () {\n      return obj.options.url;\n    };\n\n    obj.setUrl = function (url) {\n      obj.options.url = url;\n      jSuites.ajax({\n        url: obj.options.url,\n        method: 'GET',\n        dataType: 'json',\n        success: function success(data) {\n          obj.setData(data);\n        }\n      });\n    };\n    /**\n     * Create a new item\n     */\n\n\n    obj.createItem = function (data) {\n      // Create item\n      var item = {};\n      item.element = document.createElement('div');\n      item.element.className = 'jdropdown-item';\n      item.value = data.id;\n      item.text = data.name;\n      item.textLowerCase = data.name.toLowerCase(); // Image\n\n      if (data.image) {\n        var image = document.createElement('img');\n        image.className = 'jdropdown-image';\n        image.src = data.image;\n\n        if (!data.title) {\n          image.classList.add('jdropdown-image-small');\n        }\n\n        item.element.appendChild(image);\n      } // Set content\n\n\n      var node = document.createElement('div');\n      node.className = 'jdropdown-description';\n      node.innerHTML = data.name; // Title\n\n      if (data.title) {\n        var title = document.createElement('div');\n        title.className = 'jdropdown-title';\n        title.innerHTML = data.title;\n        node.appendChild(title);\n      } // Add node to item\n\n\n      item.element.appendChild(node);\n      return item;\n    };\n\n    obj.setData = function (data) {\n      // Update data\n      if (data) {\n        obj.options.data = data;\n      } // Data\n\n\n      var data = obj.options.data; // Make sure the content container is blank\n\n      content.innerHTML = ''; // Reset\n\n      obj.reset(); // Reset items\n\n      obj.items = []; // Helpers\n\n      var items = [];\n      var groups = []; // Create elements\n\n      if (data.length) {\n        // Prepare data\n        for (var i = 0; i < data.length; i++) {\n          // Compatibility\n          if (typeof data[i] != 'object') {\n            // Correct format\n            obj.options.data[i] = data[i] = {\n              id: data[i],\n              name: data[i]\n            };\n          } // Process groups\n\n\n          if (data[i].group) {\n            if (!groups[data[i].group]) {\n              groups[data[i].group] = [];\n            }\n\n            groups[data[i].group].push(i);\n          } else {\n            items.push(i);\n          }\n        } // Groups\n\n\n        var groupNames = Object.keys(groups); // Append groups in case exists\n\n        if (groupNames.length > 0) {\n          for (var i = 0; i < groupNames.length; i++) {\n            // Group container\n            var group = document.createElement('div');\n            group.className = 'jdropdown-group'; // Group name\n\n            var groupName = document.createElement('div');\n            groupName.className = 'jdropdown-group-name';\n            groupName.innerHTML = groupNames[i]; // Group arrow\n\n            var groupArrow = document.createElement('i');\n            groupArrow.className = 'jdropdown-group-arrow jdropdown-group-arrow-down';\n            groupName.appendChild(groupArrow); // Group items\n\n            var groupContent = document.createElement('div');\n            groupContent.className = 'jdropdown-group-items';\n\n            for (var j = 0; j < groups[groupNames[i]].length; j++) {\n              var item = obj.createItem(data[groups[groupNames[i]][j]]);\n              groupContent.appendChild(item.element); // Items\n\n              obj.items.push(item);\n            } // Group itens\n\n\n            group.appendChild(groupName);\n            group.appendChild(groupArrow);\n            group.appendChild(groupContent);\n            content.appendChild(group);\n          }\n        }\n\n        if (items.length) {\n          for (var i = 0; i < items.length; i++) {\n            var item = obj.createItem(data[items[i]]);\n            obj.items.push(item);\n            content.appendChild(item.element);\n          }\n        } // Create the Indexes\n\n\n        for (var i = 0; i < obj.items.length; i++) {\n          obj.items[i].element.setAttribute('data-index', i);\n        }\n      }\n    };\n\n    obj.getText = function (asArray) {\n      // Result\n      var result = []; // Append options\n\n      for (var i = 0; i < obj.selected.length; i++) {\n        if (obj.items[obj.selected[i]]) {\n          result.push(obj.items[obj.selected[i]].text);\n        }\n      }\n\n      if (asArray) {\n        return result;\n      } else {\n        return result.join('; ');\n      }\n    };\n\n    obj.getValue = function (asArray) {\n      // Result\n      var result = []; // Append options\n\n      for (var i = 0; i < obj.selected.length; i++) {\n        if (obj.items[obj.selected[i]]) {\n          result.push(obj.items[obj.selected[i]].value);\n        }\n      }\n\n      if (asArray) {\n        return result;\n      } else {\n        return result.join(';');\n      }\n    };\n\n    obj.setValue = function (value) {\n      // Remove values\n      for (var i = 0; i < obj.selected.length; i++) {\n        obj.items[obj.selected[i]].element.classList.remove('jdropdown-selected');\n      } // Reset selected\n\n\n      obj.selected = []; // Set values\n\n      if (value != null) {\n        if (Array.isArray(value)) {\n          for (var i = 0; i < obj.items.length; i++) {\n            for (var j = 0; j < value.length; j++) {\n              if (obj.items[i].value == value[j]) {\n                // Keep index of the selected item\n                obj.selected.push(i); // Visual selection\n\n                obj.items[i].element.classList.add('jdropdown-selected');\n              }\n            }\n          }\n        } else {\n          for (var i = 0; i < obj.items.length; i++) {\n            if (obj.items[i].value == value) {\n              // Keep index of the selected item\n              obj.selected.push(i); // Visual selection\n\n              obj.items[i].element.classList.add('jdropdown-selected');\n            }\n          }\n        }\n      } // Update labels\n\n\n      obj.updateLabel();\n    };\n\n    obj.selectIndex = function (index) {\n      // Only select those existing elements\n      if (obj.items && obj.items[index]) {\n        var index = index = parseInt(index); // Current selection\n\n        var oldValue = obj.getValue();\n        var oldLabel = obj.getText(); // Remove cursor style\n\n        if (obj.currentIndex != null) {\n          obj.items[obj.currentIndex].element.classList.remove('jdropdown-cursor');\n        } // Set cursor style\n\n\n        obj.items[index].element.classList.add('jdropdown-cursor'); // Update cursor position\n\n        obj.currentIndex = index; // Focus behaviour\n\n        if (!obj.options.multiple) {\n          // Unselect option\n          if (obj.items[index].element.classList.contains('jdropdown-selected')) {\n            // Reset selected\n            obj.resetSelected();\n          } else {\n            // Reset selected\n            obj.resetSelected(); // Update selected item\n\n            obj.items[index].element.classList.add('jdropdown-selected'); // Add to the selected list\n\n            obj.selected.push(index); // Close\n\n            obj.close();\n          }\n        } else {\n          // Toggle option\n          if (obj.items[index].element.classList.contains('jdropdown-selected')) {\n            obj.items[index].element.classList.remove('jdropdown-selected'); // Remove from selected list\n\n            var indexToRemove = obj.selected.indexOf(index); // Remove select\n\n            obj.selected.splice(indexToRemove, 1);\n          } else {\n            // Select element\n            obj.items[index].element.classList.add('jdropdown-selected'); // Add to the selected list\n\n            obj.selected.push(index);\n          } // Update labels for multiple dropdown\n\n\n          if (!obj.options.autocomplete) {\n            obj.updateLabel();\n          }\n        } // Current selection\n\n\n        var newValue = obj.getValue();\n        var newLabel = obj.getText(); // Events\n\n        if (typeof obj.options.onchange == 'function') {\n          obj.options.onchange(el, index, oldValue, newValue, oldLabel, newLabel);\n        }\n      }\n    };\n\n    obj.selectItem = function (item) {\n      if (jSuites.dropdown.current) {\n        var index = item.getAttribute('data-index');\n\n        if (index != null) {\n          obj.selectIndex(index);\n        }\n      }\n    };\n\n    obj.find = function (str) {\n      // Force lowercase\n      var str = str ? str.toLowerCase() : null; // Append options\n\n      for (var i = 0; i < obj.items.length; i++) {\n        if (str == null || obj.items[i].textLowerCase.indexOf(str) != -1) {\n          obj.items[i].element.style.display = '';\n        } else {\n          if (obj.selected.indexOf(i) == -1) {\n            obj.items[i].element.style.display = 'none';\n          } else {\n            obj.items[i].element.style.display = '';\n          }\n        }\n      }\n\n      var numVisibleItems = function numVisibleItems(items) {\n        var visible = 0;\n\n        for (var j = 0; j < items.length; j++) {\n          if (items[j].style.display != 'none') {\n            visible++;\n          }\n        }\n\n        return visible;\n      }; // Hide groups\n\n      /*for (var i = 0; i < obj.groups.length; i++) {\n          if (numVisibleItems(obj.groups[i].querySelectorAll('.jdropdown-item'))) {\n              obj.groups[i].children[0].style.display = '';\n          } else {\n              obj.groups[i].children[0].style.display = 'none';\n          }\n      }*/\n\n    };\n\n    obj.updateLabel = function () {\n      // Update label\n      header.value = obj.getText();\n    };\n\n    obj.open = function () {\n      if (jSuites.dropdown.current != el) {\n        if (jSuites.dropdown.current) {\n          jSuites.dropdown.current.dropdown.close();\n        }\n\n        jSuites.dropdown.current = el;\n      } // Focus\n\n\n      if (!el.classList.contains('jdropdown-focus')) {\n        // Add focus\n        el.classList.add('jdropdown-focus'); // Animation\n\n        if (jSuites.getWindowWidth() < 800) {\n          if (obj.options.type == null || obj.options.type == 'picker') {\n            jSuites.slideBottom(container, 1);\n          }\n        } // Filter\n\n\n        if (obj.options.autocomplete == true) {\n          // Redo search\n          obj.find(); // Clear search field\n\n          header.value = '';\n          header.focus();\n        } // Set cursor for the first or first selected element\n\n\n        var cursor = obj.selected && obj.selected[0] ? obj.selected[0] : 0;\n        obj.updateCursor(cursor); // Container Size\n\n        if (!obj.options.type || obj.options.type == 'default') {\n          var rect = el.getBoundingClientRect();\n          var rectContainer = container.getBoundingClientRect();\n\n          if (obj.options.position) {\n            container.style.position = 'fixed';\n\n            if (window.innerHeight < rect.bottom + rectContainer.height) {\n              container.style.top = rect.top - rectContainer.height - 2 + 'px';\n            } else {\n              container.style.top = rect.top + rect.height + 1 + 'px';\n            }\n\n            container.style.left = rect.left + 'px';\n          } else {\n            if (window.innerHeight < rect.bottom + rectContainer.height) {\n              container.style.bottom = rect.height + 'px';\n            } else {\n              container.style.top = '';\n              container.style.bottom = '';\n            }\n          }\n\n          container.style.minWidth = rect.width + 'px';\n        }\n      } // Events\n\n\n      if (typeof obj.options.onopen == 'function') {\n        obj.options.onopen(el);\n      }\n    };\n\n    obj.close = function (ignoreEvents) {\n      if (jSuites.dropdown.current) {\n        // Remove controller\n        jSuites.dropdown.current = null; // Remove cursor\n\n        obj.resetCursor(); // Update labels\n\n        obj.updateLabel(); // Events\n\n        if (!ignoreEvents && typeof obj.options.onclose == 'function') {\n          obj.options.onclose(el);\n        } // Blur\n\n\n        if (header.blur) {\n          header.blur();\n        } // Remove focus\n\n\n        el.classList.remove('jdropdown-focus');\n      }\n\n      return obj.getValue();\n    };\n    /**\n     * Update position cursor\n     */\n\n\n    obj.updateCursor = function (index) {\n      // Set new cursor\n      if (obj.items && obj.items[index] && obj.items[index].element) {\n        // Reset cursor\n        obj.resetCursor(); // Set new cursor\n\n        obj.items[index].element.classList.add('jdropdown-cursor'); // Update position\n\n        obj.currentIndex = parseInt(index); // Update scroll to the cursor element\n\n        var container = content.scrollTop;\n        var element = obj.items[obj.currentIndex].element;\n        content.scrollTop = element.offsetTop - element.scrollTop + element.clientTop - 95;\n      }\n    };\n    /**\n     * Reset cursor\n     */\n\n\n    obj.resetCursor = function () {\n      // Remove current cursor\n      if (obj.currentIndex != null) {\n        // Remove visual cursor\n        if (obj.items && obj.items[obj.currentIndex]) {\n          obj.items[obj.currentIndex].element.classList.remove('jdropdown-cursor');\n        } // Reset cursor\n\n\n        obj.currentIndex = null;\n      }\n    };\n    /**\n     * Reset cursor\n     */\n\n\n    obj.resetSelected = function () {\n      // Unselected all\n      if (obj.selected) {\n        // Remove visual selection\n        for (var i = 0; i < obj.selected.length; i++) {\n          if (obj.items[obj.selected[i]]) {\n            obj.items[obj.selected[i]].element.classList.remove('jdropdown-selected');\n          }\n        } // Reset current selected items\n\n\n        obj.selected = [];\n      }\n    };\n    /**\n     * Reset cursor and selected items\n     */\n\n\n    obj.reset = function () {\n      // Reset cursor\n      obj.resetCursor(); // Reset selected\n\n      obj.resetSelected(); // Update labels\n\n      obj.updateLabel();\n    };\n    /**\n     * First visible item\n     */\n\n\n    obj.firstVisible = function () {\n      var newIndex = null;\n\n      for (var i = 0; i < obj.items.length; i++) {\n        if (obj.items[i].element.style.display != 'none') {\n          newIndex = i;\n          break;\n        }\n      }\n\n      if (newIndex == null) {\n        return false;\n      }\n\n      obj.updateCursor(newIndex);\n    };\n    /**\n     * Navigation\n     */\n\n\n    obj.first = function () {\n      var newIndex = null;\n\n      for (var i = obj.currentIndex - 1; i >= 0; i--) {\n        if (obj.items[i].element.style.display != 'none') {\n          newIndex = i;\n        }\n      }\n\n      if (newIndex == null) {\n        return false;\n      }\n\n      obj.updateCursor(newIndex);\n    };\n\n    obj.last = function () {\n      var newIndex = null;\n\n      for (var i = obj.currentIndex + 1; i < obj.items.length; i++) {\n        if (obj.items[i].element.style.display != 'none') {\n          newIndex = i;\n        }\n      }\n\n      if (newIndex == null) {\n        return false;\n      }\n\n      obj.updateCursor(newIndex);\n    };\n\n    obj.next = function () {\n      var newIndex = null;\n\n      for (var i = obj.currentIndex + 1; i < obj.items.length; i++) {\n        if (obj.items[i].element.style.display != 'none') {\n          newIndex = i;\n          break;\n        }\n      }\n\n      if (newIndex == null) {\n        return false;\n      }\n\n      obj.updateCursor(newIndex);\n    };\n\n    obj.prev = function () {\n      var newIndex = null;\n\n      for (var i = obj.currentIndex - 1; i >= 0; i--) {\n        if (obj.items[i].element.style.display != 'none') {\n          newIndex = i;\n          break;\n        }\n      }\n\n      if (newIndex == null) {\n        return false;\n      }\n\n      obj.updateCursor(newIndex);\n    };\n\n    if (!jSuites.dropdown.hasEvents) {\n      if ('ontouchsend' in document.documentElement === true) {\n        document.addEventListener('touchsend', jSuites.dropdown.mouseup);\n      } else {\n        document.addEventListener('mouseup', jSuites.dropdown.mouseup);\n      }\n\n      document.addEventListener('keydown', jSuites.dropdown.onkeydown);\n      jSuites.dropdown.hasEvents = true;\n    } // Start dropdown\n\n\n    obj.init(); // Keep object available from the node\n\n    el.dropdown = obj;\n    return obj;\n  };\n\n  jSuites.dropdown.hasEvents = false;\n\n  jSuites.dropdown.mouseup = function (e) {\n    var element = jSuites.getElement(e.target, 'jdropdown');\n\n    if (element) {\n      var dropdown = element.dropdown;\n\n      if (e.target.classList.contains('jdropdown-header')) {\n        if (element.classList.contains('jdropdown-focus') && element.classList.contains('jdropdown-default')) {\n          dropdown.close();\n        } else {\n          dropdown.open();\n        }\n      } else if (e.target.classList.contains('jdropdown-group-name')) {\n        var items = e.target.nextSibling.children;\n\n        if (e.target.nextSibling.style.display != 'none') {\n          for (var i = 0; i < items.length; i++) {\n            if (items[i].style.display != 'none') {\n              dropdown.selectItem(items[i]);\n            }\n          }\n        }\n      } else if (e.target.classList.contains('jdropdown-group-arrow')) {\n        if (e.target.classList.contains('jdropdown-group-arrow-down')) {\n          e.target.classList.remove('jdropdown-group-arrow-down');\n          e.target.classList.add('jdropdown-group-arrow-up');\n          e.target.parentNode.nextSibling.style.display = 'none';\n        } else {\n          e.target.classList.remove('jdropdown-group-arrow-up');\n          e.target.classList.add('jdropdown-group-arrow-down');\n          e.target.parentNode.nextSibling.style.display = '';\n        }\n      } else if (e.target.classList.contains('jdropdown-item')) {\n        dropdown.selectItem(e.target);\n      } else if (e.target.classList.contains('jdropdown-image')) {\n        dropdown.selectIndex(e.target.parentNode.getAttribute('data-index'));\n      } else if (e.target.classList.contains('jdropdown-description')) {\n        dropdown.selectIndex(e.target.parentNode.getAttribute('data-index'));\n      } else if (e.target.classList.contains('jdropdown-title')) {\n        dropdown.selectIndex(e.target.parentNode.parentNode.getAttribute('data-index'));\n      } else if (e.target.classList.contains('jdropdown-close') || e.target.classList.contains('jdropdown-backdrop')) {\n        // Close\n        dropdown.close();\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n    } else {\n      if (jSuites.dropdown.current) {\n        jSuites.dropdown.current.dropdown.close();\n      }\n    }\n  }; // Keydown controls\n\n\n  jSuites.dropdown.onkeydown = function (e) {\n    if (jSuites.dropdown.current) {\n      // Element\n      var element = jSuites.dropdown.current.dropdown; // Index\n\n      var index = element.currentIndex;\n\n      if (e.shiftKey) {} else {\n        if (e.which == 13 || e.which == 27 || e.which == 35 || e.which == 36 || e.which == 38 || e.which == 40) {\n          // Move cursor\n          if (e.which == 13) {\n            element.selectIndex(index);\n          } else if (e.which == 38) {\n            if (index == null) {\n              element.firstVisible();\n            } else if (index > 0) {\n              element.prev();\n            }\n          } else if (e.which == 40) {\n            if (index == null) {\n              element.firstVisible();\n            } else if (index + 1 < element.options.data.length) {\n              element.next();\n            }\n          } else if (e.which == 36) {\n            element.first();\n          } else if (e.which == 35) {\n            element.last();\n          } else if (e.which == 27) {\n            element.close();\n          }\n\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n    }\n  };\n\n  jSuites.dropdown.extractFromDom = function (el, options) {\n    // Keep reference\n    var select = el;\n\n    if (!options) {\n      options = {};\n    } // Prepare configuration\n\n\n    if (el.getAttribute('multiple') && (!options || options.multiple == undefined)) {\n      options.multiple = true;\n    }\n\n    if (el.getAttribute('placeholder') && (!options || options.placeholder == undefined)) {\n      options.placeholder = el.getAttribute('placeholder');\n    }\n\n    if (el.getAttribute('data-autocomplete') && (!options || options.autocomplete == undefined)) {\n      options.autocomplete = true;\n    }\n\n    if (!options || options.width == undefined) {\n      options.width = el.offsetWidth;\n    }\n\n    if (el.value && (!options || options.value == undefined)) {\n      options.value = el.value;\n    }\n\n    if (!options || options.data == undefined) {\n      options.data = [];\n\n      for (var j = 0; j < el.children.length; j++) {\n        if (el.children[j].tagName == 'OPTGROUP') {\n          for (var i = 0; i < el.children[j].children.length; i++) {\n            options.data.push({\n              id: el.children[j].children[i].value,\n              name: el.children[j].children[i].innerHTML,\n              group: el.children[j].getAttribute('label')\n            });\n          }\n        } else {\n          options.data.push({\n            id: el.children[j].value,\n            name: el.children[j].innerHTML\n          });\n        }\n      }\n    }\n\n    if (!options || options.onchange == undefined) {\n      options.onchange = function (a, b, c, d) {\n        if (options.multiple == true) {\n          if (obj.items[b].classList.contains('jdropdown-selected')) {\n            select.options[b].setAttribute('selected', 'selected');\n          } else {\n            select.options[b].removeAttribute('selected');\n          }\n        } else {\n          select.value = d;\n        }\n      };\n    } // Create DIV\n\n\n    var div = document.createElement('div');\n    el.parentNode.insertBefore(div, el);\n    el.style.display = 'none';\n    el = div;\n    return {\n      el: el,\n      options: options\n    };\n  };\n  /**\n   * (c) jTools Text Editor\n   * https://github.com/paulhodel/jtools\n   *\n   * @author: Paul Hodel <paul.hodel@gmail.com>\n   * @description: Inline richtext editor\n   */\n\n\n  jSuites.editor = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      // Initial HTML content\n      value: null,\n      // Initial snippet\n      snippet: null,\n      // Add toolbar\n      toolbar: null,\n      // Max height\n      maxHeight: null,\n      // Website parser is to read websites and images from cross domain\n      remoteParser: null,\n      // Key from youtube to read properties from URL\n      youtubeKey: null,\n      // User list\n      userSearch: null,\n      // Parse URL\n      parseURL: false,\n      // Accept drop files\n      dropZone: true,\n      dropAsAttachment: false,\n      acceptImages: true,\n      acceptFiles: false,\n      maxFileSize: 5000000,\n      // Border\n      border: true,\n      padding: true,\n      focus: false,\n      // Events\n      onclick: null,\n      onfocus: null,\n      onblur: null,\n      onload: null,\n      onenter: null,\n      onkeyup: null,\n      onkeydown: null\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Private controllers\n\n\n    var imageResize = 0;\n    var editorTimer = null;\n    var editorAction = null; // Make sure element is empty\n\n    el.innerHTML = ''; // Prepare container\n\n    el.classList.add('jeditor-container'); // Padding\n\n    if (obj.options.padding == true) {\n      el.classList.add('jeditor-padding');\n    } // Border\n\n\n    if (obj.options.border == false) {\n      el.style.border = '0px';\n    } // Snippet\n\n\n    var snippet = document.createElement('div');\n    snippet.className = 'snippet';\n    snippet.setAttribute('contenteditable', false); // Toolbar\n\n    var toolbar = document.createElement('div');\n    toolbar.className = 'jeditor-toolbar'; // Create editor\n\n    var editor = document.createElement('div');\n    editor.setAttribute('contenteditable', true);\n    editor.setAttribute('spellcheck', false);\n    editor.className = 'jeditor'; // Max height\n\n    if (obj.options.maxHeight) {\n      editor.style.overflowY = 'auto';\n      editor.style.maxHeight = obj.options.maxHeight;\n    } // Set editor initial value\n\n\n    if (obj.options.value) {\n      var value = obj.options.value;\n    } else {\n      var value = el.innerHTML ? el.innerHTML : '';\n    }\n\n    if (!value) {\n      var value = '<br>';\n    }\n    /**\n     * Extract images from a HTML string\n     */\n\n\n    var extractImageFromHtml = function extractImageFromHtml(html) {\n      // Create temp element\n      var div = document.createElement('div');\n      div.innerHTML = html; // Extract images\n\n      var img = div.querySelectorAll('img');\n\n      if (img.length) {\n        for (var i = 0; i < img.length; i++) {\n          obj.addImage(img[i].src);\n        }\n      }\n    };\n    /**\n     * Insert node at caret\n     */\n\n\n    var insertNodeAtCaret = function insertNodeAtCaret(newNode) {\n      var sel, range;\n\n      if (window.getSelection) {\n        sel = window.getSelection();\n\n        if (sel.rangeCount) {\n          range = sel.getRangeAt(0);\n          var selectedText = range.toString();\n          range.deleteContents();\n          range.insertNode(newNode); // move the cursor after element\n\n          range.setStartAfter(newNode);\n          range.setEndAfter(newNode);\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    };\n    /**\n     * Append snippet or thumbs in the editor\n     * @Param object data\n     */\n\n\n    var appendElement = function appendElement(data) {\n      // Reset snippet\n      snippet.innerHTML = '';\n\n      if (data.image) {\n        var div = document.createElement('div');\n        div.className = 'snippet-image';\n        div.setAttribute('data-k', 'image');\n        snippet.appendChild(div);\n        var image = document.createElement('img');\n        image.src = data.image;\n        div.appendChild(image);\n      }\n\n      var div = document.createElement('div');\n      div.className = 'snippet-title';\n      div.setAttribute('data-k', 'title');\n      div.innerHTML = data.title;\n      snippet.appendChild(div);\n      var div = document.createElement('div');\n      div.className = 'snippet-description';\n      div.setAttribute('data-k', 'description');\n      div.innerHTML = data.description;\n      snippet.appendChild(div);\n      var div = document.createElement('div');\n      div.className = 'snippet-host';\n      div.setAttribute('data-k', 'host');\n      div.innerHTML = data.host;\n      snippet.appendChild(div);\n      var div = document.createElement('div');\n      div.className = 'snippet-url';\n      div.setAttribute('data-k', 'url');\n      div.innerHTML = data.url;\n      snippet.appendChild(div);\n      editor.appendChild(snippet);\n    };\n\n    var verifyEditor = function verifyEditor() {\n      clearTimeout(editorTimer);\n      editorTimer = setTimeout(function () {\n        var snippet = editor.querySelector('.snippet');\n        var thumbsContainer = el.querySelector('.jeditor-thumbs-container');\n\n        if (!snippet && !thumbsContainer) {\n          var html = editor.innerHTML.replace(/\\n/g, ' ');\n          var container = document.createElement('div');\n          container.innerHTML = html;\n          var thumbsContainer = container.querySelector('.jeditor-thumbs-container');\n\n          if (thumbsContainer) {\n            thumbsContainer.remove();\n          }\n\n          var text = container.innerText;\n          var url = jSuites.editor.detectUrl(text);\n\n          if (url) {\n            if (url[0].substr(-3) == 'jpg' || url[0].substr(-3) == 'png' || url[0].substr(-3) == 'gif') {\n              if (jSuites.editor.getDomain(url[0]) == window.location.hostname) {\n                obj.importImage(url[0], '');\n              } else {\n                obj.importImage(obj.options.remoteParser + url[0], '');\n              }\n            } else {\n              var id = jSuites.editor.youtubeParser(url[0]);\n\n              if (id) {\n                obj.getYoutube(id);\n              } else {\n                obj.getWebsite(url[0]);\n              }\n            }\n          }\n        }\n      }, 1000);\n    };\n\n    obj.parseContent = function () {\n      verifyEditor();\n    };\n    /**\n     * Get metadata from a youtube video\n     */\n\n\n    obj.getYoutube = function (id) {\n      if (!obj.options.youtubeKey) {\n        console.error('The youtubeKey is not defined');\n      } else {\n        jSuites.ajax({\n          url: 'https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&key=' + obj.options.youtubeKey + '&id=' + id,\n          method: 'GET',\n          dataType: 'json',\n          success: function success(result) {\n            // Only valid elements to be appended\n            if (result.items && result.items[0]) {\n              var p = {\n                title: '',\n                description: '',\n                image: '',\n                host: 'www.youtube.com',\n                url: 'https://www.youtube.com?watch=' + id\n              };\n\n              if (result.items[0].snippet.title) {\n                p.title = result.items[0].snippet.title;\n              }\n\n              if (result.items[0].snippet.description) {\n                p.description = result.items[0].snippet.description;\n\n                if (p.description.length > 150) {\n                  p.description = p.description.substr(0, 150) + '...';\n                }\n              }\n\n              if (result.items[0].snippet.thumbnails.medium.url) {\n                p.image = result.items[0].snippet.thumbnails.medium.url;\n              }\n\n              appendElement(p);\n            }\n          }\n        });\n      }\n    };\n    /**\n     * Get meta information from a website\n     */\n\n\n    obj.getWebsite = function (url) {\n      if (!obj.options.remoteParser) {\n        console.log('The remoteParser is not defined');\n      } else {\n        jSuites.ajax({\n          url: obj.options.remoteParser + encodeURI(url.trim()),\n          method: 'GET',\n          dataType: 'json',\n          success: function success(result) {\n            var p = {\n              title: '',\n              description: '',\n              image: '',\n              host: url,\n              url: url\n            };\n\n            if (result.title) {\n              p.title = result.title;\n            }\n\n            if (result.description) {\n              p.description = result.description;\n            }\n\n            if (result.image) {\n              p.image = result.image;\n            } else if (result['og:image']) {\n              p.image = result['og:image'];\n            }\n\n            if (result.host) {\n              p.host = result.host;\n            }\n\n            if (result.url) {\n              p.url = result.url;\n            }\n\n            appendElement(p);\n          }\n        });\n      }\n    };\n    /**\n     * Set editor value\n     */\n\n\n    obj.setData = function (html) {\n      editor.innerHTML = html;\n      cursor();\n    };\n    /**\n     * Get editor data\n     */\n\n\n    obj.getData = function (json) {\n      if (!json) {\n        var data = editor.innerHTML;\n      } else {\n        var data = {\n          content: ''\n        }; // Get tag users\n\n        var tagged = editor.querySelectorAll('.post-tag');\n\n        if (tagged.length) {\n          data.users = [];\n\n          for (var i = 0; i < tagged.length; i++) {\n            var userId = tagged[i].getAttribute('data-user');\n\n            if (userId) {\n              data.users.push(userId);\n            }\n          }\n\n          data.users = data.users.join(',');\n        }\n\n        if (snippet.innerHTML) {\n          var index = 0;\n          data.snippet = {};\n\n          for (var i = 0; i < snippet.children.length; i++) {\n            // Get key from element\n            var key = snippet.children[i].getAttribute('data-k');\n\n            if (key) {\n              if (key == 'image') {\n                data.snippet.image = snippet.children[i].children[0].getAttribute('src');\n              } else {\n                data.snippet[key] = snippet.children[i].innerHTML;\n              }\n            }\n          }\n\n          snippet.innerHTML = '';\n          snippet.remove();\n        }\n\n        var text = editor.innerHTML;\n        text = text.replace(/<br>/g, \"\\n\");\n        text = text.replace(/<\\/div>/g, \"<\\/div>\\n\");\n        text = text.replace(/<(?:.|\\n)*?>/gm, \"\");\n        data.content = text.trim();\n        data = JSON.stringify(data);\n      }\n\n      return data;\n    }; // Reset\n\n\n    obj.reset = function () {\n      editor.innerHTML = '';\n    };\n\n    obj.addPdf = function (data) {\n      if (data.result.substr(0, 4) != 'data') {\n        console.error('Invalid source');\n      } else {\n        var canvas = document.createElement('canvas');\n        canvas.width = 60;\n        canvas.height = 60;\n        var img = new Image();\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        canvas.toBlob(function (blob) {\n          var newImage = document.createElement('img');\n          newImage.src = window.URL.createObjectURL(blob);\n          newImage.setAttribute('data-extension', 'pdf');\n\n          if (data.name) {\n            newImage.setAttribute('data-name', data.name);\n          }\n\n          if (data.size) {\n            newImage.setAttribute('data-size', data.size);\n          }\n\n          if (data.date) {\n            newImage.setAttribute('data-date', data.date);\n          }\n\n          newImage.className = 'jfile pdf';\n          insertNodeAtCaret(newImage);\n          jSuites.files[newImage.src] = data.result.substr(data.result.indexOf(',') + 1);\n        });\n      }\n    };\n\n    obj.addImage = function (src, name, size, date) {\n      if (src.substr(0, 4) != 'data' && !obj.options.remoteParser) {\n        console.error('remoteParser not defined in your initialization');\n      } else {\n        // This is to process cross domain images\n        if (src.substr(0, 4) == 'data') {\n          var extension = src.split(';');\n          extension = extension[0].split('/');\n          extension = extension[1];\n        } else {\n          var extension = src.substr(src.lastIndexOf('.') + 1); // Work for cross browsers\n\n          src = obj.options.remoteParser + src;\n        }\n\n        var img = new Image();\n\n        img.onload = function onload() {\n          var canvas = document.createElement('canvas');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          var ctx = canvas.getContext('2d');\n          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n          canvas.toBlob(function (blob) {\n            var newImage = document.createElement('img');\n            newImage.src = window.URL.createObjectURL(blob);\n            newImage.setAttribute('tabindex', '900');\n            newImage.setAttribute('data-extension', extension);\n\n            if (name) {\n              newImage.setAttribute('data-name', name);\n            }\n\n            if (size) {\n              newImage.setAttribute('data-size', size);\n            }\n\n            if (date) {\n              newImage.setAttribute('data-date', date);\n            }\n\n            newImage.className = 'jfile';\n            var content = canvas.toDataURL();\n            insertNodeAtCaret(newImage);\n            jSuites.files[newImage.src] = content.substr(content.indexOf(',') + 1);\n          });\n        };\n\n        img.src = src;\n      }\n    };\n\n    obj.addFile = function (files) {\n      var reader = [];\n\n      for (var i = 0; i < files.length; i++) {\n        if (files[i].size > obj.options.maxFileSize) {\n          alert('The file is too big');\n        } else {\n          // Only PDF or Images\n          var type = files[i].type.split('/');\n\n          if (type[0] == 'image') {\n            type = 1;\n          } else if (type[1] == 'pdf') {\n            type = 2;\n          } else {\n            type = 0;\n          }\n\n          if (type) {\n            // Create file\n            reader[i] = new FileReader();\n            reader[i].index = i;\n            reader[i].type = type;\n            reader[i].name = files[i].name;\n            reader[i].date = files[i].lastModified;\n            reader[i].size = files[i].size;\n            reader[i].addEventListener(\"load\", function (data) {\n              // Get result\n              if (data.target.type == 2) {\n                if (obj.options.acceptFiles == true) {\n                  obj.addPdf(data.target);\n                }\n              } else {\n                obj.addImage(data.target.result, data.target.name, data.total, data.target.lastModified);\n              }\n            }, false);\n            reader[i].readAsDataURL(files[i]);\n          } else {\n            alert('The extension is not allowed');\n          }\n        }\n      }\n    }; // Destroy\n\n\n    obj.destroy = function () {\n      editor.removeEventListener('mouseup', editorMouseUp);\n      editor.removeEventListener('mousedown', editorMouseDown);\n      editor.removeEventListener('mousemove', editorMouseMove);\n      editor.removeEventListener('keyup', editorKeyUp);\n      editor.removeEventListener('keydown', editorKeyDown);\n      editor.removeEventListener('dragstart', editorDragStart);\n      editor.removeEventListener('dragenter', editorDragEnter);\n      editor.removeEventListener('dragover', editorDragOver);\n      editor.removeEventListener('drop', editorDrop);\n      editor.removeEventListener('paste', editorPaste);\n\n      if (typeof obj.options.onblur == 'function') {\n        editor.removeEventListener('blur', editorBlur);\n      }\n\n      if (typeof obj.options.onfocus == 'function') {\n        editor.removeEventListener('focus', editorFocus);\n      }\n\n      el.editor = null;\n      el.classList.remove('jeditor-container');\n      toolbar.remove();\n      snippet.remove();\n      editor.remove();\n    };\n\n    var isLetter = function isLetter(str) {\n      var regex = /([\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]+)/g;\n      return str.match(regex) ? 1 : 0;\n    }; // Event handlers\n\n\n    var editorMouseUp = function editorMouseUp(e) {\n      editorAction = false;\n    };\n\n    var editorMouseDown = function editorMouseDown(e) {\n      var close = function close(snippet) {\n        var rect = snippet.getBoundingClientRect();\n\n        if (rect.width - (e.clientX - rect.left) < 40 && e.clientY - rect.top < 40) {\n          snippet.innerHTML = '';\n          snippet.remove();\n        }\n      };\n\n      if (e.target.tagName == 'IMG') {\n        if (e.target.style.cursor) {\n          var rect = e.target.getBoundingClientRect();\n          editorAction = {\n            e: e.target,\n            x: e.clientX,\n            y: e.clientY,\n            w: rect.width,\n            h: rect.height,\n            d: e.target.style.cursor\n          };\n\n          if (!e.target.style.width) {\n            e.target.style.width = rect.width + 'px';\n          }\n\n          if (!e.target.style.height) {\n            e.target.style.height = rect.height + 'px';\n          }\n\n          var s = window.getSelection();\n\n          if (s.rangeCount) {\n            for (var i = 0; i < s.rangeCount; i++) {\n              s.removeRange(s.getRangeAt(i));\n            }\n          }\n        } else {\n          editorAction = true;\n        }\n      } else {\n        if (e.target.classList.contains('snippet')) {\n          close(e.target);\n        } else if (e.target.parentNode.classList.contains('snippet')) {\n          close(e.target.parentNode);\n        }\n\n        editorAction = true;\n      }\n    };\n\n    var editorMouseMove = function editorMouseMove(e) {\n      if (e.target.tagName == 'IMG') {\n        if (e.target.getAttribute('tabindex')) {\n          var rect = e.target.getBoundingClientRect();\n\n          if (e.clientY - rect.top < 5) {\n            if (rect.width - (e.clientX - rect.left) < 5) {\n              e.target.style.cursor = 'ne-resize';\n            } else if (e.clientX - rect.left < 5) {\n              e.target.style.cursor = 'nw-resize';\n            } else {\n              e.target.style.cursor = 'n-resize';\n            }\n          } else if (rect.height - (e.clientY - rect.top) < 5) {\n            if (rect.width - (e.clientX - rect.left) < 5) {\n              e.target.style.cursor = 'se-resize';\n            } else if (e.clientX - rect.left < 5) {\n              e.target.style.cursor = 'sw-resize';\n            } else {\n              e.target.style.cursor = 's-resize';\n            }\n          } else if (rect.width - (e.clientX - rect.left) < 5) {\n            e.target.style.cursor = 'e-resize';\n          } else if (e.clientX - rect.left < 5) {\n            e.target.style.cursor = 'w-resize';\n          } else {\n            e.target.style.cursor = '';\n          }\n        }\n      } // Move\n\n\n      if (e.which == 1 && editorAction && editorAction.d) {\n        if (editorAction.d == 'e-resize' || editorAction.d == 'ne-resize' || editorAction.d == 'se-resize') {\n          editorAction.e.style.width = editorAction.w + (e.clientX - editorAction.x) + 'px';\n\n          if (e.shiftKey) {\n            var newHeight = (e.clientX - editorAction.x) * (editorAction.h / editorAction.w);\n            editorAction.e.style.height = editorAction.h + newHeight + 'px';\n          } else {\n            var newHeight = null;\n          }\n        }\n\n        if (!newHeight) {\n          if (editorAction.d == 's-resize' || editorAction.d == 'se-resize' || editorAction.d == 'sw-resize') {\n            if (!e.shiftKey) {\n              editorAction.e.style.height = editorAction.h + (e.clientY - editorAction.y);\n            }\n          }\n        }\n      }\n    };\n\n    var editorKeyUp = function editorKeyUp(e) {\n      if (!editor.innerHTML) {\n        editor.innerHTML = '<div><br></div>';\n      }\n\n      if (typeof obj.options.onkeyup == 'function') {\n        obj.options.onkeyup(e, el);\n      }\n    };\n\n    var editorKeyDown = function editorKeyDown(e) {\n      // Check for URL\n      if (obj.options.parseURL == true) {\n        verifyEditor();\n      } // Closable\n\n\n      if (typeof obj.options.onenter == 'function' && e.which == 13) {\n        var data = obj.getData();\n        obj.options.onenter(obj, el, data, e);\n      }\n\n      if (typeof obj.options.onkeydown == 'function') {\n        obj.options.onkeydown(e, el);\n      }\n    };\n\n    var editorPaste = function editorPaste(e) {\n      if (e.clipboardData || e.originalEvent.clipboardData) {\n        var html = (e.originalEvent || e).clipboardData.getData('text/html');\n        var text = (e.originalEvent || e).clipboardData.getData('text/plain');\n        var file = (e.originalEvent || e).clipboardData.files;\n      } else if (window.clipboardData) {\n        var html = window.clipboardData.getData('Html');\n        var text = window.clipboardData.getData('Text');\n        var file = window.clipboardData.files;\n      }\n\n      if (file.length) {\n        // Paste a image from the clipboard\n        obj.addFile(file);\n      } else {\n        // Paste text\n        text = text.split('\\r\\n');\n        var str = '';\n\n        if (e.target.nodeName == 'DIV' && !e.target.classList.contains('jeditor')) {\n          for (var i = 0; i < text.length; i++) {\n            if (text[i]) {\n              str += text[i] + \"<br>\\r\\n\";\n            }\n          }\n        } else {\n          for (var i = 0; i < text.length; i++) {\n            if (text[i]) {\n              str += '<div>' + text[i] + '</div>';\n            } else {\n              str += '<div><br></div>';\n            }\n          }\n        } // Insert text\n\n\n        document.execCommand('insertHtml', false, str); // Extra images from the paste\n\n        if (obj.options.acceptImages == true) {\n          extractImageFromHtml(html);\n        }\n      }\n\n      e.preventDefault();\n    };\n\n    var editorDragStart = function editorDragStart(e) {\n      if (editorAction && editorAction.e) {\n        e.preventDefault();\n      }\n    };\n\n    var editorDragEnter = function editorDragEnter(e) {\n      if (editorAction || obj.options.dropZone == false) {// Do nothing\n      } else {\n        el.classList.add('jeditor-dragging');\n      }\n    };\n\n    var editorDragOver = function editorDragOver(e) {\n      if (editorAction || obj.options.dropZone == false) {// Do nothing\n      } else {\n        if (editorTimer) {\n          clearTimeout(editorTimer);\n        }\n\n        editorTimer = setTimeout(function () {\n          el.classList.remove('jeditor-dragging');\n        }, 100);\n      }\n    };\n\n    var editorDrop = function editorDrop(e) {\n      if (editorAction || obj.options.dropZone == false) {// Do nothing\n      } else {\n        // Position caret on the drop\n        var range = null;\n\n        if (document.caretRangeFromPoint) {\n          range = document.caretRangeFromPoint(e.clientX, e.clientY);\n        } else if (e.rangeParent) {\n          range = document.createRange();\n          range.setStart(e.rangeParent, e.rangeOffset);\n        }\n\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n        sel.anchorNode.parentNode.focus();\n        var html = (e.originalEvent || e).dataTransfer.getData('text/html');\n        var text = (e.originalEvent || e).dataTransfer.getData('text/plain');\n        var file = (e.originalEvent || e).dataTransfer.files;\n\n        if (file.length) {\n          obj.addFile(file);\n        } else if (text) {\n          extractImageFromHtml(html);\n        }\n\n        el.classList.remove('jeditor-dragging');\n        e.preventDefault();\n      }\n    };\n\n    var editorBlur = function editorBlur() {\n      obj.options.onblur(obj, el, obj.getData());\n    };\n\n    var editorFocus = function editorFocus() {\n      obj.options.onfocus(obj, el, obj.getData());\n    };\n\n    editor.addEventListener('mouseup', editorMouseUp);\n    editor.addEventListener('mousedown', editorMouseDown);\n    editor.addEventListener('mousemove', editorMouseMove);\n    editor.addEventListener('keyup', editorKeyUp);\n    editor.addEventListener('keydown', editorKeyDown);\n    editor.addEventListener('dragstart', editorDragStart);\n    editor.addEventListener('dragenter', editorDragEnter);\n    editor.addEventListener('dragover', editorDragOver);\n    editor.addEventListener('drop', editorDrop);\n    editor.addEventListener('paste', editorPaste); // Blur\n\n    if (typeof obj.options.onblur == 'function') {\n      editor.addEventListener('blur', editorBlur);\n    } // Focus\n\n\n    if (typeof obj.options.onfocus == 'function') {\n      editor.addEventListener('focus', editorFocus);\n    } // Onload\n\n\n    if (typeof obj.options.onload == 'function') {\n      obj.options.onload(el, editor);\n    } // Set value to the editor\n\n\n    editor.innerHTML = value; // Append editor to the containre\n\n    el.appendChild(editor); // Snippet\n\n    if (obj.options.snippet) {\n      appendElement(obj.options.snippet);\n    } // Default toolbar\n\n\n    if (obj.options.toolbar == null) {\n      obj.options.toolbar = jSuites.editor.getDefaultToolbar();\n    } // Add toolbar\n\n\n    if (obj.options.toolbar) {\n      for (var i = 0; i < obj.options.toolbar.length; i++) {\n        if (obj.options.toolbar[i].icon) {\n          var item = document.createElement('div');\n          item.style.userSelect = 'none';\n          var itemIcon = document.createElement('i');\n          itemIcon.className = 'material-icons';\n          itemIcon.innerHTML = obj.options.toolbar[i].icon;\n\n          itemIcon.onclick = function (a) {\n            var b = a;\n            return function () {\n              obj.options.toolbar[b].onclick(el, obj, this);\n            };\n          }(i);\n\n          item.appendChild(itemIcon);\n          toolbar.appendChild(item);\n        } else {\n          if (obj.options.toolbar[i].type == 'divisor') {\n            var item = document.createElement('div');\n            item.className = 'jeditor-toolbar-divisor';\n            toolbar.appendChild(item);\n          } else if (obj.options.toolbar[i].type == 'button') {\n            var item = document.createElement('div');\n            item.classList.add('jeditor-toolbar-button');\n            item.innerHTML = obj.options.toolbar[i].value;\n            toolbar.appendChild(item);\n          }\n        }\n      }\n\n      el.appendChild(toolbar);\n    } // Focus to the editor\n\n\n    if (obj.options.focus) {\n      jSuites.editor.setCursor(editor, obj.options.focus == 'initial' ? true : false);\n    }\n\n    el.editor = obj;\n    return obj;\n  };\n\n  jSuites.editor.setCursor = function (element, first) {\n    element.focus();\n    document.execCommand('selectAll');\n    var sel = window.getSelection();\n    var range = sel.getRangeAt(0);\n\n    if (first == true) {\n      var node = range.startContainer;\n      var size = 0;\n    } else {\n      var node = range.endContainer;\n      var size = node.length;\n    }\n\n    range.setStart(node, size);\n    range.setEnd(node, size);\n    sel.removeAllRanges();\n    sel.addRange(range);\n  };\n\n  jSuites.editor.getDomain = function (url) {\n    return url.replace('http://', '').replace('https://', '').replace('www.', '').split(/[/?#]/)[0].split(/:/g)[0];\n  };\n\n  jSuites.editor.detectUrl = function (text) {\n    var expression = /(((https?:\\/\\/)|(www\\.))[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|]+)/ig;\n    var links = text.match(expression);\n\n    if (links) {\n      if (links[0].substr(0, 3) == 'www') {\n        links[0] = 'http://' + links[0];\n      }\n    }\n\n    return links;\n  };\n\n  jSuites.editor.youtubeParser = function (url) {\n    var regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*/;\n    var match = url.match(regExp);\n    return match && match[7].length == 11 ? match[7] : false;\n  };\n\n  jSuites.editor.getDefaultToolbar = function () {\n    return [{\n      icon: 'undo',\n      onclick: function onclick() {\n        document.execCommand('undo');\n      }\n    }, {\n      icon: 'redo',\n      onclick: function onclick() {\n        document.execCommand('redo');\n      }\n    }, {\n      type: 'divisor'\n    }, {\n      icon: 'format_bold',\n      onclick: function onclick(a, b, c) {\n        document.execCommand('bold');\n\n        if (document.queryCommandState(\"bold\")) {\n          c.classList.add('selected');\n        } else {\n          c.classList.remove('selected');\n        }\n      }\n    }, {\n      icon: 'format_italic',\n      onclick: function onclick(a, b, c) {\n        document.execCommand('italic');\n\n        if (document.queryCommandState(\"italic\")) {\n          c.classList.add('selected');\n        } else {\n          c.classList.remove('selected');\n        }\n      }\n    }, {\n      icon: 'format_underline',\n      onclick: function onclick(a, b, c) {\n        document.execCommand('underline');\n\n        if (document.queryCommandState(\"underline\")) {\n          c.classList.add('selected');\n        } else {\n          c.classList.remove('selected');\n        }\n      }\n    }, {\n      type: 'divisor'\n    }, {\n      icon: 'format_list_bulleted',\n      onclick: function onclick(a, b, c) {\n        document.execCommand('insertUnorderedList');\n\n        if (document.queryCommandState(\"insertUnorderedList\")) {\n          c.classList.add('selected');\n        } else {\n          c.classList.remove('selected');\n        }\n      }\n    }, {\n      icon: 'format_list_numbered',\n      onclick: function onclick(a, b, c) {\n        document.execCommand('insertOrderedList');\n\n        if (document.queryCommandState(\"insertOrderedList\")) {\n          c.classList.add('selected');\n        } else {\n          c.classList.remove('selected');\n        }\n      }\n    }, {\n      icon: 'format_indent_increase',\n      onclick: function onclick(a, b, c) {\n        document.execCommand('indent', true, null);\n\n        if (document.queryCommandState(\"indent\")) {\n          c.classList.add('selected');\n        } else {\n          c.classList.remove('selected');\n        }\n      }\n    }, {\n      icon: 'format_indent_decrease',\n      onclick: function onclick(a, b, c) {\n        document.execCommand('outdent');\n\n        if (document.queryCommandState(\"outdent\")) {\n          c.classList.add('selected');\n        } else {\n          c.classList.remove('selected');\n        }\n      }\n    }\n    /*{\n        type:'select',\n        items: ['Verdana','Arial','Courier New'],\n        onchange: function() {\n        }\n    },\n    {\n        type:'select',\n        items: ['10px','12px','14px','16px','18px','20px','22px'],\n        onchange: function() {\n        }\n    },\n    {\n        icon:'format_align_left',\n        onclick: function() {\n            document.execCommand('JustifyLeft');\n             if (document.queryCommandState(\"JustifyLeft\")) {\n                this.classList.add('selected');\n            } else {\n                this.classList.remove('selected');\n            }\n        }\n    },\n    {\n        icon:'format_align_center',\n        onclick: function() {\n            document.execCommand('justifyCenter');\n             if (document.queryCommandState(\"justifyCenter\")) {\n                this.classList.add('selected');\n            } else {\n                this.classList.remove('selected');\n            }\n        }\n    },\n    {\n        icon:'format_align_right',\n        onclick: function() {\n            document.execCommand('justifyRight');\n             if (document.queryCommandState(\"justifyRight\")) {\n                this.classList.add('selected');\n            } else {\n                this.classList.remove('selected');\n            }\n        }\n    },\n    {\n        icon:'format_align_justify',\n        onclick: function() {\n            document.execCommand('justifyFull');\n             if (document.queryCommandState(\"justifyFull\")) {\n                this.classList.add('selected');\n            } else {\n                this.classList.remove('selected');\n            }\n        }\n    },\n    {\n        icon:'format_list_bulleted',\n        onclick: function() {\n            document.execCommand('insertUnorderedList');\n             if (document.queryCommandState(\"insertUnorderedList\")) {\n                this.classList.add('selected');\n            } else {\n                this.classList.remove('selected');\n            }\n        }\n    }*/\n    ];\n  };\n\n  jSuites.image = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      minWidth: false,\n      onchange: null,\n      singleFile: true,\n      remoteParser: null,\n      text: {\n        extensionNotAllowed: 'The extension is not allowed',\n        imageTooSmall: 'The resolution is too low, try a image with a better resolution. width > 800px'\n      }\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Upload icon\n\n\n    el.classList.add('jupload'); // Add image\n\n    obj.addImage = function (file) {\n      if (!file.date) {\n        file.date = '';\n      }\n\n      var img = document.createElement('img');\n      img.setAttribute('data-date', file.lastmodified ? file.lastmodified : file.date);\n      img.setAttribute('data-name', file.name);\n      img.setAttribute('data-size', file.size);\n      img.setAttribute('data-small', file.small ? file.small : '');\n      img.setAttribute('data-cover', file.cover ? 1 : 0);\n      img.setAttribute('data-extension', file.extension);\n      img.setAttribute('src', file.file);\n      img.className = 'jfile';\n      img.style.width = '100%';\n      return img;\n    }; // Add image\n\n\n    obj.addImages = function (files) {\n      if (obj.options.singleFile == true) {\n        el.innerHTML = '';\n      }\n\n      for (var i = 0; i < files.length; i++) {\n        el.appendChild(obj.addImage(files[i]));\n      }\n    };\n\n    obj.addFromFile = function (file) {\n      var type = file.type.split('/');\n\n      if (type[0] == 'image') {\n        if (obj.options.singleFile == true) {\n          el.innerHTML = '';\n        }\n\n        var imageFile = new FileReader();\n        imageFile.addEventListener(\"load\", function (v) {\n          var img = new Image();\n\n          img.onload = function onload() {\n            var canvas = document.createElement('canvas');\n            canvas.width = img.width;\n            canvas.height = img.height;\n            var ctx = canvas.getContext('2d');\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            var data = {\n              file: canvas.toDataURL(),\n              extension: file.name.substr(file.name.lastIndexOf('.') + 1),\n              name: file.name,\n              size: file.size,\n              lastmodified: file.lastModified\n            };\n            var newImage = obj.addImage(data);\n            el.appendChild(newImage); // Onchange\n\n            if (typeof obj.options.onchange == 'function') {\n              obj.options.onchange(newImage);\n            }\n          };\n\n          img.src = v.srcElement.result;\n        });\n        imageFile.readAsDataURL(file);\n      } else {\n        alert(text.extentionNotAllowed);\n      }\n    };\n\n    obj.addFromUrl = function (src) {\n      if (src.substr(0, 4) != 'data' && !obj.options.remoteParser) {\n        console.error('remoteParser not defined in your initialization');\n      } else {\n        // This is to process cross domain images\n        if (src.substr(0, 4) == 'data') {\n          var extension = src.split(';');\n          extension = extension[0].split('/');\n          extension = extension[1];\n        } else {\n          var extension = src.substr(src.lastIndexOf('.') + 1); // Work for cross browsers\n\n          src = obj.options.remoteParser + src;\n        }\n\n        var img = new Image();\n\n        img.onload = function onload() {\n          var canvas = document.createElement('canvas');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          var ctx = canvas.getContext('2d');\n          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n          canvas.toBlob(function (blob) {\n            var data = {\n              file: window.URL.createObjectURL(blob),\n              extension: extension\n            };\n            var newImage = obj.addImage(data);\n            el.appendChild(newImage); // Keep base64 ready to go\n\n            var content = canvas.toDataURL();\n            jSuites.files[data.file] = content.substr(content.indexOf(',') + 1); // Onchange\n\n            if (typeof obj.options.onchange == 'function') {\n              obj.options.onchange(newImage);\n            }\n          });\n        };\n\n        img.src = src;\n      }\n    };\n\n    var attachmentInput = document.createElement('input');\n    attachmentInput.type = 'file';\n    attachmentInput.setAttribute('accept', 'image/*');\n\n    attachmentInput.onchange = function () {\n      for (var i = 0; i < this.files.length; i++) {\n        obj.addFromFile(this.files[i]);\n      }\n    };\n\n    el.addEventListener(\"dblclick\", function (e) {\n      jSuites.click(attachmentInput);\n    });\n    el.addEventListener('dragenter', function (e) {\n      el.style.border = '1px dashed #000';\n    });\n    el.addEventListener('dragleave', function (e) {\n      el.style.border = '1px solid #eee';\n    });\n    el.addEventListener('dragstop', function (e) {\n      el.style.border = '1px solid #eee';\n    });\n    el.addEventListener('dragover', function (e) {\n      e.preventDefault();\n    });\n    el.addEventListener('drop', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var html = (e.originalEvent || e).dataTransfer.getData('text/html');\n      var file = (e.originalEvent || e).dataTransfer.files;\n\n      if (file.length) {\n        for (var i = 0; i < e.dataTransfer.files.length; i++) {\n          obj.addFromFile(e.dataTransfer.files[i]);\n        }\n      } else if (html) {\n        if (obj.options.singleFile == true) {\n          el.innerHTML = '';\n        } // Create temp element\n\n\n        var div = document.createElement('div');\n        div.innerHTML = html; // Extract images\n\n        var img = div.querySelectorAll('img');\n\n        if (img.length) {\n          for (var i = 0; i < img.length; i++) {\n            obj.addFromUrl(img[i].src);\n          }\n        }\n      }\n\n      el.style.border = '1px solid #eee';\n      return false;\n    });\n    el.image = obj;\n    return obj;\n  };\n  /**\n   * (c) jLoading\n   * https://github.com/paulhodel/jtools\n   *\n   * @author: Paul Hodel <paul.hodel@gmail.com>\n   * @description: Page loading spin\n   */\n\n\n  jSuites.loading = function () {\n    var obj = {};\n    var loading = document.createElement('div');\n    loading.className = 'jloading';\n\n    obj.show = function () {\n      document.body.appendChild(loading);\n    };\n\n    obj.hide = function () {\n      document.body.removeChild(loading);\n    };\n\n    return obj;\n  }();\n  /**\n   * (c) jLogin\n   * https://github.com/paulhodel/jtools\n   *\n   * @author: Paul Hodel <paul.hodel@gmail.com>\n   * @description: Login helper\n   */\n\n\n  jSuites.login = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      url: window.location.href,\n      prepareRequest: null,\n      accessToken: null,\n      deviceToken: null,\n      facebookUrl: null,\n      maxHeight: null,\n      onload: null,\n      onerror: null,\n      message: null,\n      logo: null,\n      newProfile: false,\n      newProfileUrl: false,\n      newProfileLogin: false,\n      fullscreen: false\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Message console container\n\n\n    if (!obj.options.message) {\n      var messageElement = document.querySelector('.message');\n\n      if (messageElement) {\n        obj.options.message = messageElement;\n      }\n    } // Action\n\n\n    var action = null; // Container\n\n    var container = document.createElement('form');\n    el.appendChild(container); // Logo\n\n    var divLogo = document.createElement('div');\n    divLogo.className = 'jlogin-logo';\n    container.appendChild(divLogo);\n\n    if (obj.options.logo) {\n      var logo = document.createElement('img');\n      logo.src = obj.options.logo;\n      divLogo.appendChild(logo);\n    } // Code\n\n\n    var labelCode = document.createElement('label');\n    labelCode.innerHTML = 'Please enter here the code received';\n    var inputCode = document.createElement('input');\n    inputCode.type = 'number';\n    inputCode.id = 'code';\n    inputCode.setAttribute('maxlength', 6);\n    var divCode = document.createElement('div');\n    divCode.appendChild(labelCode);\n    divCode.appendChild(inputCode); // Hash\n\n    var inputHash = document.createElement('input');\n    inputHash.type = 'hidden';\n    inputHash.name = 'h';\n    var divHash = document.createElement('div');\n    divHash.appendChild(inputHash); // Recovery\n\n    var inputRecovery = document.createElement('input');\n    inputRecovery.type = 'hidden';\n    inputRecovery.name = 'recovery';\n    inputRecovery.value = '1';\n    var divRecovery = document.createElement('div');\n    divRecovery.appendChild(inputRecovery); // Login\n\n    var labelLogin = document.createElement('label');\n    labelLogin.innerHTML = 'Login';\n    var inputLogin = document.createElement('input');\n    inputLogin.type = 'text';\n    inputLogin.name = 'login';\n    inputLogin.setAttribute('autocomplete', 'off');\n\n    inputLogin.onkeyup = function () {\n      this.value = this.value.toLowerCase().replace(/[^a-zA-Z0-9_+]+/gi, '');\n    };\n\n    var divLogin = document.createElement('div');\n    divLogin.appendChild(labelLogin);\n    divLogin.appendChild(inputLogin); // Name\n\n    var labelName = document.createElement('label');\n    labelName.innerHTML = 'Name';\n    var inputName = document.createElement('input');\n    inputName.type = 'text';\n    inputName.name = 'name';\n    var divName = document.createElement('div');\n    divName.appendChild(labelName);\n    divName.appendChild(inputName); // Email\n\n    var labelUsername = document.createElement('label');\n    labelUsername.innerHTML = 'E-mail';\n    var inputUsername = document.createElement('input');\n    inputUsername.type = 'text';\n    inputUsername.name = 'username';\n    inputUsername.setAttribute('autocomplete', 'new-username');\n    var divUsername = document.createElement('div');\n    divUsername.appendChild(labelUsername);\n    divUsername.appendChild(inputUsername); // Password\n\n    var labelPassword = document.createElement('label');\n    labelPassword.innerHTML = 'Password';\n    var inputPassword = document.createElement('input');\n    inputPassword.type = 'password';\n    inputPassword.name = 'password';\n    inputPassword.setAttribute('autocomplete', 'new-password');\n    var divPassword = document.createElement('div');\n    divPassword.appendChild(labelPassword);\n    divPassword.appendChild(inputPassword);\n\n    divPassword.onkeydown = function (e) {\n      if (e.keyCode == 13) {\n        obj.execute();\n      }\n    }; // Repeat password\n\n\n    var labelRepeatPassword = document.createElement('label');\n    labelRepeatPassword.innerHTML = 'Password';\n    var inputRepeatPassword = document.createElement('input');\n    inputRepeatPassword.type = 'password';\n    inputRepeatPassword.name = 'password';\n    var divRepeatPassword = document.createElement('div');\n    divRepeatPassword.appendChild(labelRepeatPassword);\n    divRepeatPassword.appendChild(inputRepeatPassword); // Remember checkbox\n\n    var labelRemember = document.createElement('label');\n    labelRemember.innerHTML = 'Remember me on this device';\n    var inputRemember = document.createElement('input');\n    inputRemember.type = 'checkbox';\n    inputRemember.name = 'remember';\n    inputRemember.value = '1';\n    labelRemember.appendChild(inputRemember);\n    var divRememberButton = document.createElement('div');\n    divRememberButton.className = 'rememberButton';\n    divRememberButton.appendChild(labelRemember); // Login button\n\n    var actionButton = document.createElement('input');\n    actionButton.type = 'button';\n    actionButton.value = 'Log In';\n\n    actionButton.onclick = function () {\n      obj.execute();\n    };\n\n    var divActionButton = document.createElement('div');\n    divActionButton.appendChild(actionButton); // Cancel button\n\n    var cancelButton = document.createElement('div');\n    cancelButton.innerHTML = 'Cancel';\n    cancelButton.className = 'cancelButton';\n\n    cancelButton.onclick = function () {\n      obj.requestAccess();\n    };\n\n    var divCancelButton = document.createElement('div');\n    divCancelButton.appendChild(cancelButton); // Captcha\n\n    var labelCaptcha = document.createElement('label');\n    labelCaptcha.innerHTML = 'Please type here the code below';\n    var inputCaptcha = document.createElement('input');\n    inputCaptcha.type = 'text';\n    inputCaptcha.name = 'captcha';\n    var imageCaptcha = document.createElement('img');\n    var divCaptcha = document.createElement('div');\n    divCaptcha.className = 'jlogin-captcha';\n    divCaptcha.appendChild(labelCaptcha);\n    divCaptcha.appendChild(inputCaptcha);\n    divCaptcha.appendChild(imageCaptcha); // Facebook\n\n    var facebookButton = document.createElement('div');\n    facebookButton.innerHTML = 'Login with Facebook';\n    facebookButton.className = 'facebookButton';\n    var divFacebookButton = document.createElement('div');\n    divFacebookButton.appendChild(facebookButton);\n\n    divFacebookButton.onclick = function () {\n      obj.requestLoginViaFacebook();\n    }; // Forgot password\n\n\n    var inputRequest = document.createElement('span');\n    inputRequest.innerHTML = 'Request a new password';\n    var divRequestButton = document.createElement('div');\n    divRequestButton.className = 'requestButton';\n    divRequestButton.appendChild(inputRequest);\n\n    divRequestButton.onclick = function () {\n      obj.requestNewPassword();\n    }; // Create a new Profile\n\n\n    var inputNewProfile = document.createElement('span');\n    inputNewProfile.innerHTML = 'Create a new profile';\n    var divNewProfileButton = document.createElement('div');\n    divNewProfileButton.className = 'newProfileButton';\n    divNewProfileButton.appendChild(inputNewProfile);\n\n    divNewProfileButton.onclick = function () {\n      obj.newProfile();\n    };\n\n    el.className = 'jlogin';\n\n    if (obj.options.fullscreen == true) {\n      el.classList.add('jlogin-fullscreen');\n    }\n    /** \n     * Show message\n     */\n\n\n    obj.showMessage = function (data) {\n      var message = typeof data == 'object' ? data.message : data;\n\n      if (typeof obj.options.showMessage == 'function') {\n        obj.options.showMessage(data);\n      } else {\n        jSuites.alert(data);\n      }\n    };\n    /**\n     * New profile\n     */\n\n\n    obj.newProfile = function () {\n      container.innerHTML = '';\n      container.appendChild(divLogo);\n\n      if (obj.options.newProfileLogin) {\n        container.appendChild(divLogin);\n      }\n\n      container.appendChild(divName);\n      container.appendChild(divUsername);\n      container.appendChild(divActionButton);\n      container.appendChild(divFacebookButton);\n      container.appendChild(divCancelButton); // Reset inputs\n\n      inputLogin.value = '';\n      inputUsername.value = '';\n      inputPassword.value = ''; // Button\n\n      actionButton.value = 'Create new profile'; // Action\n\n      action = 'newProfile';\n    };\n    /**\n     * Request the email with the recovery instructions\n     */\n\n\n    obj.requestNewPassword = function () {\n      if (Array.prototype.indexOf.call(container.children, divCaptcha) >= 0) {\n        var captcha = true;\n      }\n\n      container.innerHTML = '';\n      container.appendChild(divLogo);\n      container.appendChild(divRecovery);\n      container.appendChild(divUsername);\n\n      if (captcha) {\n        container.appendChild(divCaptcha);\n      }\n\n      container.appendChild(divActionButton);\n      container.appendChild(divCancelButton);\n      actionButton.value = 'Request a new password';\n      inputRecovery.value = 1; // Action\n\n      action = 'requestNewPassword';\n    };\n    /**\n     * Confirm recovery code\n     */\n\n\n    obj.codeConfirmation = function () {\n      container.innerHTML = '';\n      container.appendChild(divLogo);\n      container.appendChild(divHash);\n      container.appendChild(divCode);\n      container.appendChild(divActionButton);\n      container.appendChild(divCancelButton);\n      actionButton.value = 'Confirm code';\n      inputRecovery.value = 2; // Action\n\n      action = 'codeConfirmation';\n    };\n    /**\n     * Update my password\n     */\n\n\n    obj.changeMyPassword = function (hash) {\n      container.innerHTML = '';\n      container.appendChild(divLogo);\n      container.appendChild(divHash);\n      container.appendChild(divPassword);\n      container.appendChild(divRepeatPassword);\n      container.appendChild(divActionButton);\n      container.appendChild(divCancelButton);\n      actionButton.value = 'Change my password';\n      inputHash.value = hash; // Action\n\n      action = 'changeMyPassword';\n    };\n    /**\n     * Request access default method\n     */\n\n\n    obj.requestAccess = function () {\n      container.innerHTML = '';\n      container.appendChild(divLogo);\n      container.appendChild(divUsername);\n      container.appendChild(divPassword);\n      container.appendChild(divActionButton);\n      container.appendChild(divFacebookButton);\n      container.appendChild(divRequestButton);\n      container.appendChild(divRememberButton);\n      container.appendChild(divRequestButton);\n\n      if (obj.options.newProfile == true) {\n        container.appendChild(divNewProfileButton);\n      } // Button\n\n\n      actionButton.value = 'Login'; // Password\n\n      inputPassword.value = ''; // Email persistence\n\n      if (window.localStorage.getItem('username')) {\n        inputUsername.value = window.localStorage.getItem('username');\n        inputPassword.focus();\n      } else {\n        inputUsername.focus();\n      } // Action\n\n\n      action = 'requestAccess';\n    };\n    /**\n     * Request login via facebook\n     */\n\n\n    obj.requestLoginViaFacebook = function () {\n      if (typeof deviceNotificationToken == 'undefined') {\n        FB.getLoginStatus(function (response) {\n          if (!response.status || response.status != 'connected') {\n            FB.login(function (response) {\n              if (response.authResponse) {\n                obj.execute({\n                  f: response.authResponse.accessToken\n                });\n              } else {\n                obj.showMessage('Not authorized by facebook');\n              }\n            }, {\n              scope: 'public_profile,email'\n            });\n          } else {\n            obj.execute({\n              f: response.authResponse.accessToken\n            });\n          }\n        }, true);\n      } else {\n        jDestroy = function jDestroy() {\n          fbLogin.removeEventListener('loadstart', jStart);\n          fbLogin.removeEventListener('loaderror', jError);\n          fbLogin.removeEventListener('exit', jExit);\n          fbLogin.close();\n          fbLogin = null;\n        };\n\n        jStart = function jStart(event) {\n          var url = event.url;\n\n          if (url.indexOf(\"access_token\") >= 0) {\n            setTimeout(function () {\n              var u = url.match(/=(.*?)&/);\n\n              if (u[1].length > 32) {\n                obj.execute({\n                  f: u[1]\n                });\n              }\n\n              jDestroy();\n            }, 500);\n          }\n\n          if (url.indexOf(\"error=access_denied\") >= 0) {\n            setTimeout(jDestroy, 500); // Not authorized by facebook\n\n            obj.showMessage('Not authorized by facebook');\n          }\n        };\n\n        jError = function jError(event) {\n          jDestroy();\n        };\n\n        jExit = function jExit(event) {\n          jDestroy();\n        };\n\n        fbLogin = window.open(this.facebookUrl, \"_blank\", \"location=no,closebuttoncaption=Exit,disallowoverscroll=yes,toolbar=no\");\n        fbLogin.addEventListener('loadstart', jStart);\n        fbLogin.addEventListener('loaderror', jError);\n        fbLogin.addEventListener('exit', jExit);\n      } // Action\n\n\n      action = 'requestLoginViaFacebook';\n    }; // Perform request\n\n\n    obj.execute = function (data) {\n      // New profile\n      if (action == 'newProfile') {\n        var pattern = new RegExp(/^([\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4})?$/);\n\n        if (!inputUsername.value || !pattern.test(inputUsername.value)) {\n          var message = 'Invalid e-mail address';\n        }\n\n        var pattern = new RegExp(/^[a-zA-Z0-9\\_\\-\\.\\s+]+$/);\n\n        if (!inputLogin.value || !pattern.test(inputLogin.value)) {\n          var message = 'Invalid username, please use only characters and numbers';\n        }\n\n        if (message) {\n          obj.showMessage(message);\n          return false;\n        }\n      } // Keep email\n\n\n      if (inputUsername.value != '') {\n        window.localStorage.setItem('username', inputUsername.value);\n      } // Captcha\n\n\n      if (Array.prototype.indexOf.call(container.children, divCaptcha) >= 0) {\n        if (inputCaptcha.value == '') {\n          obj.showMessage('Please enter the captch code below');\n          return false;\n        }\n      } // Url\n\n\n      var url = obj.options.url; // Device token\n\n      if (obj.options.deviceToken) {\n        url += '?token=' + obj.options.deviceToken;\n      } // Callback\n\n\n      var onsuccess = function onsuccess(result) {\n        if (result) {\n          // Successfully response\n          if (result.success == 1) {\n            // Recovery process\n            if (action == 'requestNewPassword') {\n              obj.codeConfirmation();\n            } else if (action == 'codeConfirmation') {\n              obj.requestAccess();\n            } else if (action == 'newProfile') {\n              obj.requestAccess(); // New profile\n\n              result.newProfile = true;\n            } // Token\n\n\n            if (result.token) {\n              // Set token\n              obj.options.accessToken = result.token; // Save token\n\n              window.localStorage.setItem('Access-Token', result.token);\n            }\n          } // Show message\n\n\n          if (result.message) {\n            // Show message\n            obj.showMessage(result.message);\n          } // Request captcha code\n\n\n          if (!result.data) {\n            if (Array.prototype.indexOf.call(container.children, divCaptcha) >= 0) {\n              divCaptcha.remove();\n            }\n          } else {\n            container.insertBefore(divCaptcha, divActionButton);\n            imageCaptcha.setAttribute('src', 'data:image/png;base64,' + result.data);\n          } // Give time to user see the message\n\n\n          if (result.hash) {\n            // Change password\n            obj.changeMyPassword(result.hash);\n          } else if (result.url) {\n            // App initialization\n            if (result.success == 1) {\n              if (typeof obj.options.onload == 'function') {\n                obj.options.onload(result);\n              } else {\n                if (result.message) {\n                  setTimeout(function () {\n                    window.location.href = result.url;\n                  }, 2000);\n                } else {\n                  window.location.href = result.url;\n                }\n              }\n            } else {\n              if (typeof obj.options.onerror == 'function') {\n                obj.options.onerror(result);\n              }\n            }\n          }\n        }\n      }; // Password\n\n\n      if (!data) {\n        var data = jSuites.getFormElements(el); // Encode passworfd\n\n        if (data.password) {\n          data.password = jSuites.login.sha512(data.password);\n        } // Recovery code\n\n\n        if (Array.prototype.indexOf.call(container.children, divCode) >= 0 && inputCode.value) {\n          data.h = jSuites.login.sha512(inputCode.value);\n        }\n      } // Loading\n\n\n      el.classList.add('jlogin-loading'); // Url\n\n      var url = action == 'newProfile' && obj.options.newProfileUrl ? obj.options.newProfileUrl : obj.options.url; // Remote call\n\n      jSuites.ajax({\n        url: url,\n        method: 'POST',\n        dataType: 'json',\n        data: data,\n        success: function success(result) {\n          // Remove loading\n          el.classList.remove('jlogin-loading'); // Callback\n\n          onsuccess(result);\n        },\n        error: function error(result) {\n          // Error\n          el.classList.remove('jlogin-loading');\n\n          if (typeof obj.options.onerror == 'function') {\n            obj.options.onerror(result);\n          }\n        }\n      });\n    };\n\n    obj.requestAccess();\n    return obj;\n  };\n\n  jSuites.login.sha512 = function (str) {\n    function int64(msint_32, lsint_32) {\n      this.highOrder = msint_32;\n      this.lowOrder = lsint_32;\n    }\n\n    var H = [new int64(0x6a09e667, 0xf3bcc908), new int64(0xbb67ae85, 0x84caa73b), new int64(0x3c6ef372, 0xfe94f82b), new int64(0xa54ff53a, 0x5f1d36f1), new int64(0x510e527f, 0xade682d1), new int64(0x9b05688c, 0x2b3e6c1f), new int64(0x1f83d9ab, 0xfb41bd6b), new int64(0x5be0cd19, 0x137e2179)];\n    var K = [new int64(0x428a2f98, 0xd728ae22), new int64(0x71374491, 0x23ef65cd), new int64(0xb5c0fbcf, 0xec4d3b2f), new int64(0xe9b5dba5, 0x8189dbbc), new int64(0x3956c25b, 0xf348b538), new int64(0x59f111f1, 0xb605d019), new int64(0x923f82a4, 0xaf194f9b), new int64(0xab1c5ed5, 0xda6d8118), new int64(0xd807aa98, 0xa3030242), new int64(0x12835b01, 0x45706fbe), new int64(0x243185be, 0x4ee4b28c), new int64(0x550c7dc3, 0xd5ffb4e2), new int64(0x72be5d74, 0xf27b896f), new int64(0x80deb1fe, 0x3b1696b1), new int64(0x9bdc06a7, 0x25c71235), new int64(0xc19bf174, 0xcf692694), new int64(0xe49b69c1, 0x9ef14ad2), new int64(0xefbe4786, 0x384f25e3), new int64(0x0fc19dc6, 0x8b8cd5b5), new int64(0x240ca1cc, 0x77ac9c65), new int64(0x2de92c6f, 0x592b0275), new int64(0x4a7484aa, 0x6ea6e483), new int64(0x5cb0a9dc, 0xbd41fbd4), new int64(0x76f988da, 0x831153b5), new int64(0x983e5152, 0xee66dfab), new int64(0xa831c66d, 0x2db43210), new int64(0xb00327c8, 0x98fb213f), new int64(0xbf597fc7, 0xbeef0ee4), new int64(0xc6e00bf3, 0x3da88fc2), new int64(0xd5a79147, 0x930aa725), new int64(0x06ca6351, 0xe003826f), new int64(0x14292967, 0x0a0e6e70), new int64(0x27b70a85, 0x46d22ffc), new int64(0x2e1b2138, 0x5c26c926), new int64(0x4d2c6dfc, 0x5ac42aed), new int64(0x53380d13, 0x9d95b3df), new int64(0x650a7354, 0x8baf63de), new int64(0x766a0abb, 0x3c77b2a8), new int64(0x81c2c92e, 0x47edaee6), new int64(0x92722c85, 0x1482353b), new int64(0xa2bfe8a1, 0x4cf10364), new int64(0xa81a664b, 0xbc423001), new int64(0xc24b8b70, 0xd0f89791), new int64(0xc76c51a3, 0x0654be30), new int64(0xd192e819, 0xd6ef5218), new int64(0xd6990624, 0x5565a910), new int64(0xf40e3585, 0x5771202a), new int64(0x106aa070, 0x32bbd1b8), new int64(0x19a4c116, 0xb8d2d0c8), new int64(0x1e376c08, 0x5141ab53), new int64(0x2748774c, 0xdf8eeb99), new int64(0x34b0bcb5, 0xe19b48a8), new int64(0x391c0cb3, 0xc5c95a63), new int64(0x4ed8aa4a, 0xe3418acb), new int64(0x5b9cca4f, 0x7763e373), new int64(0x682e6ff3, 0xd6b2b8a3), new int64(0x748f82ee, 0x5defb2fc), new int64(0x78a5636f, 0x43172f60), new int64(0x84c87814, 0xa1f0ab72), new int64(0x8cc70208, 0x1a6439ec), new int64(0x90befffa, 0x23631e28), new int64(0xa4506ceb, 0xde82bde9), new int64(0xbef9a3f7, 0xb2c67915), new int64(0xc67178f2, 0xe372532b), new int64(0xca273ece, 0xea26619c), new int64(0xd186b8c7, 0x21c0c207), new int64(0xeada7dd6, 0xcde0eb1e), new int64(0xf57d4f7f, 0xee6ed178), new int64(0x06f067aa, 0x72176fba), new int64(0x0a637dc5, 0xa2c898a6), new int64(0x113f9804, 0xbef90dae), new int64(0x1b710b35, 0x131c471b), new int64(0x28db77f5, 0x23047d84), new int64(0x32caab7b, 0x40c72493), new int64(0x3c9ebe0a, 0x15c9bebc), new int64(0x431d67c4, 0x9c100d4c), new int64(0x4cc5d4be, 0xcb3e42b6), new int64(0x597f299c, 0xfc657e2a), new int64(0x5fcb6fab, 0x3ad6faec), new int64(0x6c44198c, 0x4a475817)];\n    var W = new Array(64);\n    var a, b, c, d, e, f, g, h, i, j;\n    var T1, T2;\n    var charsize = 8;\n\n    function utf8_encode(str) {\n      return unescape(encodeURIComponent(str));\n    }\n\n    function str2binb(str) {\n      var bin = [];\n      var mask = (1 << charsize) - 1;\n      var len = str.length * charsize;\n\n      for (var i = 0; i < len; i += charsize) {\n        bin[i >> 5] |= (str.charCodeAt(i / charsize) & mask) << 32 - charsize - i % 32;\n      }\n\n      return bin;\n    }\n\n    function binb2hex(binarray) {\n      var hex_tab = \"0123456789abcdef\";\n      var str = \"\";\n      var length = binarray.length * 4;\n      var srcByte;\n\n      for (var i = 0; i < length; i += 1) {\n        srcByte = binarray[i >> 2] >> (3 - i % 4) * 8;\n        str += hex_tab.charAt(srcByte >> 4 & 0xF) + hex_tab.charAt(srcByte & 0xF);\n      }\n\n      return str;\n    }\n\n    function safe_add_2(x, y) {\n      var lsw, msw, lowOrder, highOrder;\n      lsw = (x.lowOrder & 0xFFFF) + (y.lowOrder & 0xFFFF);\n      msw = (x.lowOrder >>> 16) + (y.lowOrder >>> 16) + (lsw >>> 16);\n      lowOrder = (msw & 0xFFFF) << 16 | lsw & 0xFFFF;\n      lsw = (x.highOrder & 0xFFFF) + (y.highOrder & 0xFFFF) + (msw >>> 16);\n      msw = (x.highOrder >>> 16) + (y.highOrder >>> 16) + (lsw >>> 16);\n      highOrder = (msw & 0xFFFF) << 16 | lsw & 0xFFFF;\n      return new int64(highOrder, lowOrder);\n    }\n\n    function safe_add_4(a, b, c, d) {\n      var lsw, msw, lowOrder, highOrder;\n      lsw = (a.lowOrder & 0xFFFF) + (b.lowOrder & 0xFFFF) + (c.lowOrder & 0xFFFF) + (d.lowOrder & 0xFFFF);\n      msw = (a.lowOrder >>> 16) + (b.lowOrder >>> 16) + (c.lowOrder >>> 16) + (d.lowOrder >>> 16) + (lsw >>> 16);\n      lowOrder = (msw & 0xFFFF) << 16 | lsw & 0xFFFF;\n      lsw = (a.highOrder & 0xFFFF) + (b.highOrder & 0xFFFF) + (c.highOrder & 0xFFFF) + (d.highOrder & 0xFFFF) + (msw >>> 16);\n      msw = (a.highOrder >>> 16) + (b.highOrder >>> 16) + (c.highOrder >>> 16) + (d.highOrder >>> 16) + (lsw >>> 16);\n      highOrder = (msw & 0xFFFF) << 16 | lsw & 0xFFFF;\n      return new int64(highOrder, lowOrder);\n    }\n\n    function safe_add_5(a, b, c, d, e) {\n      var lsw, msw, lowOrder, highOrder;\n      lsw = (a.lowOrder & 0xFFFF) + (b.lowOrder & 0xFFFF) + (c.lowOrder & 0xFFFF) + (d.lowOrder & 0xFFFF) + (e.lowOrder & 0xFFFF);\n      msw = (a.lowOrder >>> 16) + (b.lowOrder >>> 16) + (c.lowOrder >>> 16) + (d.lowOrder >>> 16) + (e.lowOrder >>> 16) + (lsw >>> 16);\n      lowOrder = (msw & 0xFFFF) << 16 | lsw & 0xFFFF;\n      lsw = (a.highOrder & 0xFFFF) + (b.highOrder & 0xFFFF) + (c.highOrder & 0xFFFF) + (d.highOrder & 0xFFFF) + (e.highOrder & 0xFFFF) + (msw >>> 16);\n      msw = (a.highOrder >>> 16) + (b.highOrder >>> 16) + (c.highOrder >>> 16) + (d.highOrder >>> 16) + (e.highOrder >>> 16) + (lsw >>> 16);\n      highOrder = (msw & 0xFFFF) << 16 | lsw & 0xFFFF;\n      return new int64(highOrder, lowOrder);\n    }\n\n    function maj(x, y, z) {\n      return new int64(x.highOrder & y.highOrder ^ x.highOrder & z.highOrder ^ y.highOrder & z.highOrder, x.lowOrder & y.lowOrder ^ x.lowOrder & z.lowOrder ^ y.lowOrder & z.lowOrder);\n    }\n\n    function ch(x, y, z) {\n      return new int64(x.highOrder & y.highOrder ^ ~x.highOrder & z.highOrder, x.lowOrder & y.lowOrder ^ ~x.lowOrder & z.lowOrder);\n    }\n\n    function rotr(x, n) {\n      if (n <= 32) {\n        return new int64(x.highOrder >>> n | x.lowOrder << 32 - n, x.lowOrder >>> n | x.highOrder << 32 - n);\n      } else {\n        return new int64(x.lowOrder >>> n | x.highOrder << 32 - n, x.highOrder >>> n | x.lowOrder << 32 - n);\n      }\n    }\n\n    function sigma0(x) {\n      var rotr28 = rotr(x, 28);\n      var rotr34 = rotr(x, 34);\n      var rotr39 = rotr(x, 39);\n      return new int64(rotr28.highOrder ^ rotr34.highOrder ^ rotr39.highOrder, rotr28.lowOrder ^ rotr34.lowOrder ^ rotr39.lowOrder);\n    }\n\n    function sigma1(x) {\n      var rotr14 = rotr(x, 14);\n      var rotr18 = rotr(x, 18);\n      var rotr41 = rotr(x, 41);\n      return new int64(rotr14.highOrder ^ rotr18.highOrder ^ rotr41.highOrder, rotr14.lowOrder ^ rotr18.lowOrder ^ rotr41.lowOrder);\n    }\n\n    function gamma0(x) {\n      var rotr1 = rotr(x, 1),\n          rotr8 = rotr(x, 8),\n          shr7 = shr(x, 7);\n      return new int64(rotr1.highOrder ^ rotr8.highOrder ^ shr7.highOrder, rotr1.lowOrder ^ rotr8.lowOrder ^ shr7.lowOrder);\n    }\n\n    function gamma1(x) {\n      var rotr19 = rotr(x, 19);\n      var rotr61 = rotr(x, 61);\n      var shr6 = shr(x, 6);\n      return new int64(rotr19.highOrder ^ rotr61.highOrder ^ shr6.highOrder, rotr19.lowOrder ^ rotr61.lowOrder ^ shr6.lowOrder);\n    }\n\n    function shr(x, n) {\n      if (n <= 32) {\n        return new int64(x.highOrder >>> n, x.lowOrder >>> n | x.highOrder << 32 - n);\n      } else {\n        return new int64(0, x.highOrder << 32 - n);\n      }\n    }\n\n    var str = utf8_encode(str);\n    var strlen = str.length * charsize;\n    str = str2binb(str);\n    str[strlen >> 5] |= 0x80 << 24 - strlen % 32;\n    str[(strlen + 128 >> 10 << 5) + 31] = strlen;\n\n    for (var i = 0; i < str.length; i += 32) {\n      a = H[0];\n      b = H[1];\n      c = H[2];\n      d = H[3];\n      e = H[4];\n      f = H[5];\n      g = H[6];\n      h = H[7];\n\n      for (var j = 0; j < 80; j++) {\n        if (j < 16) {\n          W[j] = new int64(str[j * 2 + i], str[j * 2 + i + 1]);\n        } else {\n          W[j] = safe_add_4(gamma1(W[j - 2]), W[j - 7], gamma0(W[j - 15]), W[j - 16]);\n        }\n\n        T1 = safe_add_5(h, sigma1(e), ch(e, f, g), K[j], W[j]);\n        T2 = safe_add_2(sigma0(a), maj(a, b, c));\n        h = g;\n        g = f;\n        f = e;\n        e = safe_add_2(d, T1);\n        d = c;\n        c = b;\n        b = a;\n        a = safe_add_2(T1, T2);\n      }\n\n      H[0] = safe_add_2(a, H[0]);\n      H[1] = safe_add_2(b, H[1]);\n      H[2] = safe_add_2(c, H[2]);\n      H[3] = safe_add_2(d, H[3]);\n      H[4] = safe_add_2(e, H[4]);\n      H[5] = safe_add_2(f, H[5]);\n      H[6] = safe_add_2(g, H[6]);\n      H[7] = safe_add_2(h, H[7]);\n    }\n\n    var binarray = [];\n\n    for (var i = 0; i < H.length; i++) {\n      binarray.push(H[i].highOrder);\n      binarray.push(H[i].lowOrder);\n    }\n\n    return binb2hex(binarray);\n  };\n  /**\r\n   * (c) jTools Input Mask\r\n   * https://github.com/paulhodel/jtools\r\n   *\r\n   * @author: Paul Hodel <paul.hodel@gmail.com>\r\n   * @description: Input mask\r\n   */\n\n\n  jSuites.mask = function () {\n    var obj = {};\n    var index = 0;\n    var values = [];\n    var pieces = [];\n\n    obj.run = function (value, mask, decimal) {\n      if (value && mask) {\n        if (!decimal) {\n          decimal = '.';\n        }\n\n        if (value == Number(value)) {\n          var number = ('' + value).split('.');\n          var value = number[0];\n          var valueDecimal = number[1];\n        } else {\n          value = '' + value;\n        }\n\n        index = 0;\n        values = []; // Create mask token\n\n        obj.prepare(mask); // Current value\n\n        var currentValue = value;\n\n        if (currentValue) {\n          // Checking current value\n          for (var i = 0; i < currentValue.length; i++) {\n            if (currentValue[i] != null) {\n              obj.process(currentValue[i]);\n            }\n          }\n        }\n\n        if (valueDecimal) {\n          obj.process(decimal);\n          var currentValue = valueDecimal;\n\n          if (currentValue) {\n            // Checking current value\n            for (var i = 0; i < currentValue.length; i++) {\n              if (currentValue[i] != null) {\n                obj.process(currentValue[i]);\n              }\n            }\n          }\n        } // Formatted value\n\n\n        return values.join('');\n      } else {\n        return '';\n      }\n    };\n\n    obj.apply = function (e) {\n      var mask = e.target.getAttribute('data-mask');\n\n      if (mask && e.keyCode > 46) {\n        index = 0;\n        values = []; // Create mask token\n\n        obj.prepare(mask); // Current value\n\n        if (e.target.selectionStart < e.target.selectionEnd) {\n          var currentValue = e.target.value.substring(0, e.target.selectionStart);\n        } else {\n          var currentValue = e.target.value;\n        }\n\n        if (currentValue) {\n          // Checking current value\n          for (var i = 0; i < currentValue.length; i++) {\n            if (currentValue[i] != null) {\n              obj.process(currentValue[i]);\n            }\n          }\n        } // New input\n\n\n        obj.process(obj.fromKeyCode(e)); // Update value to the element\n\n        e.target.value = values.join('');\n\n        if (pieces.length == values.length && pieces[pieces.length - 1].length == values[values.length - 1].length) {\n          e.target.setAttribute('data-completed', 'true');\n        } else {\n          e.target.setAttribute('data-completed', 'false');\n        } // Prevent default\n\n\n        e.preventDefault();\n      }\n    };\n    /**\r\n     * Process inputs and save to values\r\n     */\n\n\n    obj.process = function (input) {\n      do {\n        if (pieces[index] == 'mm') {\n          if (values[index] == null || values[index] == '') {\n            if (parseInt(input) > 1 && parseInt(input) < 10) {\n              values[index] = '0' + input;\n              index++;\n              return true;\n            } else if (parseInt(input) < 10) {\n              values[index] = input;\n              return true;\n            } else {\n              return false;\n            }\n          } else {\n            if (values[index] == 1 && values[index] < 2 && parseInt(input) < 3) {\n              values[index] += input;\n              index++;\n              return true;\n            } else if (values[index] == 0 && values[index] < 10) {\n              values[index] += input;\n              index++;\n              return true;\n            } else {\n              return false;\n            }\n          }\n        } else if (pieces[index] == 'dd') {\n          if (values[index] == null || values[index] == '') {\n            if (parseInt(input) > 3 && parseInt(input) < 10) {\n              values[index] = '0' + input;\n              index++;\n              return true;\n            } else if (parseInt(input) < 10) {\n              values[index] = input;\n              return true;\n            } else {\n              return false;\n            }\n          } else {\n            if (values[index] == 3 && parseInt(input) < 2) {\n              values[index] += input;\n              index++;\n              return true;\n            } else if (values[index] < 3 && parseInt(input) < 10) {\n              values[index] += input;\n              index++;\n              return true;\n            } else {\n              return false;\n            }\n          }\n        } else if (pieces[index] == 'hh24') {\n          if (values[index] == null || values[index] == '') {\n            if (parseInt(input) > 2 && parseInt(input) < 10) {\n              values[index] = '0' + input;\n              index++;\n              return true;\n            } else if (parseInt(input) < 10) {\n              values[index] = input;\n              return true;\n            } else {\n              return false;\n            }\n          } else {\n            if (values[index] == 2 && parseInt(input) < 4) {\n              values[index] += input;\n              index++;\n              return true;\n            } else if (values[index] < 2 && parseInt(input) < 10) {\n              values[index] += input;\n              index++;\n              return true;\n            } else {\n              return false;\n            }\n          }\n        } else if (pieces[index] == 'hh') {\n          if (values[index] == null || values[index] == '') {\n            if (parseInt(input) > 1 && parseInt(input) < 10) {\n              values[index] = '0' + input;\n              index++;\n              return true;\n            } else if (parseInt(input) < 10) {\n              values[index] = input;\n              return true;\n            } else {\n              return false;\n            }\n          } else {\n            if (values[index] == 1 && parseInt(input) < 3) {\n              values[index] += input;\n              index++;\n              return true;\n            } else if (values[index] < 1 && parseInt(input) < 10) {\n              values[index] += input;\n              index++;\n              return true;\n            } else {\n              return false;\n            }\n          }\n        } else if (pieces[index] == 'mi' || pieces[index] == 'ss') {\n          if (values[index] == null || values[index] == '') {\n            if (parseInt(input) > 5 && parseInt(input) < 10) {\n              values[index] = '0' + input;\n              index++;\n              return true;\n            } else if (parseInt(input) < 10) {\n              values[index] = input;\n              return true;\n            } else {\n              return false;\n            }\n          } else {\n            if (parseInt(input) < 10) {\n              values[index] += input;\n              index++;\n              return true;\n            } else {\n              return false;\n            }\n          }\n        } else if (pieces[index] == 'yy' || pieces[index] == 'yyyy') {\n          if (parseInt(input) < 10) {\n            if (values[index] == null || values[index] == '') {\n              values[index] = input;\n            } else {\n              values[index] += input;\n            }\n\n            if (values[index].length == pieces[index].length) {\n              index++;\n            }\n\n            return true;\n          } else {\n            return false;\n          }\n        } else if (pieces[index] == '#' || pieces[index] == '#.##' || pieces[index] == '#,##' || pieces[index] == '# ##') {\n          if (input.match(/[0-9]/g)) {\n            if (pieces[index] == '#.##') {\n              var separator = '.';\n            } else if (pieces[index] == '#,##') {\n              var separator = ',';\n            } else if (pieces[index] == '# ##') {\n              var separator = ' ';\n            } else {\n              var separator = '';\n            }\n\n            if (values[index] == null || values[index] == '') {\n              values[index] = input;\n            } else {\n              values[index] += input;\n\n              if (separator) {\n                values[index] = values[index].match(/[0-9]/g).join('');\n                var t = [];\n                var s = 0;\n\n                for (var j = values[index].length - 1; j >= 0; j--) {\n                  t.push(values[index][j]);\n                  s++;\n\n                  if (!(s % 3)) {\n                    t.push(separator);\n                  }\n                }\n\n                t = t.reverse();\n                values[index] = t.join('');\n\n                if (values[index].substr(0, 1) == separator) {\n                  values[index] = values[index].substr(1);\n                }\n              }\n            }\n\n            return true;\n          } else {\n            if (pieces[index] == '#.##' && input == '.') {// Do nothing\n            } else if (pieces[index] == '#,##' && input == ',') {// Do nothing\n            } else if (pieces[index] == '# ##' && input == ' ') {// Do nothing\n            } else {\n              if (values[index]) {\n                index++;\n\n                if (pieces[index]) {\n                  if (pieces[index] == input) {\n                    values[index] = input;\n                    return true;\n                  } else {\n                    if (pieces[index] == '0' && pieces[index + 1] == input) {\n                      index++;\n                      values[index] = input;\n                      return true;\n                    }\n                  }\n                }\n              }\n            }\n\n            return false;\n          }\n        } else if (pieces[index] == '0') {\n          if (input.match(/[0-9]/g)) {\n            values[index] = input;\n            index++;\n            return true;\n          } else {\n            return false;\n          }\n        } else if (pieces[index] == 'a') {\n          if (input.match(/[a-zA-Z]/g)) {\n            values[index] = input;\n            index++;\n            return true;\n          } else {\n            return false;\n          }\n        } else {\n          if (pieces[index] != null) {\n            if (pieces[index] == '\\\\a') {\n              var v = 'a';\n            } else if (pieces[index] == '\\\\0') {\n              var v = '0';\n            } else if (pieces[index] == '[-]') {\n              if (input == '-' || input == '+') {\n                var v = input;\n              } else {\n                var v = ' ';\n              }\n            } else {\n              var v = pieces[index];\n            }\n\n            values[index] = v;\n\n            if (input == v) {\n              index++;\n              return true;\n            }\n          }\n        }\n\n        index++;\n      } while (pieces[index]);\n    };\n    /**\r\n     * Create tokens for the mask\r\n     */\n\n\n    obj.prepare = function (mask) {\n      pieces = [];\n\n      for (var i = 0; i < mask.length; i++) {\n        if (mask[i].match(/[0-9]|[a-z]|\\\\/g)) {\n          if (mask[i] == 'y' && mask[i + 1] == 'y' && mask[i + 2] == 'y' && mask[i + 3] == 'y') {\n            pieces.push('yyyy');\n            i += 3;\n          } else if (mask[i] == 'y' && mask[i + 1] == 'y') {\n            pieces.push('yy');\n            i++;\n          } else if (mask[i] == 'm' && mask[i + 1] == 'm' && mask[i + 2] == 'm' && mask[i + 3] == 'm') {\n            pieces.push('mmmm');\n            i += 3;\n          } else if (mask[i] == 'm' && mask[i + 1] == 'm' && mask[i + 2] == 'm') {\n            pieces.push('mmm');\n            i += 2;\n          } else if (mask[i] == 'm' && mask[i + 1] == 'm') {\n            pieces.push('mm');\n            i++;\n          } else if (mask[i] == 'd' && mask[i + 1] == 'd') {\n            pieces.push('dd');\n            i++;\n          } else if (mask[i] == 'h' && mask[i + 1] == 'h' && mask[i + 2] == '2' && mask[i + 3] == '4') {\n            pieces.push('hh24');\n            i += 3;\n          } else if (mask[i] == 'h' && mask[i + 1] == 'h') {\n            pieces.push('hh');\n            i++;\n          } else if (mask[i] == 'm' && mask[i + 1] == 'i') {\n            pieces.push('mi');\n            i++;\n          } else if (mask[i] == 's' && mask[i + 1] == 's') {\n            pieces.push('ss');\n            i++;\n          } else if (mask[i] == 'a' && mask[i + 1] == 'm') {\n            pieces.push('am');\n            i++;\n          } else if (mask[i] == 'p' && mask[i + 1] == 'm') {\n            pieces.push('pm');\n            i++;\n          } else if (mask[i] == '\\\\' && mask[i + 1] == '0') {\n            pieces.push('\\\\0');\n            i++;\n          } else if (mask[i] == '\\\\' && mask[i + 1] == 'a') {\n            pieces.push('\\\\a');\n            i++;\n          } else {\n            pieces.push(mask[i]);\n          }\n        } else {\n          if (mask[i] == '#' && mask[i + 1] == '.' && mask[i + 2] == '#' && mask[i + 3] == '#') {\n            pieces.push('#.##');\n            i += 3;\n          } else if (mask[i] == '#' && mask[i + 1] == ',' && mask[i + 2] == '#' && mask[i + 3] == '#') {\n            pieces.push('#,##');\n            i += 3;\n          } else if (mask[i] == '#' && mask[i + 1] == ' ' && mask[i + 2] == '#' && mask[i + 3] == '#') {\n            pieces.push('# ##');\n            i += 3;\n          } else if (mask[i] == '[' && mask[i + 1] == '-' && mask[i + 2] == ']') {\n            pieces.push('[-]');\n            i += 2;\n          } else {\n            pieces.push(mask[i]);\n          }\n        }\n      }\n    };\n    /** \r\n     * Thanks for the collaboration\r\n     */\n\n\n    obj.fromKeyCode = function (e) {\n      var _to_ascii = {\n        '188': '44',\n        '109': '45',\n        '190': '46',\n        '191': '47',\n        '192': '96',\n        '220': '92',\n        '222': '39',\n        '221': '93',\n        '219': '91',\n        '173': '45',\n        '187': '61',\n        //IE Key codes\n        '186': '59',\n        //IE Key codes\n        '189': '45' //IE Key codes\n\n      };\n      var shiftUps = {\n        \"96\": \"~\",\n        \"49\": \"!\",\n        \"50\": \"@\",\n        \"51\": \"#\",\n        \"52\": \"$\",\n        \"53\": \"%\",\n        \"54\": \"^\",\n        \"55\": \"&\",\n        \"56\": \"*\",\n        \"57\": \"(\",\n        \"48\": \")\",\n        \"45\": \"_\",\n        \"61\": \"+\",\n        \"91\": \"{\",\n        \"93\": \"}\",\n        \"92\": \"|\",\n        \"59\": \":\",\n        \"39\": \"\\\"\",\n        \"44\": \"<\",\n        \"46\": \">\",\n        \"47\": \"?\"\n      };\n      var c = e.which;\n\n      if (_to_ascii.hasOwnProperty(c)) {\n        c = _to_ascii[c];\n      }\n\n      if (!e.shiftKey && c >= 65 && c <= 90) {\n        c = String.fromCharCode(c + 32);\n      } else if (e.shiftKey && shiftUps.hasOwnProperty(c)) {\n        c = shiftUps[c];\n      } else if (96 <= c && c <= 105) {\n        c = String.fromCharCode(c - 48);\n      } else {\n        c = String.fromCharCode(c);\n      }\n\n      return c;\n    };\n\n    return obj;\n  }();\n\n  jSuites.mobile = function (el, options) {\n    var obj = {};\n    obj.options = {};\n\n    if (jSuites.el) {\n      jSuites.el.addEventListener('mousedown', function (e) {\n        if (e.target.classList.contains('option-title')) {\n          if (e.target.classList.contains('selected')) {\n            e.target.classList.remove('selected');\n          } else {\n            e.target.classList.add('selected');\n          }\n        }\n      });\n    }\n\n    return obj;\n  }();\n\n  jSuites.pages = function () {\n    var container = null;\n    var current = null; // Create a page\n\n    var createPage = function createPage(options, callback) {\n      // Create page\n      var page = document.createElement('div');\n      page.classList.add('page'); // Always hidden\n\n      page.style.display = 'none'; // Keep options\n\n      page.options = options ? options : {};\n\n      if (!current) {\n        container.appendChild(page);\n      } else {\n        container.insertBefore(page, current.nextSibling);\n      }\n\n      jSuites.ajax({\n        url: page.options.url,\n        method: 'GET',\n        success: function success(result) {\n          // Push to refresh controls\n          jSuites.refresh(page, page.options.onpush); // Open page\n\n          page.innerHTML = result; // Get javascript\n\n          var script = page.getElementsByTagName('script'); // Run possible inline scripts\n\n          for (var i = 0; i < script.length; i++) {\n            // Get type\n            var type = script[i].getAttribute('type');\n\n            if (!type || type == 'text/javascript') {\n              eval(script[i].innerHTML);\n            }\n          } // Set title\n\n\n          page.setTitle = function (text) {\n            this.children[0].children[0].children[1].innerHTML = text;\n          }; // Show page\n\n\n          if (!page.options.closed) {\n            showPage(page);\n          } // Onload callback\n\n\n          if (typeof page.options.onload == 'function') {\n            page.options.onload(page);\n          } // Force callback\n\n\n          if (typeof callback == 'function') {\n            callback(page);\n          }\n        }\n      });\n      return page;\n    };\n\n    var showPage = function showPage(page, ignoreHistory, callback) {\n      if (current) {\n        if (current == page) {\n          current = page;\n        } else {\n          // Keep scroll in the top\n          window.scrollTo({\n            top: 0\n          }); // Show page\n\n          page.style.display = '';\n          var a = Array.prototype.indexOf.call(container.children, current);\n          var b = Array.prototype.indexOf.call(container.children, page); // Leave\n\n          if (typeof current.options.onleave == 'function') {\n            current.options.onleave(current, page, ignoreHistory);\n          }\n\n          jSuites.slideLeft(container, a < b ? 0 : 1, function () {\n            current.style.display = 'none';\n            current = page;\n          }); // Enter\n\n          if (typeof page.options.onenter == 'function') {\n            page.options.onenter(page, current, ignoreHistory);\n          }\n        }\n      } else {\n        // Show\n        page.style.display = ''; // Keep current\n\n        current = page; // Enter\n\n        if (typeof page.options.onenter == 'function') {\n          page.options.onenter(page);\n        }\n      } // Add history\n\n\n      if (!ignoreHistory) {\n        // Add history\n        window.history.pushState({\n          route: page.options.route\n        }, page.options.title, page.options.route);\n      } // Callback\n\n\n      if (typeof callback == 'function') {\n        callback(page);\n      }\n    }; // Init method\n\n\n    var obj = function obj(route, mixed) {\n      // Create page container\n      if (!container) {\n        container = document.querySelector('.pages');\n\n        if (!container) {\n          container = document.createElement('div');\n          container.className = 'pages';\n        } // Append container to the application\n\n\n        if (jSuites.el) {\n          jSuites.el.appendChild(container);\n        } else {\n          document.body.appendChild(container);\n        }\n      }\n\n      if (!obj.pages[route]) {\n        if (!route) {\n          alert('Error, no route provided');\n        } else {\n          if (typeof mixed == 'function') {\n            var options = {};\n            var callback = mixed;\n          } else {\n            // Page options\n            var options = mixed ? mixed : {};\n          } // Closed\n\n\n          options.closed = mixed && mixed.closed ? 1 : 0; // Keep Route\n\n          options.route = route; // New page url\n\n          if (!options.url) {\n            var routePath = route.split('#');\n            options.url = jSuites.pages.path + routePath[0] + '.html';\n          } // Title\n\n\n          if (!options.title) {\n            options.title = 'Untitled';\n          } // Create new page\n\n\n          obj.pages[route] = createPage(options, callback ? callback : null);\n        }\n      } else {\n        // Update config\n        if (mixed) {\n          // History\n          var ignoreHistory = 0;\n\n          if (typeof mixed == 'function') {\n            var callback = mixed;\n          } else {\n            if (typeof mixed.onenter == 'function') {\n              obj.pages[route].options.onenter = mixed.onenter;\n            }\n\n            if (typeof mixed.onleave == 'function') {\n              obj.pages[route].options.onleave = mixed.onleave;\n            } // Ignore history\n\n\n            ignoreHistory = mixed.ignoreHistory ? 1 : 0;\n          }\n        }\n\n        showPage(obj.pages[route], ignoreHistory, callback ? callback : null);\n      }\n    };\n\n    obj.pages = {}; // Get page\n\n    obj.get = function (route) {\n      if (obj.pages[route]) {\n        return obj.pages[route];\n      }\n    };\n\n    obj.getContainer = function () {\n      return container;\n    };\n\n    obj.destroy = function () {\n      // Current is null\n      current = null; // Destroy containers\n\n      obj.pages = {}; // Reset container\n\n      if (container) {\n        container.innerHTML = '';\n      }\n    };\n\n    return obj;\n  }(); // Path\n\n\n  jSuites.pages.path = 'pages'; // Panel\n\n  jSuites.panel = function () {\n    // No initial panel declared\n    var panel = null;\n\n    var obj = function obj(route) {\n      if (!panel) {\n        obj.create(jSuites.pages.path + route + '.html');\n      } // Show panel\n\n\n      panel.style.display = ''; // Add animation\n\n      if (panel.classList.contains('panel-left')) {\n        jSuites.slideLeft(panel, 1);\n      } else {\n        jSuites.slideRight(panel, 1);\n      }\n    };\n\n    obj.create = function (route) {\n      if (!panel) {\n        // Create element\n        panel = document.createElement('div');\n        panel.classList.add('panel');\n        panel.classList.add('panel-left');\n        panel.style.display = 'none'; // Bind to the app\n\n        if (jSuites.el) {\n          jSuites.el.appendChild(panel);\n        } else {\n          document.body.appendChild(panel);\n        }\n      } // Remote content\n\n\n      if (route) {\n        var url = jSuites.pages.path + route + '.html';\n        jSuites.ajax({\n          url: url,\n          method: 'GET',\n          success: function success(result) {\n            // Set content\n            panel.innerHTML = result; // Get javascript\n\n            var script = panel.getElementsByTagName('script'); // Run possible inline scripts\n\n            for (var i = 0; i < script.length; i++) {\n              // Get type\n              var type = script[i].getAttribute('type');\n\n              if (!type || type == 'text/javascript') {\n                eval(script[i].innerHTML);\n              }\n            }\n          }\n        });\n      }\n    };\n\n    obj.close = function () {\n      if (panel) {\n        // Animation\n        if (panel.classList.contains('panel-left')) {\n          jSuites.slideLeft(panel, 0, function () {\n            panel.style.display = 'none';\n          });\n        } else {\n          jSuites.slideRight(panel, 0, function () {\n            panel.style.display = 'none';\n          });\n        }\n      }\n    };\n\n    obj.get = function () {\n      return panel;\n    };\n\n    obj.destroy = function () {\n      panel.remove();\n      panel = null;\n    };\n\n    return obj;\n  }();\n\n  jSuites.toolbar = function (el, options) {\n    var obj = {};\n    obj.options = options;\n\n    obj.selectItem = function (element) {\n      var elements = toolbarContent.children;\n\n      for (var i = 0; i < elements.length; i++) {\n        elements[i].classList.remove('selected');\n      }\n\n      element.classList.add('selected');\n    };\n\n    obj.hide = function () {\n      jSuites.slideBottom(toolbar, 0, function () {\n        toolbar.style.display = 'none';\n      });\n    };\n\n    obj.show = function () {\n      toolbar.style.display = '';\n      jSuites.slideBottom(toolbar, 1);\n    };\n\n    obj.get = function () {\n      return toolbar;\n    };\n\n    obj.setBadge = function (index, value) {\n      toolbarContent.children[index].children[1].firstChild.innerHTML = value;\n    };\n\n    obj.destroy = function () {\n      toolbar.remove();\n      toolbar = null;\n    };\n\n    var toolbar = document.createElement('div');\n    toolbar.classList.add('jtoolbar');\n\n    toolbar.onclick = function (e) {\n      var element = jSuites.getElement(e.target, 'jtoolbar-item');\n\n      if (element) {\n        obj.selectItem(element);\n      }\n    };\n\n    var toolbarContent = document.createElement('div');\n    toolbar.appendChild(toolbarContent);\n\n    var _loop = function _loop() {\n      var toolbarItem = document.createElement('div');\n      toolbarItem.classList.add('jtoolbar-item');\n\n      if (options.items[i].route) {\n        toolbarItem.setAttribute('data-href', options.items[i].route);\n        jSuites.pages(options.items[i].route, {\n          closed: true,\n          onenter: function onenter() {\n            obj.selectItem(toolbarItem);\n          }\n        });\n      }\n\n      if (options.items[i].icon) {\n        toolbarIcon = document.createElement('i');\n        toolbarIcon.classList.add('material-icons');\n        toolbarIcon.innerHTML = options.items[i].icon;\n        toolbarItem.appendChild(toolbarIcon);\n      }\n\n      toolbarBadge = document.createElement('div');\n      toolbarBadge.classList.add('jbadge');\n      toolbarBadgeContent = document.createElement('div');\n      toolbarBadgeContent.innerHTML = options.items[i].badge ? options.items[i].badge : '';\n      toolbarBadge.appendChild(toolbarBadgeContent);\n      toolbarItem.appendChild(toolbarBadge);\n\n      if (options.items[i].title) {\n        toolbarTitle = document.createElement('span');\n        toolbarTitle.innerHTML = options.items[i].title;\n        toolbarItem.appendChild(toolbarTitle);\n      }\n\n      toolbarContent.appendChild(toolbarItem);\n    };\n\n    for (var i = 0; i < options.items.length; i++) {\n      var toolbarIcon;\n      var toolbarBadge;\n      var toolbarBadgeContent;\n      var toolbarTitle;\n\n      _loop();\n    }\n\n    el.toolbar = obj;\n    el.appendChild(toolbar);\n    return obj;\n  };\n\n  jSuites.actionsheet = function () {\n    var actionsheet = document.createElement('div');\n    actionsheet.className = 'jactionsheet';\n    actionsheet.style.display = 'none';\n    var actionContent = document.createElement('div');\n    actionContent.className = 'jactionsheet-content';\n    actionsheet.appendChild(actionContent);\n\n    var obj = function obj(options) {\n      if (options) {\n        obj.options = options;\n      } // Reset container\n\n\n      actionContent.innerHTML = ''; // Create new elements\n\n      for (var i = 0; i < obj.options.length; i++) {\n        var actionGroup = document.createElement('div');\n        actionGroup.className = 'jactionsheet-group';\n\n        for (var j = 0; j < obj.options[i].length; j++) {\n          var v = obj.options[i][j];\n          var actionItem = document.createElement('div');\n          var actionInput = document.createElement('input');\n          actionInput.type = 'button';\n          actionInput.value = v.title;\n\n          if (v.className) {\n            actionInput.className = v.className;\n          }\n\n          if (v.onclick) {\n            actionInput.onclick = v.onclick;\n          }\n\n          if (v.action == 'cancel') {\n            actionInput.style.color = 'red';\n          }\n\n          actionItem.appendChild(actionInput);\n          actionGroup.appendChild(actionItem);\n        }\n\n        actionContent.appendChild(actionGroup);\n      } // Show\n\n\n      actionsheet.style.display = ''; // Append\n\n      jSuites.el.appendChild(actionsheet); // Animation\n\n      jSuites.slideBottom(actionContent, true);\n    };\n\n    obj.close = function () {\n      if (actionsheet.style.display != 'none') {\n        // Remove any existing actionsheet\n        jSuites.slideBottom(actionContent, false, function () {\n          actionsheet.remove();\n          actionsheet.style.display = 'none';\n        });\n      }\n    };\n\n    var mouseUp = function mouseUp(e) {\n      obj.close();\n    };\n\n    actionsheet.addEventListener('mouseup', mouseUp);\n    obj.options = {};\n    return obj;\n  }();\n  /**\r\n   * (c) jSuites modal\r\n   * https://github.com/paulhodel/jsuites\r\n   *\r\n   * @author: Paul Hodel <paul.hodel@gmail.com>\r\n   * @description: Modal\r\n   */\n\n\n  jSuites.modal = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      url: null,\n      onopen: null,\n      onclose: null,\n      closed: false,\n      width: null,\n      height: null,\n      title: null\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Title\n\n\n    if (!obj.options.title && el.getAttribute('title')) {\n      obj.options.title = el.getAttribute('title');\n    }\n\n    var temp = document.createElement('div');\n\n    for (var i = 0; i < el.children.length; i++) {\n      temp.appendChild(el.children[i]);\n    }\n\n    obj.content = document.createElement('div');\n    obj.content.className = 'jmodal_content';\n    obj.content.innerHTML = el.innerHTML;\n\n    for (var i = 0; i < temp.children.length; i++) {\n      obj.content.appendChild(temp.children[i]);\n    }\n\n    obj.container = document.createElement('div');\n    obj.container.className = 'jmodal';\n    obj.container.appendChild(obj.content);\n\n    if (obj.options.width) {\n      obj.container.style.width = obj.options.width;\n    }\n\n    if (obj.options.height) {\n      obj.container.style.height = obj.options.height;\n    }\n\n    if (obj.options.title) {\n      obj.container.setAttribute('title', obj.options.title);\n    } else {\n      obj.container.classList.add('no-title');\n    }\n\n    el.innerHTML = '';\n    el.style.display = 'none';\n    el.appendChild(obj.container); // Backdrop\n\n    var backdrop = document.createElement('div');\n    backdrop.className = 'jmodal_backdrop';\n    el.appendChild(backdrop);\n\n    obj.open = function () {\n      el.style.display = 'block'; // Fullscreen\n\n      var rect = obj.container.getBoundingClientRect();\n\n      if (jSuites.getWindowWidth() < rect.width) {\n        obj.container.style.top = '';\n        obj.container.style.left = '';\n        obj.container.classList.add('jmodal_fullscreen');\n        jSuites.slideBottom(obj.container, 1);\n      } else {\n        backdrop.style.display = 'block';\n      } // Current\n\n\n      jSuites.modal.current = obj; // Event\n\n      if (typeof obj.options.onopen == 'function') {\n        obj.options.onopen(el, obj);\n      }\n    };\n\n    obj.resetPosition = function () {\n      obj.container.style.top = '';\n      obj.container.style.left = '';\n    };\n\n    obj.isOpen = function () {\n      return el.style.display != 'none' ? true : false;\n    };\n\n    obj.close = function () {\n      el.style.display = 'none'; // Backdrop\n\n      backdrop.style.display = ''; // Current\n\n      jSuites.modal.current = null; // Remove fullscreen class\n\n      obj.container.classList.remove('jmodal_fullscreen'); // Event\n\n      if (typeof obj.options.onclose == 'function') {\n        obj.options.onclose(el, obj);\n      }\n    };\n\n    if (!jSuites.modal.hasEvents) {\n      jSuites.modal.current = obj;\n\n      if ('ontouchstart' in document.documentElement === true) {\n        document.addEventListener(\"touchstart\", jSuites.modal.mouseDownControls);\n      } else {\n        document.addEventListener('mousedown', jSuites.modal.mouseDownControls);\n        document.addEventListener('mousemove', jSuites.modal.mouseMoveControls);\n        document.addEventListener('mouseup', jSuites.modal.mouseUpControls);\n      }\n\n      document.addEventListener('keydown', jSuites.modal.keyDownControls);\n      jSuites.modal.hasEvents = true;\n    }\n\n    if (obj.options.url) {\n      jSuites.ajax({\n        url: obj.options.url,\n        method: 'GET',\n        success: function success(data) {\n          obj.content.innerHTML = data;\n\n          if (!obj.options.closed) {\n            obj.open();\n          }\n        }\n      });\n    } else {\n      if (!obj.options.closed) {\n        obj.open();\n      }\n    } // Keep object available from the node\n\n\n    el.modal = obj;\n    return obj;\n  };\n\n  jSuites.modal.current = null;\n  jSuites.modal.position = null;\n\n  jSuites.modal.keyDownControls = function (e) {\n    if (e.which == 27) {\n      if (jSuites.modal.current) {\n        jSuites.modal.current.close();\n      }\n    }\n  };\n\n  jSuites.modal.mouseUpControls = function (e) {\n    if (jSuites.modal.current) {\n      jSuites.modal.current.container.style.cursor = 'auto';\n    }\n\n    jSuites.modal.position = null;\n  };\n\n  jSuites.modal.mouseMoveControls = function (e) {\n    if (jSuites.modal.current && jSuites.modal.position) {\n      if (e.which == 1 || e.which == 3) {\n        var position = jSuites.modal.position;\n        jSuites.modal.current.container.style.top = position[1] + (e.clientY - position[3]) + position[5] / 2 + 'px';\n        jSuites.modal.current.container.style.left = position[0] + (e.clientX - position[2]) + position[4] / 2 + 'px';\n        jSuites.modal.current.container.style.cursor = 'move';\n      } else {\n        jSuites.modal.current.container.style.cursor = 'auto';\n      }\n    }\n  };\n\n  jSuites.modal.mouseDownControls = function (e) {\n    jSuites.modal.position = [];\n\n    if (e.target.classList.contains('jmodal')) {\n      setTimeout(function () {\n        // Get target info\n        var rect = e.target.getBoundingClientRect();\n\n        if (e.changedTouches && e.changedTouches[0]) {\n          var x = e.changedTouches[0].clientX;\n          var y = e.changedTouches[0].clientY;\n        } else {\n          var x = e.clientX;\n          var y = e.clientY;\n        }\n\n        if (rect.width - (x - rect.left) < 50 && y - rect.top < 50) {\n          setTimeout(function () {\n            jSuites.modal.current.close();\n          }, 100);\n        } else {\n          if (e.target.getAttribute('title') && y - rect.top < 50) {\n            if (document.selection) {\n              document.selection.empty();\n            } else if (window.getSelection) {\n              window.getSelection().removeAllRanges();\n            }\n\n            jSuites.modal.position = [rect.left, rect.top, e.clientX, e.clientY, rect.width, rect.height];\n          }\n        }\n      }, 100);\n    }\n  };\n\n  jSuites.notification = function (options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      icon: null,\n      name: 'Notification',\n      date: null,\n      title: null,\n      message: null,\n      timeout: 4000,\n      autoHide: true,\n      closeable: true\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    }\n\n    var notification = document.createElement('div');\n    notification.className = 'jnotification';\n    var notificationContainer = document.createElement('div');\n    notificationContainer.className = 'jnotification-container';\n    notification.appendChild(notificationContainer);\n    var notificationHeader = document.createElement('div');\n    notificationHeader.className = 'jnotification-header';\n    notificationContainer.appendChild(notificationHeader);\n    var notificationImage = document.createElement('div');\n    notificationImage.className = 'jnotification-image';\n    notificationHeader.appendChild(notificationImage);\n\n    if (obj.options.icon) {\n      var notificationIcon = document.createElement('img');\n      notificationIcon.src = obj.options.icon;\n      notificationImage.appendChild(notificationIcon);\n    }\n\n    var notificationName = document.createElement('div');\n    notificationName.className = 'jnotification-name';\n    notificationName.innerHTML = obj.options.name;\n    notificationHeader.appendChild(notificationName);\n\n    if (obj.options.closeable == true) {\n      var notificationClose = document.createElement('div');\n      notificationClose.className = 'jnotification-close';\n\n      notificationClose.onclick = function () {\n        obj.hide();\n      };\n\n      notificationHeader.appendChild(notificationClose);\n    }\n\n    var notificationDate = document.createElement('div');\n    notificationDate.className = 'jnotification-date';\n    notificationHeader.appendChild(notificationDate);\n    var notificationContent = document.createElement('div');\n    notificationContent.className = 'jnotification-content';\n    notificationContainer.appendChild(notificationContent);\n\n    if (obj.options.title) {\n      var notificationTitle = document.createElement('div');\n      notificationTitle.className = 'jnotification-title';\n      notificationTitle.innerHTML = obj.options.title;\n      notificationContent.appendChild(notificationTitle);\n    }\n\n    var notificationMessage = document.createElement('div');\n    notificationMessage.className = 'jnotification-message';\n    notificationMessage.innerHTML = obj.options.message;\n    notificationContent.appendChild(notificationMessage);\n\n    obj.show = function () {\n      document.body.appendChild(notification);\n\n      if (jSuites.getWindowWidth() > 800) {\n        jSuites.fadeIn(notification);\n      } else {\n        jSuites.slideTop(notification, 1);\n      }\n    };\n\n    obj.hide = function () {\n      if (jSuites.getWindowWidth() > 800) {\n        jSuites.fadeOut(notification, function () {\n          notification.parentNode.removeChild(notification);\n        });\n      } else {\n        jSuites.slideTop(notification, 0, function () {\n          notification.parentNode.removeChild(notification);\n        });\n      }\n    };\n\n    obj.show();\n\n    if (obj.options.autoHide == true) {\n      setTimeout(function () {\n        obj.hide();\n      }, obj.options.timeout);\n    }\n\n    if (jSuites.getWindowWidth() < 800) {\n      notification.addEventListener(\"swipeup\", function (e) {\n        obj.hide();\n        e.preventDefault();\n        e.stopPropagation();\n      });\n    }\n\n    return obj;\n  };\n\n  jSuites.rating = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      number: 5,\n      value: 0,\n      tooltip: ['Very bad', 'Bad', 'Average', 'Good', 'Very good'],\n      onchange: null\n    }; // Loop through the initial configuration\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Class\n\n\n    el.classList.add('jrating'); // Add elements\n\n    for (var i = 0; i < obj.options.number; i++) {\n      var div = document.createElement('div');\n      div.setAttribute('data-index', i + 1);\n      div.setAttribute('title', obj.options.tooltip[i]);\n      el.appendChild(div);\n    } // Set value\n\n\n    obj.setValue = function (index) {\n      for (var i = 0; i < obj.options.number; i++) {\n        if (i < index) {\n          el.children[i].classList.add('jrating-selected');\n        } else {\n          el.children[i].classList.remove('jrating-over');\n          el.children[i].classList.remove('jrating-selected');\n        }\n      }\n\n      obj.options.value = index;\n\n      if (typeof obj.options.onchange == 'function') {\n        obj.options.onchange(el, index);\n      }\n    };\n\n    obj.getValue = function () {\n      return obj.options.value;\n    };\n\n    if (obj.options.value) {\n      for (var i = 0; i < obj.options.number; i++) {\n        if (i < obj.options.value) {\n          el.children[i].classList.add('jrating-selected');\n        }\n      }\n    } // Events\n\n\n    el.addEventListener(\"click\", function (e) {\n      var index = e.target.getAttribute('data-index');\n\n      if (index != undefined) {\n        if (index == obj.options.value) {\n          obj.setValue(0);\n        } else {\n          obj.setValue(index);\n        }\n      }\n    });\n    el.addEventListener(\"mouseover\", function (e) {\n      var index = e.target.getAttribute('data-index');\n\n      for (var i = 0; i < obj.options.number; i++) {\n        if (i < index) {\n          el.children[i].classList.add('jrating-over');\n        } else {\n          el.children[i].classList.remove('jrating-over');\n        }\n      }\n    });\n    el.addEventListener(\"mouseout\", function (e) {\n      for (var i = 0; i < obj.options.number; i++) {\n        el.children[i].classList.remove('jrating-over');\n      }\n    });\n    el.rating = obj;\n    return obj;\n  };\n  /**\r\n   * (c) Image slider\r\n   * https://github.com/paulhodel/jtools\r\n   *\r\n   * @author: Paul Hodel <paul.hodel@gmail.com>\r\n   * @description: Image Slider\r\n   */\n\n\n  jSuites.slider = function (el, options) {\n    var obj = {};\n    obj.options = {};\n    obj.currentImage = null;\n\n    if (options) {\n      obj.options = options;\n    } // Items\n\n\n    obj.options.items = [];\n\n    if (!el.classList.contains('jslider')) {\n      el.classList.add('jslider'); // Create container\n\n      var container = document.createElement('div');\n      container.className = 'jslider-container'; // Move children inside\n\n      if (el.children.length > 0) {\n        // Keep children items\n        for (var i = 0; i < el.children.length; i++) {\n          obj.options.items.push(el.children[i]);\n        }\n      }\n\n      if (obj.options.items.length > 0) {\n        for (var i = 0; i < obj.options.items.length; i++) {\n          obj.options.items[i].classList.add('jfile');\n          var index = obj.options.items[i].src.lastIndexOf('/');\n\n          if (index < 0) {\n            obj.options.items[i].setAttribute('data-name', obj.options.items[i].src);\n          } else {\n            obj.options.items[i].setAttribute('data-name', obj.options.items[i].src.substr(index + 1));\n          }\n\n          var index = obj.options.items[i].src.lastIndexOf('/');\n          container.appendChild(obj.options.items[i]);\n        }\n      }\n\n      el.appendChild(container); // Add close buttom\n\n      var close = document.createElement('div');\n      close.className = 'jslider-close';\n      close.innerHTML = '';\n\n      close.onclick = function () {\n        obj.close();\n      };\n\n      el.appendChild(close);\n    } else {\n      var container = el.querySelector('slider-container');\n    }\n\n    obj.show = function (target) {\n      if (!target) {\n        var target = container.children[0];\n      }\n\n      if (!container.classList.contains('jslider-preview')) {\n        container.classList.add('jslider-preview');\n        close.style.display = 'block';\n      } // Hide all images\n\n\n      for (var i = 0; i < container.children.length; i++) {\n        container.children[i].style.display = 'none';\n      } // Show clicked only\n\n\n      target.style.display = 'block'; // Is there any previous\n\n      if (target.previousSibling) {\n        container.classList.add('jslider-left');\n      } else {\n        container.classList.remove('jslider-left');\n      } // Is there any next\n\n\n      if (target.nextSibling) {\n        container.classList.add('jslider-right');\n      } else {\n        container.classList.remove('jslider-right');\n      }\n\n      obj.currentImage = target;\n    };\n\n    obj.open = function () {\n      obj.show(); // Event\n\n      if (typeof obj.options.onopen == 'function') {\n        obj.options.onopen(el);\n      }\n    };\n\n    obj.close = function () {\n      container.classList.remove('jslider-preview');\n      container.classList.remove('jslider-left');\n      container.classList.remove('jslider-right');\n\n      for (var i = 0; i < container.children.length; i++) {\n        container.children[i].style.display = '';\n      }\n\n      close.style.display = '';\n      obj.currentImage = null; // Event\n\n      if (typeof obj.options.onclose == 'function') {\n        obj.options.onclose(el);\n      }\n    };\n\n    obj.reset = function () {\n      container.innerHTML = '';\n    };\n\n    obj.addFile = function (v, ignoreEvents) {\n      var img = document.createElement('img');\n      img.setAttribute('data-lastmodified', v.lastmodified);\n      img.setAttribute('data-name', v.name);\n      img.setAttribute('data-size', v.size);\n      img.setAttribute('data-extension', v.extension);\n      img.setAttribute('data-cover', v.cover);\n      img.setAttribute('src', v.file);\n      img.className = 'jfile';\n      container.appendChild(img);\n      obj.options.items.push(img); // Onchange\n\n      if (!ignoreEvents) {\n        if (typeof obj.options.onchange == 'function') {\n          obj.options.onchange(el, v);\n        }\n      }\n    };\n\n    obj.addFiles = function (files) {\n      for (var i = 0; i < files.length; i++) {\n        obj.addFile(files[i]);\n      }\n    };\n\n    obj.next = function () {\n      if (obj.currentImage.nextSibling) {\n        obj.show(obj.currentImage.nextSibling);\n      }\n    };\n\n    obj.prev = function () {\n      if (obj.currentImage.previousSibling) {\n        obj.show(obj.currentImage.previousSibling);\n      }\n    };\n\n    obj.getData = function () {\n      return jSuites.getFiles(container);\n    }; // Append data\n\n\n    if (obj.options.data && obj.options.data.length) {\n      for (var i = 0; i < obj.options.data.length; i++) {\n        if (obj.options.data[i]) {\n          obj.addFile(obj.options.data[i]);\n        }\n      }\n    } // Allow insert\n\n\n    if (obj.options.allowAttachment) {\n      var attachmentInput = document.createElement('input');\n      attachmentInput.type = 'file';\n      attachmentInput.className = 'slider-attachment';\n      attachmentInput.setAttribute('accept', 'image/*');\n      attachmentInput.style.display = 'none';\n\n      attachmentInput.onchange = function () {\n        var reader = [];\n\n        for (var i = 0; i < this.files.length; i++) {\n          var type = this.files[i].type.split('/');\n\n          if (type[0] == 'image') {\n            var extension = this.files[i].name;\n            extension = extension.split('.');\n            extension = extension[extension.length - 1];\n            var file = {\n              size: this.files[i].size,\n              name: this.files[i].name,\n              extension: extension,\n              cover: 0,\n              lastmodified: this.files[i].lastModified\n            };\n            reader[i] = new FileReader();\n            reader[i].addEventListener(\"load\", function (e) {\n              file.file = e.target.result;\n              obj.addFile(file);\n            }, false);\n            reader[i].readAsDataURL(this.files[i]);\n          } else {\n            alert('The extension is not allowed');\n          }\n        }\n\n        ;\n      };\n\n      var attachmentIcon = document.createElement('i');\n      attachmentIcon.innerHTML = 'attachment';\n      attachmentIcon.className = 'jslider-attach material-icons';\n\n      attachmentIcon.onclick = function () {\n        jSuites.click(attachmentInput);\n      };\n\n      el.appendChild(attachmentInput);\n      el.appendChild(attachmentIcon);\n    } // Push to refresh\n\n\n    var longTouchTimer = null;\n\n    var mouseDown = function mouseDown(e) {\n      if (e.target.tagName == 'IMG') {\n        // Remove\n        var targetImage = e.target;\n        longTouchTimer = setTimeout(function () {\n          if (e.target.src.substr(0, 4) == 'data') {\n            e.target.remove();\n          } else {\n            if (e.target.classList.contains('jremove')) {\n              e.target.classList.remove('jremove');\n            } else {\n              e.target.classList.add('jremove');\n            }\n          } // Onchange\n\n\n          if (typeof obj.options.onchange == 'function') {\n            obj.options.onchange(el, e.target);\n          }\n        }, 1000);\n      }\n    };\n\n    var mouseUp = function mouseUp(e) {\n      if (longTouchTimer) {\n        clearTimeout(longTouchTimer);\n      } // Open slider\n\n\n      if (e.target.tagName == 'IMG') {\n        if (!e.target.classList.contains('jremove')) {\n          obj.show(e.target);\n        }\n      } else {\n        // Arrow controls\n        if (e.target.clientWidth - e.offsetX < 40) {\n          // Show next image\n          obj.next();\n        } else if (e.offsetX < 40) {\n          // Show previous image\n          obj.prev();\n        }\n      }\n    };\n\n    container.addEventListener('mousedown', mouseDown);\n    container.addEventListener('touchstart', mouseDown);\n    container.addEventListener('mouseup', mouseUp);\n    container.addEventListener('touchend', mouseUp); // Add global events\n\n    el.addEventListener(\"swipeleft\", function (e) {\n      obj.next();\n      e.preventDefault();\n      e.stopPropagation();\n    });\n    el.addEventListener(\"swiperight\", function (e) {\n      obj.prev();\n      e.preventDefault();\n      e.stopPropagation();\n    });\n    el.slider = obj;\n    return obj;\n  };\n  /**\n   * (c) jTools v1.0.1 - Element sorting\n   * https://github.com/paulhodel/jtools\n   *\n   * @author: Paul Hodel <paul.hodel@gmail.com>\n   * @description: Element drag and drop sorting\n   */\n\n\n  jSuites.sorting = function (el, options) {\n    el.classList.add('jsorting');\n    el.addEventListener('dragstart', function (e) {\n      e.target.classList.add('dragging');\n    });\n    el.addEventListener('dragover', function (e) {\n      e.preventDefault();\n\n      if (e.target.clientHeight / 2 > e.offsetY) {\n        e.path[0].style.borderTop = '1px dotted #ccc';\n        e.path[0].style.borderBottom = '';\n      } else {\n        e.path[0].style.borderTop = '';\n        e.path[0].style.borderBottom = '1px dotted #ccc';\n      }\n    });\n    el.addEventListener('dragleave', function (e) {\n      e.path[0].style.borderTop = '';\n      e.path[0].style.borderBottom = '';\n    });\n    el.addEventListener('dragend', function (e) {\n      e.path[1].querySelector('.dragging').classList.remove('dragging');\n    });\n    el.addEventListener('drop', function (e) {\n      var element = e.path[1].querySelector('.dragging');\n\n      if (e.target.clientHeight / 2 > e.offsetY) {\n        e.path[1].insertBefore(element, e.path[0]);\n      } else {\n        e.path[1].insertBefore(element, e.path[0].nextSibling);\n      }\n\n      e.path[0].style.borderTop = '';\n      e.path[0].style.borderBottom = '';\n    });\n\n    for (var i = 0; i < el.children.length; i++) {\n      el.children[i].setAttribute('draggable', 'true');\n    }\n\n    ;\n    return el;\n  };\n\n  jSuites.tabs = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      data: null,\n      onchange: null,\n      onload: null\n    }; // Loop through the initial configuration\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Class\n\n\n    el.classList.add('jtabs'); // Create from data\n\n    if (obj.options.data) {\n      // Make sure the component is blank\n      el.innerHTML = '';\n      var headers = document.createElement('div');\n      var content = document.createElement('div');\n      headers.classList.add('jtabs-headers');\n      content.classList.add('jtabs-content');\n      el.appendChild(headers);\n      el.appendChild(content);\n\n      for (var i = 0; i < obj.options.data.length; i++) {\n        var headersItem = document.createElement('div');\n        headers.appendChild(headersItem);\n        var contentItem = document.createElement('div');\n        content.appendChild(contentItem);\n        headersItem.innerHTML = obj.options.data[i].title;\n\n        if (obj.options.data[i].content) {\n          contentItem.innerHTML = obj.options.data[i].content;\n        } else if (obj.options.data[i].url) {\n          jSuites.ajax({\n            url: obj.options.data[i].url,\n            type: 'GET',\n            success: function success(result) {\n              contentItem.innerHTML = result;\n            },\n            complete: function complete() {\n              if (typeof obj.options.onload == 'function') {\n                obj.options.onload(el);\n              }\n            }\n          });\n        }\n      }\n    } else if (el.children[0] && el.children[1]) {\n      // Create from existing elements\n      var headers = el.children[0];\n      var content = el.children[1];\n      headers.classList.add('jtabs-headers');\n      content.classList.add('jtabs-content');\n    } // Border\n\n\n    var border = document.createElement('div');\n    border.className = 'jtabs-border';\n    el.appendChild(border);\n\n    var setBorder = function setBorder(index) {\n      var rect = headers.children[index].getBoundingClientRect();\n      border.style.width = rect.width + 'px';\n      border.style.top = rect.top + rect.height - 2 + 'px';\n      border.style.left = rect.left + 'px';\n    }; // Set value\n\n\n    obj.open = function (index) {\n      for (var i = 0; i < headers.children.length; i++) {\n        headers.children[i].classList.remove('jtabs-selected');\n\n        if (content.children[i]) {\n          content.children[i].classList.remove('jtabs-selected');\n        }\n      }\n\n      headers.children[index].classList.add('jtabs-selected');\n\n      if (content.children[index]) {\n        content.children[index].classList.add('jtabs-selected');\n      } // Set border\n\n\n      setTimeout(function () {\n        setBorder(index);\n      }, 10);\n    }; // Events\n\n\n    headers.addEventListener(\"click\", function (e) {\n      var index = Array.prototype.indexOf.call(headers.children, e.target);\n\n      if (index >= 0) {\n        obj.open(index);\n      }\n    });\n    obj.open(0);\n    el.tabs = obj;\n    return obj;\n  };\n\n  jSuites.tags = function (el, options) {\n    var obj = {};\n    obj.options = {};\n    /**\r\n     * @typedef {Object} defaults\r\n     * @property {(string|Array)} value - Initial value of the compontent\r\n     * @property {number} limit - Max number of tags inside the element\r\n     * @property {string} search - The URL for suggestions\r\n     * @property {string} placeholder - The default instruction text on the element\r\n     * @property {validation} validation - Method to validate the tags\r\n     * @property {requestCallback} onbeforechange - Method to be execute before any changes on the element\r\n     * @property {requestCallback} onchange - Method to be execute after any changes on the element\r\n     * @property {requestCallback} onfocus - Method to be execute when on focus\r\n     * @property {requestCallback} onblur - Method to be execute when on blur\r\n     * @property {requestCallback} onload - Method to be execute when the element is loaded\r\n     */\n\n    var defaults = {\n      value: null,\n      limit: null,\n      search: null,\n      placeholder: null,\n      validation: null,\n      onbeforechange: null,\n      onchange: null,\n      onfocus: null,\n      onblur: null,\n      onload: null,\n      colors: null\n    }; // Loop through though the default configuration\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    } // Search helpers\n\n\n    var searchContainer = null;\n    var searchTerms = null;\n    var searchIndex = 0;\n    var searchTimer = 0;\n    /**\r\n     * Add a new tag to the element\r\n     * @param {(?string|Array)} value - The value of the new element\r\n     */\n\n    obj.add = function (value) {\n      if (typeof obj.options.onbeforechange == 'function') {\n        var v = obj.options.onbeforechange(el, obj, value);\n\n        if (v != null) {\n          value = v;\n        }\n      } // Close search\n\n\n      if (searchContainer) {\n        searchContainer.style.display = '';\n      } // Get node\n\n\n      var node = getSelectionStart(); // Mix argument string or array\n\n      if (!value || typeof value == 'string') {\n        var div = document.createElement('div');\n        div.innerHTML = value ? value : '<br>';\n\n        if (node && node.parentNode.classList.contains('jtags')) {\n          el.insertBefore(div, node.nextSibling);\n        } else {\n          el.appendChild(div);\n        }\n      } else {\n        if (node && node.parentNode.classList.contains('jtags')) {\n          if (!node.innerText.replace(\"\\n\", \"\")) {\n            el.removeChild(node);\n          }\n        }\n\n        for (var i = 0; i < value.length; i++) {\n          var div = document.createElement('div');\n          div.innerHTML = value[i] ? value[i] : '<br>';\n          el.appendChild(div);\n        }\n\n        ;\n        var div = document.createElement('div');\n        div.innerHTML = '<br>';\n        el.appendChild(div);\n      } // Place caret\n\n\n      setTimeout(function () {\n        caret(div);\n      }, 0); // Filter\n\n      filter();\n\n      if (typeof obj.options.onchange == 'function') {\n        obj.options.onchange(el, obj, value ? value : '');\n      }\n    };\n    /**\r\n     * Get all tags in the element\r\n     * @return {Array} data - All tags as an array\r\n     */\n\n\n    obj.getData = function () {\n      var data = [];\n\n      for (var i = 0; i < el.children.length; i++) {\n        var value = obj.getValue(i);\n\n        if (value) {\n          var id = el.children[i].getAttribute('data-id');\n\n          if (!id) {\n            id = value;\n          }\n\n          data.push({\n            id: id,\n            value: value\n          });\n        }\n      }\n\n      return data;\n    };\n    /**\r\n     * Get the value of one tag. Null for all tags\r\n     * @param {?number} index - Tag index number. Null for all tags.\r\n     * @return {string} value - All tags separated by comma\r\n     */\n\n\n    obj.getValue = function (index) {\n      var value = null;\n\n      if (index != null) {\n        // Get one individual value\n        value = el.children[index].innerText.replace(\"\\n\", \"\");\n      } else {\n        // Get all\n        var data = [];\n\n        for (var i = 0; i < el.children.length; i++) {\n          value = el.children[i].innerText.replace(\"\\n\", \"\");\n\n          if (value) {\n            data.push(obj.getValue(i));\n          }\n        }\n\n        value = data.join(',');\n      }\n\n      return value;\n    };\n    /**\r\n     * Set the value of the element based on a string separeted by (,|;|\\r\\n)\r\n     * @param {string} value - A string with the tags\r\n     */\n\n\n    obj.setValue = function (text) {\n      // Remove whitespaces\n      text = text.trim();\n\n      if (text) {\n        // Tags\n        var data = extractTags(text);\n        console.log(data); // Add tags to the element\n\n        obj.add(data);\n      }\n    };\n\n    obj.reset = function () {\n      el.innerHTML = '<div><br></div>';\n    };\n    /**\r\n     * Verify if all tags in the element are valid\r\n     * @return {boolean}\r\n     */\n\n\n    obj.isValid = function () {\n      var test = 0;\n\n      for (var i = 0; i < el.children.length; i++) {\n        if (el.children[i].classList.contains('jtags_error')) {\n          test++;\n        }\n      }\n\n      return test == 0 ? true : false;\n    };\n    /**\r\n     * Add one element from the suggestions to the element\r\n     * @param {object} item - Node element in the suggestions container\r\n     */\n\n\n    obj.selectIndex = function (item) {\n      // Reset terms\n      searchTerms = '';\n      var node = getSelectionStart(); // Append text to the caret\n\n      node.innerText = item.children[1].innerText; // Set node id\n\n      if (item.children[1].getAttribute('data-id')) {\n        node.setAttribute('data-id', item.children[1].getAttribute('data-id'));\n      } // Close container\n\n\n      if (searchContainer) {\n        searchContainer.style.display = '';\n        searchContainer.innerHTML = '';\n      } // Remove any error\n\n\n      node.classList.remove('jtags_error'); // Add new item\n\n      obj.add();\n    };\n    /**\r\n     * Search for suggestions\r\n     * @param {object} node - Target node for any suggestions\r\n     */\n\n\n    obj.search = function (node) {\n      // Create and append search container to the DOM\n      if (!searchContainer) {\n        var div = document.createElement('div');\n        div.style.position = 'relative';\n        el.parentNode.insertBefore(div, el.nextSibling); // Create container\n\n        searchContainer = document.createElement('div');\n        searchContainer.classList.add('jtags_search');\n        div.appendChild(searchContainer);\n      } // Search for\n\n\n      var terms = node.anchorNode.nodeValue; // Search\n\n      if (node.anchorNode.nodeValue && terms != searchTerms) {\n        // Terms\n        searchTerms = node.anchorNode.nodeValue; // Reset index\n\n        searchIndex = 0; // Get remove results\n\n        jSuites.ajax({\n          url: obj.options.search + searchTerms,\n          method: 'GET',\n          dataType: 'json',\n          success: function success(data) {\n            // Reset container\n            searchContainer.innerHTML = ''; // Print results\n\n            if (!data.length) {\n              // Show container\n              searchContainer.style.display = '';\n            } else {\n              // Show container\n              searchContainer.style.display = 'block'; // Show items\n\n              var len = data.length < 11 ? data.length : 10;\n\n              for (var i = 0; i < len; i++) {\n                var div = document.createElement('div');\n\n                if (i == 0) {\n                  div.classList.add('selected');\n                }\n\n                var img = document.createElement('img');\n\n                if (data[i].image) {\n                  img.src = data[i].image;\n                } else {\n                  img.style.display = 'none';\n                }\n\n                div.appendChild(img);\n                var item = document.createElement('div');\n                item.setAttribute('data-id', data[i].id);\n                item.innerHTML = data[i].name;\n\n                div.onclick = function () {\n                  // Add item\n                  obj.selectIndex(this);\n                };\n\n                div.appendChild(item); // Append item to the container\n\n                searchContainer.appendChild(div);\n              }\n            }\n          }\n        });\n      }\n    }; // Destroy tags element\n\n\n    obj.destroy = function () {\n      // Bind events\n      el.removeEventListener('mouseup', tagsMouseUp);\n      el.removeEventListener('keydown', tagsKeyDown);\n      el.removeEventListener('keyup', tagsKeyUp);\n      el.removeEventListener('paste', tagsPaste);\n      el.removeEventListener('focus', tagsFocus);\n      el.removeEventListener('blur', tagsBlur); // Remove element\n\n      el.parentNode.removeChild(el);\n    };\n\n    var getRandomColor = function getRandomColor(index) {\n      var rand = function rand(min, max) {\n        return min + Math.random() * (max - min);\n      };\n\n      return 'hsl(' + rand(1, 360) + ',' + rand(40, 70) + '%,' + rand(65, 72) + '%)';\n    };\n    /**\r\n     * Filter tags\r\n     */\n\n\n    var filter = function filter() {\n      for (var i = 0; i < el.children.length; i++) {\n        // Create label design\n        if (!obj.getValue(i)) {\n          el.children[i].classList.remove('jtags_label');\n        } else {\n          el.children[i].classList.add('jtags_label'); // Validation in place\n\n          if (typeof obj.options.validation == 'function') {\n            if (obj.getValue(i)) {\n              if (!obj.options.validation(el.children[i], el.children[i].innerText, el.children[i].getAttribute('data-id'))) {\n                el.children[i].classList.add('jtags_error');\n              } else {\n                el.children[i].classList.remove('jtags_error');\n              }\n            } else {\n              el.children[i].classList.remove('jtags_error');\n            }\n          }\n        }\n      }\n    };\n    /**\r\n     * Place caret in the element node\r\n     */\n\n\n    var caret = function caret(e) {\n      var range = document.createRange();\n      var sel = window.getSelection();\n      range.setStart(e, e.innerText.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    };\n    /**\r\n     * Selection\r\n     */\n\n\n    var getSelectionStart = function getSelectionStart() {\n      var node = document.getSelection().anchorNode;\n\n      if (node) {\n        return node.nodeType == 3 ? node.parentNode : node;\n      } else {\n        return null;\n      }\n    };\n    /**\r\n     * Extract tags from a string\r\n     * @param {string} text - Raw string\r\n     * @return {Array} data - Array with extracted tags\r\n     */\n\n\n    var extractTags = function extractTags(text) {\n      /** @type {Array} */\n      var data = [];\n      /** @type {string} */\n\n      var word = ''; // Remove whitespaces\n\n      text = text.trim();\n\n      if (text) {\n        for (var i = 0; i < text.length; i++) {\n          if (text[i] == ',' || text[i] == ';' || text[i] == '\\r\\n') {\n            if (word) {\n              data.push(word);\n            }\n          } else {\n            word += text[i];\n          }\n        }\n\n        if (word) {\n          data.push(word);\n        }\n      }\n\n      return data;\n    };\n    /** @type {number} */\n\n\n    var anchorOffset = 0;\n    /**\r\n     * Processing event keydown on the element\r\n     * @param e {object}\r\n     */\n\n    var tagsKeyDown = function tagsKeyDown(e) {\n      // Anchoroffset\n      anchorOffset = window.getSelection().anchorOffset; // Verify content\n\n      if (!el.children.length) {\n        var div = document.createElement('div');\n        div.innerHTML = '<br>';\n        el.appendChild(div);\n      } // Comma\n\n\n      if (e.which == 9 || e.which == 186 || e.which == 188) {\n        var n = window.getSelection().anchorOffset;\n\n        if (n > 1) {\n          obj.add();\n        }\n\n        e.preventDefault();\n      } else if (e.which == 13) {\n        // Enter\n        if (searchContainer && searchContainer.style.display != '') {\n          obj.selectIndex(searchContainer.children[searchIndex]);\n        } else {\n          var n = window.getSelection().anchorOffset;\n\n          if (n > 1) {\n            obj.add();\n          }\n        }\n\n        e.preventDefault();\n      } else if (e.which == 38) {\n        // Up\n        if (searchContainer && searchContainer.style.display != '') {\n          searchContainer.children[searchIndex].classList.remove('selected');\n\n          if (searchIndex > 0) {\n            searchIndex--;\n          }\n\n          searchContainer.children[searchIndex].classList.add('selected');\n          e.preventDefault();\n        }\n      } else if (e.which == 40) {\n        // Down\n        if (searchContainer && searchContainer.style.display != '') {\n          searchContainer.children[searchIndex].classList.remove('selected');\n\n          if (searchIndex < 9) {\n            searchIndex++;\n          }\n\n          searchContainer.children[searchIndex].classList.add('selected');\n          e.preventDefault();\n        }\n      }\n    };\n    /**\r\n     * Processing event keyup on the element\r\n     * @param e {object}\r\n     */\n\n\n    var tagsKeyUp = function tagsKeyUp(e) {\n      if (e.which == 39) {\n        var n = window.getSelection().anchorOffset;\n\n        if (n > 1 && n == anchorOffset) {\n          obj.add();\n        }\n      } else if (e.which == 13 || e.which == 38 || e.which == 40) {\n        e.preventDefault();\n      } else {\n        if (searchTimer) {\n          clearTimeout(searchTimer);\n        }\n\n        searchTimer = setTimeout(function () {\n          // Current node\n          var node = window.getSelection(); // Search\n\n          if (obj.options.search) {\n            obj.search(node);\n          }\n\n          searchTimer = null;\n        }, 300);\n      }\n\n      filter();\n    };\n    /**\r\n     * Processing event paste on the element\r\n     * @param e {object}\r\n     */\n\n\n    var tagsPaste = function tagsPaste(e) {\n      if (e.clipboardData || e.originalEvent.clipboardData) {\n        var html = (e.originalEvent || e).clipboardData.getData('text/html');\n        var text = (e.originalEvent || e).clipboardData.getData('text/plain');\n      } else if (window.clipboardData) {\n        var html = window.clipboardData.getData('Html');\n        var text = window.clipboardData.getData('Text');\n      }\n\n      obj.setValue(text);\n      e.preventDefault();\n    };\n    /**\r\n     * Processing event mouseup on the element\r\n     * @param e {object}\r\n     */\n\n\n    var tagsMouseUp = function tagsMouseUp(e) {\n      if (e.target.parentNode && e.target.parentNode.classList.contains('jtags')) {\n        if (e.target.classList.contains('jtags_label') || e.target.classList.contains('jtags_error')) {\n          var rect = e.target.getBoundingClientRect();\n\n          if (rect.width - (e.clientX - rect.left) < 16) {\n            el.removeChild(e.target);\n            el.focus();\n          }\n        }\n      }\n\n      if (searchContainer) {\n        searchContainer.style.display = '';\n      }\n    };\n    /**\r\n     * Processing event focus on the element\r\n     * @param e {object}\r\n     */\n\n\n    var tagsFocus = function tagsFocus(e) {\n      if (!el.children.length || obj.getValue(el.children.length - 1)) {\n        var div = document.createElement('div');\n        div.innerHTML = '<br>';\n        el.appendChild(div);\n      }\n\n      if (typeof obj.options.onfocus == 'function') {\n        obj.options.onfocus(el, obj, obj.getValue());\n      }\n    };\n    /**\r\n     * Processing event blur on the element\r\n     * @param e {object}\r\n     */\n\n\n    var tagsBlur = function tagsBlur(e) {\n      if (searchContainer) {\n        setTimeout(function () {\n          searchContainer.style.display = '';\n        }, 200);\n      }\n\n      for (var i = 0; i < el.children.length - 1; i++) {\n        // Create label design\n        if (!obj.getValue(i)) {\n          el.removeChild(el.children[i]);\n        }\n      }\n\n      if (typeof obj.options.onblur == 'function') {\n        obj.options.onblur(el, obj, obj.getValue());\n      }\n    }; // Bind events\n\n\n    el.addEventListener('mouseup', tagsMouseUp);\n    el.addEventListener('keydown', tagsKeyDown);\n    el.addEventListener('keyup', tagsKeyUp);\n    el.addEventListener('paste', tagsPaste);\n    el.addEventListener('focus', tagsFocus);\n    el.addEventListener('blur', tagsBlur); // Prepare container\n\n    el.classList.add('jtags');\n    el.setAttribute('contenteditable', true);\n    el.setAttribute('spellcheck', false);\n\n    if (obj.options.placeholder) {\n      el.placeholder = obj.options.placeholder;\n    } // Make sure element is empty\n\n\n    if (obj.options.value) {\n      obj.setValue(obj.options.value);\n    } else {\n      el.innerHTML = '<div><br></div>';\n    }\n\n    if (typeof obj.options.onload == 'function') {\n      obj.options.onload(el, obj);\n    }\n\n    el.tags = obj;\n    return obj;\n  };\n\n  jSuites.tracker = function (el, options) {\n    var obj = {};\n    obj.options = {}; // Default configuration\n\n    var defaults = {\n      url: null,\n      message: 'Are you sure? There are unsaved information in your form',\n      ignore: false,\n      currentHash: null,\n      submitButton: null,\n      onload: null,\n      onbeforesave: null,\n      onsave: null\n    }; // Loop through our object\n\n    for (var property in defaults) {\n      if (options && options.hasOwnProperty(property)) {\n        obj.options[property] = options[property];\n      } else {\n        obj.options[property] = defaults[property];\n      }\n    }\n\n    obj.setUrl = function (url) {\n      obj.options.url = url;\n    };\n\n    obj.load = function () {\n      jSuites.ajax({\n        url: obj.options.url,\n        method: 'GET',\n        dataType: 'json',\n        success: function success(data) {\n          var elements = el.querySelectorAll(\"input, select, textarea\");\n\n          for (var i = 0; i < elements.length; i++) {\n            var name = elements[i].getAttribute('name');\n\n            if (data[name]) {\n              elements[i].value = data[name];\n            }\n          }\n\n          if (typeof obj.options.onload == 'function') {\n            obj.options.onload(el, data);\n          }\n        }\n      });\n    };\n\n    obj.save = function () {\n      var test = obj.validate();\n\n      if (test) {\n        jSuites.alert(test);\n      } else {\n        var data = obj.getElements(true);\n\n        if (typeof obj.options.onbeforesave == 'function') {\n          var data = obj.options.onbeforesave(el, data);\n\n          if (data === false) {\n            console.log('Onbeforesave returned false');\n            return;\n          }\n        }\n\n        jSuites.ajax({\n          url: obj.options.url,\n          method: 'POST',\n          dataType: 'json',\n          data: data,\n          success: function success(result) {\n            jSuites.alert(result.message);\n\n            if (typeof obj.options.onsave == 'function') {\n              var data = obj.options.onsave(el, result);\n            }\n\n            obj.reset();\n          }\n        });\n      }\n    };\n\n    obj.validateElement = function (element) {\n      var emailChecker = function emailChecker(data) {\n        var pattern = new RegExp(/^([\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4})?$/);\n        return pattern.test(data) ? true : false;\n      };\n\n      var passwordChecker = function passwordChecker(data) {\n        return data.length > 5 ? true : false;\n      };\n\n      var addError = function addError(element) {\n        // Add error in the element\n        element.classList.add('error'); // Submit button\n\n        if (obj.options.submitButton) {\n          obj.options.submitButton.setAttribute('disabled', true);\n        } // Return error message\n\n\n        return element.getAttribute('data-error') || 'There is an error in the form';\n      };\n\n      var delError = function delError(element) {\n        var error = false; // Remove class from this element\n\n        element.classList.remove('error'); // Get elements in the form\n\n        var elements = el.querySelectorAll(\"input, select, textarea\"); // Run all elements \n\n        for (var i = 0; i < elements.length; i++) {\n          if (elements[i].getAttribute('data-validation')) {\n            if (elements[i].classList.contains('error')) {\n              error = true;\n            }\n          }\n        }\n\n        if (obj.options.submitButton) {\n          if (error) {\n            obj.options.submitButton.setAttribute('disabled', true);\n          } else {\n            obj.options.submitButton.removeAttribute('disabled');\n          }\n        }\n      }; // Blank\n\n\n      var test = '';\n\n      if (!element.value) {\n        test = addError(element);\n      } else if (element.getAttribute('data-email') && !emailChecker(element.value)) {\n        test = addError(element);\n      } else if (element.getAttribute('data-password') && !emailChecker(element.value)) {\n        test = addError(element);\n      } else {\n        if (element.classList.contains('error')) {\n          delError(element);\n        }\n      }\n\n      return test;\n    }; // Run form validation\n\n\n    obj.validate = function () {\n      var test = ''; // Get elements in the form\n\n      var elements = el.querySelectorAll(\"input, select, textarea\"); // Run all elements \n\n      for (var i = 0; i < elements.length; i++) {\n        if (elements[i].getAttribute('data-validation')) {\n          if (test) {\n            test += \"<br>\\r\\n\";\n          }\n\n          test += obj.validateElement(elements[i]);\n        }\n      }\n\n      return test;\n    }; // Check the form\n\n\n    obj.getError = function () {\n      // Validation\n      return obj.validation() ? true : false;\n    }; // Return the form hash\n\n\n    obj.setHash = function () {\n      return obj.getHash(obj.getElements());\n    }; // Get the form hash\n\n\n    obj.getHash = function (str) {\n      var hash = 0,\n          i,\n          chr;\n\n      if (str.length === 0) {\n        return hash;\n      } else {\n        for (i = 0; i < str.length; i++) {\n          chr = str.charCodeAt(i);\n          hash = (hash << 5) - hash + chr;\n          hash |= 0;\n        }\n      }\n\n      return hash;\n    }; // Is there any change in the form since start tracking?\n\n\n    obj.isChanged = function () {\n      var hash = obj.setHash();\n      return obj.options.currentHash != hash;\n    }; // Restart tracking\n\n\n    obj.resetTracker = function () {\n      obj.options.currentHash = obj.setHash();\n      obj.options.ignore = false;\n    };\n\n    obj.reset = function () {\n      obj.options.currentHash = obj.setHash();\n      obj.options.ignore = false;\n    }; // Ignore flag\n\n\n    obj.setIgnore = function (ignoreFlag) {\n      obj.options.ignore = ignoreFlag ? true : false;\n    }; // Get form elements\n\n\n    obj.getElements = function (asArray) {\n      var data = {};\n      var elements = el.querySelectorAll(\"input, select, textarea\");\n\n      for (var i = 0; i < elements.length; i++) {\n        var element = elements[i];\n        var name = element.name;\n        var value = element.value;\n\n        if (name) {\n          data[name] = value;\n        }\n      }\n\n      return asArray == true ? data : JSON.stringify(data);\n    }; // Start tracking in one second\n\n\n    setTimeout(function () {\n      obj.options.currentHash = obj.setHash();\n    }, 1000); // Alert\n\n    window.addEventListener(\"beforeunload\", function (e) {\n      if (obj.isChanged() && obj.options.ignore == false) {\n        var confirmationMessage = obj.options.message ? obj.options.message : \"\\o/\";\n\n        if (confirmationMessage) {\n          if (typeof e == 'undefined') {\n            e = window.event;\n          }\n\n          if (e) {\n            e.returnValue = confirmationMessage;\n          }\n\n          return confirmationMessage;\n        } else {\n          return void 0;\n        }\n      }\n    }); // Validations\n\n    el.addEventListener(\"keyup\", function (e) {\n      if (e.target.getAttribute('data-validation')) {\n        obj.validateElement(e.target);\n      }\n    });\n    el.tracker = obj;\n    return obj;\n  };\n\n  return jSuites;\n});","map":{"version":3,"sources":["/home/altius/NodeJs/gitHubRepos/fasp-core-ui/node_modules/jsuites/dist/jsuites.js"],"names":["global","factory","exports","module","define","amd","jSuites","options","obj","init","app","document","querySelector","el","body","guid","i","Math","floor","random","toString","getWindowWidth","w","window","d","e","documentElement","g","getElementsByTagName","x","innerWidth","clientWidth","getWindowHeight","y","innerHeight","clientHeight","getPosition","changedTouches","pageX","pageY","Event","clientX","scrollLeft","clientY","scrollTop","click","evt","MouseEvent","bubbles","cancelable","view","dispatchEvent","getElement","element","className","foundElement","path","classList","contains","parentNode","getLinkElement","targetElement","tagName","getAttribute","getFormElements","formObject","ret","elements","querySelectorAll","length","name","value","exists","url","__callback","http","XMLHttpRequest","open","send","status","getFiles","console","error","files","data","file","src","remove","substr","content","indexOf","extension","lastIndexOf","size","date","cover","ajax","type","method","keys","Object","o","j","push","encodeURIComponent","prop","z","join","httpRequest","setRequestHeader","dataType","onload","result","JSON","parse","responseText","success","err","requests","index","splice","complete","slideLeft","direction","done","add","setTimeout","slideRight","slideTop","slideBottom","fadeIn","fadeOut","keyDownControls","which","nodes","slider","close","dialog","onconfirm","mask","apply","actionUpControl","target","link","history","back","panel","pages","controlSwipeLeft","scrollTo","left","behavior","calendar","current","prev","get","style","display","controlSwipeRight","next","actionOverControl","tooltip","actionOutControl","hide","addEventListener","onpopstate","state","route","ignoreHistory","defaults","format","readonly","today","time","resetButton","placeholder","months","weekdays","weekdays_short","onclose","onchange","fullscreen","mode","position","opened","property","hasOwnProperty","toUpperCase","split","parseInt","m","h","Date","getFullYear","getMonth","getDate","getHours","getMinutes","two","calendarReset","createElement","innerHTML","calendarConfirm","calendarControls","appendChild","calendarContainer","calendarContent","calendarHeaderPrev","setAttribute","calendarLabelYear","calendarLabelMonth","calendarHeaderTitle","calendarHeaderNext","calendarHeaderRow","calendarHeader","calendarBody","calendarFooter","calendarTable","calendarSelectHour","calendarSelectMin","calendarControlsTime","maxWidth","calendarControlsUpdate","flexGrow","calendarBackdrop","getDays","rect","getBoundingClientRect","rectContent","bottom","height","top","ignoreEvents","update","setValue","getValue","getYears","val","setLabel","innerText","reset","today_d","calendar_day","year","month","day","getDay","hour","min","nd","fd","row","cell","ceil","color","fontWeight","getMonths","html","getDateString","fromFormatted","extractDateFromString","toLowerCase","mouseUpControls","action","stopPropagation","preventDefault","keyUpControls","test","verifyControls","log","insertBefore","nextSibling","prettify","texts","justNow","xMinutesAgo","xHoursAgo","xDaysAgo","xWeeksAgo","xMonthsAgo","xYearsAgo","d1","d2","total","String","prototype","replace","text","round","prettifyAll","now","s","getSeconds","v1","v2","search","weekday","Array","substring","isOpen","values","palette","colors","col","shade","container","backdrop","closeButton","onclick","table","tr","td","backgroundColor","focus","selected","contextmenu","items","create","width","itemContainer","itemText","title","disabled","shortcut","itemShortCut","foundId","id","dialogHeader","dialogTitle","dialogMessage","dialogFooter","dialogContainer","dialogConfirm","dialogConfirmButton","confirmLabel","dialogCancel","dialogCancelButton","cancelLabel","oncancel","message","opacity","confirm","alert","dropdown","extractFromDom","multiple","autocomplete","onopen","onblur","groups","minWidth","containerHeader","header","keyTimer","clearTimeout","find","setData","getUrl","setUrl","createItem","item","textLowerCase","image","node","group","groupNames","groupName","groupArrow","groupContent","getText","asArray","isArray","updateLabel","selectIndex","oldValue","oldLabel","currentIndex","resetSelected","indexToRemove","newValue","newLabel","selectItem","str","numVisibleItems","visible","cursor","updateCursor","rectContainer","resetCursor","blur","offsetTop","clientTop","firstVisible","newIndex","first","last","hasEvents","mouseup","onkeydown","children","shiftKey","select","undefined","offsetWidth","a","b","c","removeAttribute","div","editor","snippet","toolbar","maxHeight","remoteParser","youtubeKey","userSearch","parseURL","dropZone","dropAsAttachment","acceptImages","acceptFiles","maxFileSize","border","padding","onfocus","onenter","onkeyup","imageResize","editorTimer","editorAction","overflowY","extractImageFromHtml","img","addImage","insertNodeAtCaret","newNode","sel","range","getSelection","rangeCount","getRangeAt","selectedText","deleteContents","insertNode","setStartAfter","setEndAfter","removeAllRanges","addRange","appendElement","description","host","verifyEditor","thumbsContainer","detectUrl","getDomain","location","hostname","importImage","youtubeParser","getYoutube","getWebsite","parseContent","p","thumbnails","medium","encodeURI","trim","getData","json","tagged","users","userId","key","stringify","addPdf","canvas","Image","ctx","getContext","drawImage","toBlob","blob","newImage","URL","createObjectURL","toDataURL","addFile","reader","FileReader","lastModified","readAsDataURL","destroy","removeEventListener","editorMouseUp","editorMouseDown","editorMouseMove","editorKeyUp","editorKeyDown","editorDragStart","editorDragEnter","editorDragOver","editorDrop","editorPaste","editorBlur","editorFocus","isLetter","regex","match","removeRange","newHeight","clipboardData","originalEvent","nodeName","execCommand","caretRangeFromPoint","rangeParent","createRange","setStart","rangeOffset","anchorNode","dataTransfer","getDefaultToolbar","icon","userSelect","itemIcon","setCursor","startContainer","endContainer","setEnd","expression","links","regExp","queryCommandState","singleFile","extensionNotAllowed","imageTooSmall","lastmodified","small","addImages","addFromFile","imageFile","v","srcElement","extentionNotAllowed","addFromUrl","attachmentInput","loading","show","removeChild","login","href","prepareRequest","accessToken","deviceToken","facebookUrl","onerror","logo","newProfile","newProfileUrl","newProfileLogin","messageElement","divLogo","labelCode","inputCode","divCode","inputHash","divHash","inputRecovery","divRecovery","labelLogin","inputLogin","divLogin","labelName","inputName","divName","labelUsername","inputUsername","divUsername","labelPassword","inputPassword","divPassword","keyCode","execute","labelRepeatPassword","inputRepeatPassword","divRepeatPassword","labelRemember","inputRemember","divRememberButton","actionButton","divActionButton","cancelButton","requestAccess","divCancelButton","labelCaptcha","inputCaptcha","imageCaptcha","divCaptcha","facebookButton","divFacebookButton","requestLoginViaFacebook","inputRequest","divRequestButton","requestNewPassword","inputNewProfile","divNewProfileButton","showMessage","call","captcha","codeConfirmation","changeMyPassword","hash","localStorage","getItem","deviceNotificationToken","FB","getLoginStatus","response","authResponse","f","scope","jDestroy","fbLogin","jStart","jError","jExit","event","u","pattern","RegExp","setItem","onsuccess","token","password","sha512","int64","msint_32","lsint_32","highOrder","lowOrder","H","K","W","T1","T2","charsize","utf8_encode","unescape","str2binb","bin","len","charCodeAt","binb2hex","binarray","hex_tab","srcByte","charAt","safe_add_2","lsw","msw","safe_add_4","safe_add_5","maj","ch","rotr","n","sigma0","rotr28","rotr34","rotr39","sigma1","rotr14","rotr18","rotr41","gamma0","rotr1","rotr8","shr7","shr","gamma1","rotr19","rotr61","shr6","strlen","pieces","run","decimal","Number","number","valueDecimal","prepare","currentValue","process","selectionStart","selectionEnd","fromKeyCode","input","separator","t","reverse","_to_ascii","shiftUps","fromCharCode","mobile","createPage","callback","page","refresh","onpush","script","eval","setTitle","closed","showPage","onleave","pushState","mixed","routePath","getContainer","toolbarContent","setBadge","firstChild","toolbarItem","toolbarIcon","toolbarBadge","toolbarBadgeContent","badge","toolbarTitle","actionsheet","actionContent","actionGroup","actionItem","actionInput","mouseUp","modal","temp","resetPosition","mouseDownControls","mouseMoveControls","selection","empty","notification","timeout","autoHide","closeable","notificationContainer","notificationHeader","notificationImage","notificationIcon","notificationName","notificationClose","notificationDate","notificationContent","notificationTitle","notificationMessage","rating","currentImage","previousSibling","addFiles","allowAttachment","attachmentIcon","longTouchTimer","mouseDown","targetImage","offsetX","sorting","offsetY","borderTop","borderBottom","tabs","headers","headersItem","contentItem","setBorder","tags","limit","validation","onbeforechange","searchContainer","searchTerms","searchIndex","searchTimer","getSelectionStart","caret","filter","extractTags","isValid","terms","nodeValue","tagsMouseUp","tagsKeyDown","tagsKeyUp","tagsPaste","tagsFocus","tagsBlur","getRandomColor","rand","max","collapse","nodeType","word","anchorOffset","tracker","ignore","currentHash","submitButton","onbeforesave","onsave","load","save","validate","getElements","validateElement","emailChecker","passwordChecker","addError","delError","getError","setHash","getHash","chr","isChanged","resetTracker","setIgnore","ignoreFlag","confirmationMessage","returnValue"],"mappings":"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","sourcesContent":["\r\n/**\r\n * (c) jSuites Javascript Web Components (v2.7)\r\n *\r\n * Author: Paul Hodel <paul.hodel@gmail.com>\r\n * Website: https://bossanova.uk/jsuites/\r\n * Description: Create amazing web based applications.\r\n *\r\n * MIT License\r\n *\r\n */\r\n;(function (global, factory) {\r\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n    typeof define === 'function' && define.amd ? define(factory) :\r\n    global.jSuites = factory();\r\n}(this, (function () {\r\n\r\n    'use strict';\r\n\r\nvar jSuites = function(options) {\n    var obj = {}\n\n    obj.init = function() {\n        // Find root element\n        var app = document.querySelector('.japp');\n\n        // Root element\n        if (app) {\n            obj.el = app;\n        } else {\n            obj.el = document.body;\n        }\n    }\n\n    obj.guid = function() {\n        var guid = '';\n        for (var i = 0; i < 32; i++) {\n            guid += Math.floor(Math.random()*0xF).toString(0xF);\n        }\n        return guid;\n    }\n\n    obj.getWindowWidth = function() {\n        var w = window,\n        d = document,\n        e = d.documentElement,\n        g = d.getElementsByTagName('body')[0],\n        x = w.innerWidth || e.clientWidth || g.clientWidth;\n        return x;\n    }\n\n    obj.getWindowHeight = function() {\n        var w = window,\n        d = document,\n        e = d.documentElement,\n        g = d.getElementsByTagName('body')[0],\n        y = w.innerHeight|| e.clientHeight|| g.clientHeight;\n        return  y;\n    }\n\n    obj.getPosition = function(e) {\n        if (e.changedTouches && e.changedTouches[0]) {\n            var x = e.changedTouches[0].pageX;\n            var y = e.changedTouches[0].pageY;\n        } else {\n            var x = (window.Event) ? e.pageX : e.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);\n            var y = (window.Event) ? e.pageY : e.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);\n        }\n\n        return [ x, y ];\n    }\n\n    obj.click = function(el) {\n        if (el.click) {\n            el.click();\n        } else {\n            var evt = new MouseEvent('click', {\n                bubbles: true,\n                cancelable: true,\n                view: window\n            });\n            el.dispatchEvent(evt);\n        }\n    }\n\n    obj.getElement = function(element, className) {\n        var foundElement = false;\n\n        function path (element) {\n            if (element.className) {\n                if (element.classList.contains(className)) {\n                    foundElement = element;\n                }\n            }\n\n            if (element.parentNode) {\n                path(element.parentNode);\n            }\n        }\n\n        path(element);\n\n        return foundElement;\n    }\n\n    obj.getLinkElement = function(element) {\n        var targetElement = false;\n\n        function path (element) {\n            if ((element.tagName == 'A' || element.tagName == 'DIV') && element.getAttribute('data-href')) {\n                targetElement = element;\n            }\n\n            if (element.parentNode) {\n                path(element.parentNode);\n            }\n        }\n\n        path(element);\n\n        return targetElement;\n    }\n\n    obj.getFormElements = function(formObject) {\n        var ret = {};\n\n        if (formObject) {\n            var elements = formObject.querySelectorAll(\"input, select, textarea\");\n        } else {\n            var elements = document.querySelectorAll(\"input, select, textarea\");\n        }\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var name = element.name;\n            var value = element.value;\n\n            if (name) {\n                ret[name] = value;\n            }\n        }\n\n        return ret;\n    }\n\n    obj.exists = function(url, __callback) {\n        var http = new XMLHttpRequest();\n        http.open('HEAD', url, false);\n        http.send();\n        if (http.status) {\n            __callback(http.status);\n        }\n    }\n\n    obj.getFiles = function(element) {\n        if (! element) {\n            console.error('No element defined in the arguments of your method');\n        }\n\n        // Get attachments\n        var files = element.querySelectorAll('.jfile');\n\n        if (files.length > 0) {\n            var data = [];\n            for (var i = 0; i < files.length; i++) {\n                var file = {};\n\n                var src = files[i].getAttribute('src');\n\n                if (files[i].classList.contains('jremove')) {\n                    file.remove = 1;\n                } else {\n                    if (src.substr(0,4) == 'data') {\n                        file.content = src.substr(src.indexOf(',') + 1);\n                        file.extension = files[i].getAttribute('data-extension');\n                    } else {\n                        file.file = src;\n                        file.extension = files[i].getAttribute('data-extension');\n                        if (! file.extension) {\n                            file.extension =  src.substr(src.lastIndexOf('.') + 1);\n                        }\n                        if (jSuites.files[file.file]) {\n                            file.content = jSuites.files[file.file];\n                        }\n                    }\n\n                    // Optional file information\n                    if (files[i].getAttribute('data-name')) {\n                        file.name = files[i].getAttribute('data-name');\n                    }\n\n                    if (files[i].getAttribute('data-file')) {\n                        file.file = files[i].getAttribute('data-file');\n                    }\n\n                    if (files[i].getAttribute('data-size')) {\n                        file.size = files[i].getAttribute('data-size');\n                    }\n\n                    if (files[i].getAttribute('data-date')) {\n                        file.date = files[i].getAttribute('data-date');\n                    }\n\n                    if (files[i].getAttribute('data-cover')) {\n                        file.cover = files[i].getAttribute('data-cover');\n                    }\n                }\n\n                // TODO SMALL thumbs?\n\n                data[i] = file;\n            }\n\n            return data;\n        }\n    }\n\n    obj.ajax = function(options) {\n        if (! options.data) {\n            options.data = {};\n        }\n\n        if (options.type) {\n            options.method = options.type;\n        }\n\n        if (options.data) {\n            var data = [];\n            var keys = Object.keys(options.data);\n\n            if (keys.length) {\n                for (var i = 0; i < keys.length; i++) {\n                    if (typeof(options.data[keys[i]]) == 'object') {\n                        var o = options.data[keys[i]];\n                        for (var j = 0; j < o.length; j++) {\n                            if (typeof(o[j]) == 'string') {\n                                data.push(keys[i] + '[' + j + ']=' + encodeURIComponent(o[j]));\n                            } else {\n                                var prop = Object.keys(o[j]);\n                                for (var z = 0; z < prop.length; z++) {\n                                    data.push(keys[i] + '[' + j + '][' + prop[z] + ']=' + encodeURIComponent(o[j][prop[z]]));\n                                }\n                            }\n                        }\n                    } else {\n                        data.push(keys[i] + '=' + encodeURIComponent(options.data[keys[i]]));\n                    }\n                }\n            }\n\n            if (options.method == 'GET' && data.length > 0) {\n                if (options.url.indexOf('?') < 0) {\n                    options.url += '?';\n                }\n                options.url += data.join('&');\n            }\n        }\n\n        var httpRequest = new XMLHttpRequest();\n        httpRequest.open(options.method, options.url, true);\n\n        if (options.method == 'POST') {\n            httpRequest.setRequestHeader('Accept', 'application/json');\n            httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        } else {\n            if (options.dataType == 'json') {\n                httpRequest.setRequestHeader('Content-Type', 'text/json');\n            }\n        }\n\n        // No cache\n        httpRequest.setRequestHeader('pragma', 'no-cache');\n        httpRequest.setRequestHeader('cache-control', 'no-cache');\n\n        httpRequest.onload = function() {\n            if (httpRequest.status === 200) {\n                if (options.dataType == 'json') {\n                    try {\n                        var result = JSON.parse(httpRequest.responseText);\n\n                        if (options.success && typeof(options.success) == 'function') {\n                            options.success(result);\n                        }\n                    } catch(err) {\n                        if (options.error && typeof(options.error) == 'function') {\n                            options.error(result);\n                        }\n                    }\n                } else {\n                    var result = httpRequest.responseText;\n\n                    if (options.success && typeof(options.success) == 'function') {\n                        options.success(result);\n                    }\n                }\n            } else {\n                if (options.error && typeof(options.error) == 'function') {\n                    options.error(httpRequest.responseText);\n                }\n            }\n\n            // Global complete method\n            if (obj.ajax.requests && obj.ajax.requests.length) {\n                // Get index of this request in the container\n                var index = obj.ajax.requests.indexOf(httpRequest)\n                // Remove from the ajax requests container\n                obj.ajax.requests.splice(index, 1);\n                // Last one?\n                if (! obj.ajax.requests.length) {\n                    if (options.complete && typeof(options.complete) == 'function') {\n                        options.complete(result);\n                    }\n                }\n            }\n        }\n\n        if (data) {\n            httpRequest.send(data.join('&'));\n        } else {\n            httpRequest.send();\n        }\n\n        obj.ajax.requests.push(httpRequest);\n\n        return httpRequest;\n    }\n\n    obj.ajax.requests = [];\n\n    obj.slideLeft = function(element, direction, done) {\n        if (direction == true) {\n            element.classList.add('slide-left-in');\n            setTimeout(function() {\n                element.classList.remove('slide-left-in');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 400);\n        } else {\n            element.classList.add('slide-left-out');\n            setTimeout(function() {\n                element.classList.remove('slide-left-out');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 400);\n        }\n    }\n\n    obj.slideRight = function(element, direction, done) {\n        if (direction == true) {\n            element.classList.add('slide-right-in');\n            setTimeout(function() {\n                element.classList.remove('slide-right-in');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 400);\n        } else {\n            element.classList.add('slide-right-out');\n            setTimeout(function() {\n                element.classList.remove('slide-right-out');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 400);\n        }\n    }\n\n    obj.slideTop = function(element, direction, done) {\n        if (direction == true) {\n            element.classList.add('slide-top-in');\n            setTimeout(function() {\n                element.classList.remove('slide-top-in');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 400);\n        } else {\n            element.classList.add('slide-top-out');\n            setTimeout(function() {\n                element.classList.remove('slide-top-out');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 400);\n        }\n    }\n\n    obj.slideBottom = function(element, direction, done) {\n        if (direction == true) {\n            element.classList.add('slide-bottom-in');\n            setTimeout(function() {\n                element.classList.remove('slide-bottom-in');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 400);\n        } else {\n            element.classList.add('slide-bottom-out');\n            setTimeout(function() {\n                element.classList.remove('slide-bottom-out');\n                if (typeof(done) == 'function') {\n                    done();\n                }\n            }, 100);\n        }\n    }\n\n    obj.fadeIn = function(element, done) {\n        element.classList.add('fade-in');\n        setTimeout(function() {\n            element.classList.remove('fade-in');\n            if (typeof(done) == 'function') {\n                done();\n            }\n        }, 2000);\n    }\n\n    obj.fadeOut = function(element, done) {\n        element.classList.add('fade-out');\n        setTimeout(function() {\n            element.classList.remove('fade-out');\n            if (typeof(done) == 'function') {\n                done();\n            }\n        }, 1000);\n    }\n\n    obj.keyDownControls = function(e) {\n        if (e.which == 27) {\n            var nodes = document.querySelectorAll('.jslider');\n            if (nodes.length > 0) {\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].slider.close();\n                }\n            }\n\n            if (document.querySelector('.jdialog')) {\n                jSuites.dialog.close();\n            }\n        } else if (e.which == 13) {\n            if (document.querySelector('.jdialog')) {\n                if (typeof(jSuites.dialog.options.onconfirm) == 'function') {\n                    jSuites.dialog.options.onconfirm();\n                }\n                jSuites.dialog.close();\n            }\n        }\n\n        // Verify mask\n        if (jSuites.mask) {\n            jSuites.mask.apply(e);\n        }\n    }\n\n    var actionUpControl = function(e) {\n        var element = null;\n        if (element = jSuites.getLinkElement(e.target)) {\n            var link = element.getAttribute('data-href');\n            if (link == '#back') {\n                window.history.back();\n            } else if (link == '#panel') {\n                jSuites.panel();\n            } else {\n                jSuites.pages(link);\n            }\n        }\n    }\n\n    var controlSwipeLeft = function(e) {\n        var element = jSuites.getElement(e.target, 'option');\n\n        if (element && element.querySelector('.option-actions')) {\n            element.scrollTo({\n                left: 100,\n                behavior: 'smooth'\n            });\n        } else {\n            var element = jSuites.getElement(e.target, 'jcalendar');\n            if (element && jSuites.calendar.current) {\n                jSuites.calendar.current.prev();\n            } else {\n                if (jSuites.panel) {\n                    var element = jSuites.panel.get();\n                    if (element) {\n                        if (element.style.display != 'none') {\n                            jSuites.panel.close();\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    var controlSwipeRight = function(e) {\n        var element = jSuites.getElement(e.target, 'option');\n        if (element && element.querySelector('.option-actions')) {\n            element.scrollTo({\n                left: 0,\n                behavior: 'smooth'\n            });\n        } else {\n            var element = jSuites.getElement(e.target, 'jcalendar');\n            if (element && jSuites.calendar.current) {\n                jSuites.calendar.current.next();\n            } else {\n                if (jSuites.panel) {\n                    var element = jSuites.panel.get();\n                    if (element) {\n                        if (element.style.display == 'none') {\n                            jSuites.panel();\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    var actionOverControl = function(e) {\n        // Tooltip\n        if (jSuites.tooltip) {\n            jSuites.tooltip(e);\n        }\n    }\n\n    var actionOutControl = function(e) {\n        // Tooltip\n        if (jSuites.tooltip) {\n            jSuites.tooltip.hide();\n        }\n    }\n\n    // Create page container\n    document.addEventListener('swipeleft', controlSwipeLeft);\n    document.addEventListener('swiperight', controlSwipeRight);\n    document.addEventListener('keydown', obj.keyDownControls);\n\n    if ('ontouchend' in document.documentElement === true) {\n        document.addEventListener('touchend', actionUpControl);\n    } else {\n        document.addEventListener('mouseup', actionUpControl);\n    }\n\n    // Onmouseover\n    document.addEventListener('mouseover', actionOverControl);\n    document.addEventListener('mouseout', actionOutControl);\n    document.addEventListener('DOMContentLoaded', function() {\n        obj.init();\n    });\n\n    // Pop state control\n    window.onpopstate = function(e) {\n        if (e.state && e.state.route) {\n            if (jSuites.pages.get(e.state.route)) {\n                jSuites.pages(e.state.route, { ignoreHistory:true });\n            }\n        }\n    }\n\n    return obj;\n}();\n\njSuites.files = [];\r\n\r\njSuites.calendar = (function(el, options) {\n    var obj = {};\n    obj.options = {};\n\n    // Global container\n    if (! jSuites.calendar.current) {\n        jSuites.calendar.current = null;\n    }\n\n    // Default configuration\n    var defaults = {\n        // Date format\n        format: 'DD/MM/YYYY',\n        // Allow keyboard date entry\n        readonly: true,\n        // Today is default\n        today: false,\n        // Show timepicker\n        time: false,\n        // Show the reset button\n        resetButton: true,\n        // Placeholder\n        placeholder: '',\n        // Translations can be done here\n        months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        weekdays: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n        weekdays_short: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n        // Value\n        value: null,\n        // Events\n        onclose: null,\n        onchange: null,\n        // Fullscreen (this is automatic set for screensize < 800)\n        fullscreen: false,\n        // Internal mode controller\n        mode: null,\n        position: null,\n        // Create the calendar closed as default\n        opened: false,\n    };\n\n    // Loop through our object\n    for (var property in defaults) {\n        if (options && options.hasOwnProperty(property)) {\n            obj.options[property] = options[property];\n        } else {\n            obj.options[property] = defaults[property];\n        }\n    }\n\n    // Value\n    if (! obj.options.value && el.value) {\n        obj.options.value = el.value;\n    }\n\n    // Make sure use upper case in the format\n    obj.options.format = obj.options.format.toUpperCase();\n\n    if (obj.options.value) {\n        var date = obj.options.value.split(' ');\n        var time = date[1];\n        var date = date[0].split('-');\n        var y = parseInt(date[0]);\n        var m = parseInt(date[1]);\n        var d = parseInt(date[2]);\n\n        if (time) {\n            var time = time.split(':');\n            var h = parseInt(time[0]);\n            var i = parseInt(time[1]);\n        } else {\n            var h = 0;\n            var i = 0;\n        }\n    } else {\n        var date = new Date();\n        var y = date.getFullYear();\n        var m = date.getMonth() + 1;\n        var d = date.getDate();\n        var h = date.getHours();\n        var i = date.getMinutes();\n    }\n\n    // Current value\n    obj.date = [ y, m, d, h, i, 0 ];\n\n    // Two digits\n    var two = function(value) {\n        value = '' + value;\n        if (value.length == 1) {\n            value = '0' + value;\n        }\n        return value;\n    }\n\n    // Element\n    el.classList.add('jcalendar-input');\n\n    // Calendar elements\n    var calendarReset = document.createElement('div');\n    calendarReset.className = 'jcalendar-reset';\n    calendarReset.innerHTML = 'Reset';\n\n    var calendarConfirm = document.createElement('div');\n    calendarConfirm.className = 'jcalendar-confirm';\n    calendarConfirm.innerHTML = 'Done';\n\n    var calendarControls = document.createElement('div');\n    calendarControls.className = 'jcalendar-controls'\n    if (obj.options.resetButton) {\n        calendarControls.appendChild(calendarReset);\n    }\n    calendarControls.appendChild(calendarConfirm);\n\n    var calendarContainer = document.createElement('div');\n    calendarContainer.className = 'jcalendar-container';\n\n    var calendarContent = document.createElement('div');\n    calendarContent.className = 'jcalendar-content';\n    calendarContent.appendChild(calendarControls);\n    calendarContainer.appendChild(calendarContent);\n\n    // Main element\n    var calendar = document.createElement('div');\n    calendar.className = 'jcalendar';\n    calendar.appendChild(calendarContainer);\n\n    // Previous button\n    var calendarHeaderPrev = document.createElement('td');\n    calendarHeaderPrev.setAttribute('colspan', '2');\n    calendarHeaderPrev.className = 'jcalendar-prev';\n\n    // Header with year and month\n    var calendarLabelYear = document.createElement('span');\n    calendarLabelYear.className = 'jcalendar-year';\n\n    var calendarLabelMonth = document.createElement('span');\n    calendarLabelMonth.className = 'jcalendar-month';\n\n    var calendarHeaderTitle = document.createElement('td');\n    calendarHeaderTitle.className = 'jcalendar-header';\n    calendarHeaderTitle.setAttribute('colspan', '3');\n    calendarHeaderTitle.appendChild(calendarLabelMonth);\n    calendarHeaderTitle.appendChild(calendarLabelYear);\n\n    var calendarHeaderNext = document.createElement('td');\n    calendarHeaderNext.setAttribute('colspan', '2');\n    calendarHeaderNext.className = 'jcalendar-next';\n\n    var calendarHeaderRow = document.createElement('tr');\n    calendarHeaderRow.appendChild(calendarHeaderPrev);\n    calendarHeaderRow.appendChild(calendarHeaderTitle);\n    calendarHeaderRow.appendChild(calendarHeaderNext);\n\n    var calendarHeader = document.createElement('thead');\n    calendarHeader.appendChild(calendarHeaderRow);\n\n    var calendarBody = document.createElement('tbody');\n    var calendarFooter = document.createElement('tfoot');\n\n    // Calendar table\n    var calendarTable = document.createElement('table');\n    calendarTable.setAttribute('cellpadding', '0');\n    calendarTable.setAttribute('cellspacing', '0');\n    calendarTable.appendChild(calendarHeader);\n    calendarTable.appendChild(calendarBody);\n    calendarTable.appendChild(calendarFooter);\n    calendarContent.appendChild(calendarTable);\n\n    var calendarSelectHour = document.createElement('select');\n    calendarSelectHour.className = 'jcalendar-select';\n    calendarSelectHour.onchange = function() {\n        obj.date[3] = this.value; \n    }\n\n    for (var i = 0; i < 24; i++) {\n        var element = document.createElement('option');\n        element.value = i;\n        element.innerHTML = two(i);\n        calendarSelectHour.appendChild(element);\n    }\n\n    var calendarSelectMin = document.createElement('select');\n    calendarSelectMin.className = 'jcalendar-select';\n    calendarSelectMin.onchange = function() {\n        obj.date[4] = this.value; \n    }\n\n    for (var i = 0; i < 60; i++) {\n        var element = document.createElement('option');\n        element.value = i;\n        element.innerHTML = two(i);\n        calendarSelectMin.appendChild(element);\n    }\n\n    // Footer controls\n    var calendarControls = document.createElement('div');\n    calendarControls.className = 'jcalendar-controls';\n\n    var calendarControlsTime = document.createElement('div');\n    calendarControlsTime.className = 'jcalendar-time';\n    calendarControlsTime.style.maxWidth = '140px';\n    calendarControlsTime.appendChild(calendarSelectHour);\n    calendarControlsTime.appendChild(calendarSelectMin);\n\n    var calendarControlsUpdate = document.createElement('div');\n    calendarControlsUpdate.style.flexGrow = '10';\n    calendarControlsUpdate.innerHTML = '<input type=\"button\" class=\"jcalendar-update\" value=\"Update\">'\n    calendarControls.appendChild(calendarControlsTime);\n    calendarControls.appendChild(calendarControlsUpdate);\n    calendarContent.appendChild(calendarControls);\n\n    var calendarBackdrop = document.createElement('div');\n    calendarBackdrop.className = 'jcalendar-backdrop';\n    calendar.appendChild(calendarBackdrop);\n\n    // Methods\n    obj.open = function (value) {\n        if (! calendar.classList.contains('jcalendar-focus')) {\n            if (jSuites.calendar.current) {\n                jSuites.calendar.current.close();\n            }\n            // Current\n            jSuites.calendar.current = obj;\n            // Show calendar\n            calendar.classList.add('jcalendar-focus');\n            // Get days\n            obj.getDays();\n            // Hour\n            if (obj.options.time) {\n                calendarSelectHour.value = obj.date[3];\n                calendarSelectMin.value = obj.date[4];\n            }\n\n            // Get the position of the corner helper\n            if (jSuites.getWindowWidth() < 800 || obj.options.fullscreen) {\n                // Full\n                calendar.classList.add('jcalendar-fullsize');\n                // Animation\n                jSuites.slideBottom(calendarContent, 1);\n            } else {\n                const rect = el.getBoundingClientRect();\n                const rectContent = calendarContent.getBoundingClientRect();\n\n                if (obj.options.position) {\n                    calendarContainer.style.position = 'fixed';\n                    if (window.innerHeight < rect.bottom + rectContent.height) {\n                        calendarContainer.style.top = (rect.top - (rectContent.height + 2)) + 'px';\n                    } else {\n                        calendarContainer.style.top = (rect.top + rect.height + 2) + 'px';\n                    }\n                    calendarContainer.style.left = rect.left + 'px';\n                } else {\n                    if (window.innerHeight < rect.bottom + rectContent.height) {\n                        calendarContainer.style.bottom = (1 * rect.height + rectContent.height + 2) + 'px';\n                    } else {\n                        calendarContainer.style.top = 2 + 'px'; \n                    }\n                }\n            }\n        }\n    }\n\n    obj.close = function (ignoreEvents, update) {\n        // Current\n        jSuites.calendar.current = null;\n\n        if (update != false && el.tagName == 'INPUT') {\n            obj.setValue(obj.getValue());\n        }\n\n        // Animation\n        if (! ignoreEvents && typeof(obj.options.onclose) == 'function') {\n            obj.options.onclose(el);\n        }\n\n        // Hide\n        calendar.classList.remove('jcalendar-focus');\n\n        return obj.getValue(); \n    }\n\n    obj.prev = function() {\n        // Check if the visualization is the days picker or years picker\n        if (obj.options.mode == 'years') {\n            obj.date[0] = obj.date[0] - 12;\n\n            // Update picker table of days\n            obj.getYears();\n        } else {\n            // Go to the previous month\n            if (obj.date[1] < 2) {\n                obj.date[0] = obj.date[0] - 1;\n                obj.date[1] = 12;\n            } else {\n                obj.date[1] = obj.date[1] - 1;\n            }\n\n            // Update picker table of days\n            obj.getDays();\n        }\n    }\n\n    obj.next = function() {\n        // Check if the visualization is the days picker or years picker\n        if (obj.options.mode == 'years') {\n            obj.date[0] = parseInt(obj.date[0]) + 12;\n\n            // Update picker table of days\n            obj.getYears();\n        } else {\n            // Go to the previous month\n            if (obj.date[1] > 11) {\n                obj.date[0] = obj.date[0] + 1;\n                obj.date[1] = 1;\n            } else {\n                obj.date[1] = obj.date[1] + 1;\n            }\n\n            // Update picker table of days\n            obj.getDays();\n        }\n    }\n\n    obj.setValue = function(val) {\n        if (val) {\n            // Keep value\n            obj.options.value = val;\n            // Set label\n            var value = obj.setLabel(val, obj.options.format);\n            var date = obj.options.value.split(' ');\n            if (! date[1]) {\n                date[1] = '00:00:00';\n            }\n            var time = date[1].split(':')\n            var date = date[0].split('-');\n            var y = parseInt(date[0]);\n            var m = parseInt(date[1]);\n            var d = parseInt(date[2]);\n            var h = parseInt(time[0]);\n            var i = parseInt(time[1]);\n            obj.date = [ y, m, d, h, i, 0 ];\n            var val = obj.setLabel(val, obj.options.format);\n\n            if (el.value != val) {\n                el.value = val;\n                // On change\n                if (typeof(obj.options.onchange) ==  'function') {\n                    obj.options.onchange(el, val, obj.date);\n                }\n            }\n\n            obj.getDays();\n        }\n    }\n\n    obj.getValue = function() {\n        if (obj.date) {\n            if (obj.options.time) {\n                return two(obj.date[0]) + '-' + two(obj.date[1]) + '-' + two(obj.date[2]) + ' ' + two(obj.date[3]) + ':' + two(obj.date[4]) + ':' + two(0);\n            } else {\n                return two(obj.date[0]) + '-' + two(obj.date[1]) + '-' + two(obj.date[2]) + ' ' + two(0) + ':' + two(0) + ':' + two(0);\n            }\n        } else {\n            return \"\";\n        }\n    }\n\n    /**\n     * Update calendar\n     */\n    obj.update = function(element) {\n        obj.date[2] = element.innerText;\n\n        if (! obj.options.time) {\n            obj.close();\n        } else {\n            obj.date[3] = calendarSelectHour.value;\n            obj.date[4] = calendarSelectMin.value;\n        }\n\n        var elements = calendar.querySelector('.jcalendar-selected');\n        if (elements) {\n            elements.classList.remove('jcalendar-selected');\n        }\n        element.classList.add('jcalendar-selected')\n    }\n\n    /**\n     * Set to blank\n     */\n    obj.reset = function() {\n        // Clear element\n        obj.date = null;\n        // Reset element\n        el.value = '';\n        // Close calendar\n        obj.close();\n    }\n\n    /**\n     * Get calendar days\n     */\n    obj.getDays = function() {\n        // Mode\n        obj.options.mode = 'days';\n\n        // Variables\n        var d = 0;\n        var today = 0;\n        var today_d = 0;\n        var calendar_day;\n\n        // Setting current values in case of NULLs\n        var date = new Date();\n\n        var year = obj.date && obj.date[0] ? obj.date[0] : parseInt(date.getFullYear());\n        var month = obj.date && obj.date[1] ? obj.date[1] : parseInt(date.getMonth()) + 1;\n        var day = obj.date && obj.date[2] ? obj.date[2] : parseInt(date.getDay());\n        var hour = obj.date && obj.date[3] ? obj.date[3] : parseInt(date.getHours());\n        var min = obj.date && obj.date[4] ? obj.date[4] : parseInt(date.getMinutes());\n\n        obj.date = [year, month, day, hour, min, 0 ];\n\n        // Update title\n        calendarLabelYear.innerHTML = year;\n        calendarLabelMonth.innerHTML = obj.options.months[month - 1];\n\n        // Flag if this is the current month and year\n        if ((date.getMonth() == month-1) && (date.getFullYear() == year)) {\n            today = 1;\n            today_d = date.getDate();\n        }\n\n        var date = new Date(year, month, 0, 0, 0);\n        var nd = date.getDate();\n\n        var date = new Date(year, month-1, 0, hour, min);\n        var fd = date.getDay() + 1;\n\n        // Reset table\n        calendarBody.innerHTML = '';\n\n        // Weekdays Row\n        var row = document.createElement('tr');\n        row.setAttribute('align', 'center');\n        calendarBody.appendChild(row);\n\n        for (var i = 0; i < 7; i++) {\n            var cell = document.createElement('td');\n            cell.setAttribute('width', '30');\n            cell.classList.add('jcalendar-weekday')\n            cell.innerHTML = obj.options.weekdays_short[i];\n            row.appendChild(cell);\n        }\n\n        // Avoid a blank line\n        if (fd == 7) {\n            var j = 7;\n        } else {\n            var j = 0;\n        }\n\n        // Days inside the table\n        var row = document.createElement('tr');\n        row.setAttribute('align', 'center');\n        calendarBody.appendChild(row);\n\n        // Days in the month\n        for (var i = j; i < (Math.ceil((nd + fd) / 7) * 7); i++) {\n            // Create row\n            if ((i > 0) && (!(i % 7))) {\n                var row = document.createElement('tr');\n                row.setAttribute('align', 'center');\n                calendarBody.appendChild(row);\n            }\n\n            if ((i >= fd) && (i < nd + fd)) {\n                d += 1;\n            } else {\n                d = 0;\n            }\n\n            // Create cell\n            var cell = document.createElement('td');\n            cell.setAttribute('width', '30');\n            cell.classList.add('jcalendar-set-day');\n            row.appendChild(cell);\n\n            if (d == 0) {\n                cell.innerHTML = '';\n            } else {\n                if (d < 10) {\n                    cell.innerHTML = 0 + d;\n                } else {\n                    cell.innerHTML = d;\n                }\n            }\n\n            // Selected\n            if (d && d == day) {\n                cell.classList.add('jcalendar-selected');\n            }\n\n            // Sundays\n            if (! (i % 7)) {\n                cell.style.color = 'red';\n            }\n\n            // Today\n            if ((today == 1) && (today_d == d)) {\n                cell.style.fontWeight = 'bold';\n            }\n        }\n\n        // Show time controls\n        if (obj.options.time) {\n            calendarControlsTime.style.display = '';\n        } else {\n            calendarControlsTime.style.display = 'none';\n        }\n    }\n\n    obj.getMonths = function() {\n        // Mode\n        obj.options.mode = 'months';\n\n        // Loading month labels\n        var months = obj.options.months;\n\n        // Update title\n        calendarLabelYear.innerHTML = obj.date[0];\n        calendarLabelMonth.innerHTML = '';\n\n        // Create months table\n        var html = '<td colspan=\"7\"><table width=\"100%\"><tr align=\"center\">';\n\n        for (i = 0; i < 12; i++) {\n            if ((i > 0) && (!(i % 4))) {\n                html += '</tr><tr align=\"center\">';\n            }\n\n            var month = parseInt(i) + 1;\n            html += '<td class=\"jcalendar-set-month\" data-value=\"' + month + '\">' + months[i] +'</td>';\n        }\n\n        html += '</tr></table></td>';\n\n        calendarBody.innerHTML = html;\n    }\n\n    obj.getYears = function() { \n        // Mode\n        obj.options.mode = 'years';\n\n        // Array of years\n        var y = [];\n        for (i = 0; i < 25; i++) {\n            y[i] = parseInt(obj.date[0]) + (i - 12);\n        }\n\n        // Assembling the year tables\n        var html = '<td colspan=\"7\"><table width=\"100%\"><tr align=\"center\">';\n\n        for (i = 0; i < 25; i++) {\n            if ((i > 0) && (!(i % 5))) {\n                html += '</tr><tr align=\"center\">';\n            }\n            html += '<td class=\"jcalendar-set-year\">'+ y[i] +'</td>';\n        }\n\n        html += '</tr></table></td>';\n\n        calendarBody.innerHTML = html;\n    }\n\n    obj.setLabel = function(value, format) {\n        return jSuites.calendar.getDateString(value, format);\n    }\n\n    obj.fromFormatted = function (value, format) {\n        return jSuites.calendar.extractDateFromString(value, format);\n    }\n\n    // Add properties\n    el.setAttribute('autocomplete', 'off');\n    el.setAttribute('data-mask', obj.options.format.toLowerCase());\n\n    if (obj.options.readonly) {\n        el.setAttribute('readonly', 'readonly');\n    }\n\n    if (obj.options.placeholder) {\n        el.setAttribute('placeholder', obj.options.placeholder);\n    }\n\n    var mouseUpControls = function(e) {\n        var action = e.target.className;\n\n        // Object id\n        if (action == 'jcalendar-prev') {\n            obj.prev();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-next') {\n            obj.next();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-month') {\n            obj.getMonths();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-year') {\n            obj.getYears();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-set-year') {\n            obj.date[0] = e.target.innerText;\n            obj.getDays();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-set-month') {\n            obj.date[1] = parseInt(e.target.getAttribute('data-value'));\n            obj.getDays();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-confirm' || action == 'jcalendar-update') {\n            obj.close();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-close') {\n            obj.close();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-backdrop') {\n            obj.close(false, false);\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (action == 'jcalendar-reset') {\n            obj.reset();\n            e.stopPropagation();\n            e.preventDefault();\n        } else if (e.target.classList.contains('jcalendar-set-day')) {\n            if (e.target.innerText) {\n                obj.update(e.target);\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        }\n    }\n\n    var keyUpControls = function(e) {\n        if (e.target.value && e.target.value.length > 3) {\n            var test = jSuites.calendar.extractDateFromString(e.target.value, obj.options.format);\n            if (test) {\n                if (e.target.getAttribute('data-completed') == 'true') {\n                    obj.setValue(test);\n                }\n            }\n        }\n    }\n\n    var verifyControls = function(e) {\n        console.log(e.target.className)\n    }\n\n    // Handle events\n    el.addEventListener(\"keyup\", keyUpControls);\n\n    // Add global events\n    calendar.addEventListener(\"swipeleft\", function(e) {\n        jSuites.slideLeft(calendarTable, 0, function() {\n            obj.next();\n            jSuites.slideRight(calendarTable, 1);\n        });\n        e.preventDefault();\n        e.stopPropagation();\n    });\n\n    calendar.addEventListener(\"swiperight\", function(e) {\n        jSuites.slideRight(calendarTable, 0, function() {\n            obj.prev();\n            jSuites.slideLeft(calendarTable, 1);\n        });\n        e.preventDefault();\n        e.stopPropagation();\n    });\n\n    if ('ontouchend' in document.documentElement === true) {\n        calendar.addEventListener(\"touchend\", mouseUpControls);\n\n        el.addEventListener(\"touchend\", function(e) {\n            obj.open();\n        });\n    } else {\n        calendar.addEventListener(\"mouseup\", mouseUpControls);\n\n        el.addEventListener(\"mouseup\", function(e) {\n            obj.open();\n        });\n    }\n\n    // Append element to the DOM\n    el.parentNode.insertBefore(calendar, el.nextSibling);\n\n    // Keep object available from the node\n    el.calendar = obj;\n\n    if (obj.options.opened == true) {\n        obj.open();\n    }\n\n    return obj;\n});\n\njSuites.calendar.prettify = function(d, texts) {\n    if (! texts) {\n        var texts = {\n            justNow: 'Just now',\n            xMinutesAgo: '{0}m ago',\n            xHoursAgo: '{0}h ago',\n            xDaysAgo: '{0}d ago',\n            xWeeksAgo: '{0}w ago',\n            xMonthsAgo: '{0} mon ago',\n            xYearsAgo: '{0}y ago',\n        }\n    }\n\n    var d1 = new Date();\n    var d2 = new Date(d);\n    var total = parseInt((d1 - d2) / 1000 / 60);\n\n    String.prototype.format = function(o) {\n        return this.replace('{0}', o);\n    }\n\n    if (total == 0) {\n        var text = texts.justNow;\n    } else if (total < 90) {\n        var text = texts.xMinutesAgo.format(total);\n    } else if (total < 1440) { // One day\n        var text = texts.xHoursAgo.format(Math.round(total/60));\n    } else if (total < 20160) { // 14 days\n        var text = texts.xDaysAgo.format(Math.round(total / 1440));\n    } else if (total < 43200) { // 30 days\n        var text = texts.xWeeksAgo.format(Math.round(total / 10080));\n    } else if (total < 1036800) { // 24 months\n        var text = texts.xMonthsAgo.format(Math.round(total / 43200));\n    } else { // 24 months+\n        var text = texts.xYearsAgo.format(Math.round(total / 525600));\n    }\n\n    return text;\n}\n\njSuites.calendar.prettifyAll = function() {\n    var elements = document.querySelectorAll('.prettydate');\n    for (var i = 0; i < elements.length; i++) {\n        if (elements[i].getAttribute('data-date')) {\n            elements[i].innerHTML = jSuites.calendar.prettify(elements[i].getAttribute('data-date'));\n        } else {\n            elements[i].setAttribute('data-date', elements[i].innerHTML);\n            elements[i].innerHTML = jSuites.calendar.prettify(elements[i].innerHTML);\n        }\n    }\n}\n\njSuites.calendar.now = function() {\n    var date = new Date();\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var d = date.getDate();\n    var h = date.getHours();\n    var i = date.getMinutes();\n    var s = date.getSeconds();\n\n    // Two digits\n    var two = function(value) {\n        value = '' + value;\n        if (value.length == 1) {\n            value = '0' + value;\n        }\n        return value;\n    }\n\n    return two(y) + '-' + two(m) + '-' + two(d) + ' ' + two(h) + ':' + two(i) + ':' + two(s);\n}\n\n// Helper to extract date from a string\njSuites.calendar.extractDateFromString = function(date, format) {\n    var v1 = '' + date;\n    var v2 = format.replace(/[0-9]/g,'');\n\n    var test = 1;\n\n    // Get year\n    var y = v2.search(\"YYYY\");\n    y = v1.substr(y,4);\n    if (parseInt(y) != y) {\n        test = 0;\n    }\n\n    // Get month\n    var m = v2.search(\"MM\");\n    m = v1.substr(m,2);\n    if (parseInt(m) != m || d > 12) {\n        test = 0;\n    }\n\n    // Get day\n    var d = v2.search(\"DD\");\n    d = v1.substr(d,2);\n    if (parseInt(d) != d  || d > 31) {\n        test = 0;\n    }\n\n    // Get hour\n    var h = v2.search(\"HH\");\n    if (h >= 0) {\n        h = v1.substr(h,2);\n        if (! parseInt(h) || h > 23) {\n            h = '00';\n        }\n    } else {\n        h = '00';\n    }\n    \n    // Get minutes\n    var i = v2.search(\"MI\");\n    if (i >= 0) {\n        i = v1.substr(i,2);\n        if (! parseInt(i) || i > 59) {\n            i = '00';\n        }\n    } else {\n        i = '00';\n    }\n\n    // Get seconds\n    var s = v2.search(\"SS\");\n    if (s >= 0) {\n        s = v1.substr(s,2);\n        if (! parseInt(s) || s > 59) {\n            s = '00';\n        }\n    } else {\n        s = '00';\n    }\n\n    if (test == 1 && date.length == v2.length) {\n        // Update source\n        var data = y + '-' + m + '-' + d + ' ' + h + ':' +  i + ':' + s;\n\n        return data;\n    }\n\n    return '';\n}\n\n// Helper to convert date into string\njSuites.calendar.getDateString = function(value, format) {\n    // Default calendar\n    if (! format) {\n        var format = 'DD/MM/YYYY';\n    }\n\n    if (value) {\n        var d = ''+value;\n        d = d.split(' ');\n\n        var h = '';\n        var m = '';\n        var s = '';\n\n        if (d[1]) {\n            h = d[1].split(':');\n            m = h[1] ? h[1] : '00';\n            s = h[2] ? h[2] : '00';\n            h = h[0] ? h[0] : '00';\n        } else {\n            h = '00';\n            m = '00';\n            s = '00';\n        }\n\n        d = d[0].split('-');\n\n        if (d[0] && d[1] && d[2] && d[0] > 0 && d[1] > 0 && d[1] < 13 && d[2] > 0 && d[2] < 32) {\n            var calendar = new Date(d[0], d[1]-1, d[2]);\n            var weekday = new Array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');\n            var months = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\n\n            d[1] = (d[1].length < 2 ? '0' : '') + d[1];\n            d[2] = (d[2].length < 2 ? '0' : '') + d[2];\n            h = (h.length < 2 ? '0' : '') + h;\n            m = (m.length < 2 ? '0' : '') + m;\n            s = (s.length < 2 ? '0' : '') + s;\n\n            value = format;\n            value = value.replace('WD', weekday[calendar.getDay()]);\n            value = value.replace('DD', d[2]);\n            value = value.replace('MM', d[1]);\n            value = value.replace('YYYY', d[0]);\n            value = value.replace('YY', d[0].substring(2,4));\n            value = value.replace('MON', months[parseInt(d[1])-1].toUpperCase());\n\n            if (h) {\n                value = value.replace('HH24', h);\n            }\n\n            if (h > 12) {\n                value = value.replace('HH12', h - 12);\n                value = value.replace('HH', h);\n            } else {\n                value = value.replace('HH12', h);\n                value = value.replace('HH', h);\n            }\n\n            value = value.replace('MI', m);\n            value = value.replace('MM', m);\n            value = value.replace('SS', s);\n        } else {\n            value = '';\n        }\n    }\n\n    return value;\n}\n\njSuites.calendar.isOpen = function(e) {\n    if (jSuites.calendar.current) {\n        if (! e.target.className || e.target.className.indexOf('jcalendar') == -1) {\n            jSuites.calendar.current.close();\n        }\n    }\n}\n\nif ('ontouchstart' in document.documentElement === true) {\n    document.addEventListener(\"touchstart\", jSuites.calendar.isOpen);\n} else {\n    document.addEventListener(\"mousedown\", jSuites.calendar.isOpen);\n}\r\n\r\njSuites.color = (function(el, options) {\n    var obj = {};\n    obj.options = {};\n    obj.values = [];\n\n    // Global container\n    if (! jSuites.color.current) {\n        jSuites.color.current = null;\n    }\n\n    /**\n     * @typedef {Object} defaults\n     * @property {(string|Array)} value - Initial value of the compontent\n     * @property {string} placeholder - The default instruction text on the element\n     * @property {requestCallback} onchange - Method to be execute after any changes on the element\n     * @property {requestCallback} onclose - Method to be execute when the element is closed\n     */\n    var defaults = {\n        placeholder: '',\n        value: null,\n        onclose: null,\n        onchange: null,\n    };\n\n    // Loop through our object\n    for (var property in defaults) {\n        if (options && options.hasOwnProperty(property)) {\n            obj.options[property] = options[property];\n        } else {\n            obj.options[property] = defaults[property];\n        }\n    }\n\n    var palette = {\n          \"red\": {\n            \"50\": \"#ffebee\",\n            \"100\": \"#ffcdd2\",\n            \"200\": \"#ef9a9a\",\n            \"300\": \"#e57373\",\n            \"400\": \"#ef5350\",\n            \"500\": \"#f44336\",\n            \"600\": \"#e53935\",\n            \"700\": \"#d32f2f\",\n            \"800\": \"#c62828\",\n            \"900\": \"#b71c1c\",\n          },\n          \"pink\": {\n            \"50\": \"#fce4ec\",\n            \"100\": \"#f8bbd0\",\n            \"200\": \"#f48fb1\",\n            \"300\": \"#f06292\",\n            \"400\": \"#ec407a\",\n            \"500\": \"#e91e63\",\n            \"600\": \"#d81b60\",\n            \"700\": \"#c2185b\",\n            \"800\": \"#ad1457\",\n            \"900\": \"#880e4f\",\n          },\n          \"purple\": {\n            \"50\": \"#f3e5f5\",\n            \"100\": \"#e1bee7\",\n            \"200\": \"#ce93d8\",\n            \"300\": \"#ba68c8\",\n            \"400\": \"#ab47bc\",\n            \"500\": \"#9c27b0\",\n            \"600\": \"#8e24aa\",\n            \"700\": \"#7b1fa2\",\n            \"800\": \"#6a1b9a\",\n            \"900\": \"#4a148c\",\n          },\n          \"indigo\": {\n            \"50\": \"#e8eaf6\",\n            \"100\": \"#c5cae9\",\n            \"200\": \"#9fa8da\",\n            \"300\": \"#7986cb\",\n            \"400\": \"#5c6bc0\",\n            \"500\": \"#3f51b5\",\n            \"600\": \"#3949ab\",\n            \"700\": \"#303f9f\",\n            \"800\": \"#283593\",\n            \"900\": \"#1a237e\",\n          },\n          \"blue\": {\n            \"50\": \"#e3f2fd\",\n            \"100\": \"#bbdefb\",\n            \"200\": \"#90caf9\",\n            \"300\": \"#64b5f6\",\n            \"400\": \"#42a5f5\",\n            \"500\": \"#2196f3\",\n            \"600\": \"#1e88e5\",\n            \"700\": \"#1976d2\",\n            \"800\": \"#1565c0\",\n            \"900\": \"#0d47a1\",\n          },\n          \"cyan\": {\n            \"50\": \"#e0f7fa\",\n            \"100\": \"#b2ebf2\",\n            \"200\": \"#80deea\",\n            \"300\": \"#4dd0e1\",\n            \"400\": \"#26c6da\",\n            \"500\": \"#00bcd4\",\n            \"600\": \"#00acc1\",\n            \"700\": \"#0097a7\",\n            \"800\": \"#00838f\",\n            \"900\": \"#006064\",\n          },\n          \"teal\": {\n            \"50\": \"#e0f2f1\",\n            \"100\": \"#b2dfdb\",\n            \"200\": \"#80cbc4\",\n            \"300\": \"#4db6ac\",\n            \"400\": \"#26a69a\",\n            \"500\": \"#009688\",\n            \"600\": \"#00897b\",\n            \"700\": \"#00796b\",\n            \"800\": \"#00695c\",\n            \"900\": \"#004d40\",\n          },\n          \"green\": {\n            \"50\": \"#e8f5e9\",\n            \"100\": \"#c8e6c9\",\n            \"200\": \"#a5d6a7\",\n            \"300\": \"#81c784\",\n            \"400\": \"#66bb6a\",\n            \"500\": \"#4caf50\",\n            \"600\": \"#43a047\",\n            \"700\": \"#388e3c\",\n            \"800\": \"#2e7d32\",\n            \"900\": \"#1b5e20\",\n          },\n          \"lightgreen\": {\n            \"50\": \"#f1f8e9\",\n            \"100\": \"#dcedc8\",\n            \"200\": \"#c5e1a5\",\n            \"300\": \"#aed581\",\n            \"400\": \"#9ccc65\",\n            \"500\": \"#8bc34a\",\n            \"600\": \"#7cb342\",\n            \"700\": \"#689f38\",\n            \"800\": \"#558b2f\",\n            \"900\": \"#33691e\",\n          },\n          \"lime\": {\n            \"50\": \"#f9fbe7\",\n            \"100\": \"#f0f4c3\",\n            \"200\": \"#e6ee9c\",\n            \"300\": \"#dce775\",\n            \"400\": \"#d4e157\",\n            \"500\": \"#cddc39\",\n            \"600\": \"#c0ca33\",\n            \"700\": \"#afb42b\",\n            \"800\": \"#9e9d24\",\n            \"900\": \"#827717\",\n          },\n          \"yellow\": {\n            \"50\": \"#fffde7\",\n            \"100\": \"#fff9c4\",\n            \"200\": \"#fff59d\",\n            \"300\": \"#fff176\",\n            \"400\": \"#ffee58\",\n            \"500\": \"#ffeb3b\",\n            \"600\": \"#fdd835\",\n            \"700\": \"#fbc02d\",\n            \"800\": \"#f9a825\",\n            \"900\": \"#f57f17\",\n          },\n          \"amber\": {\n            \"50\": \"#fff8e1\",\n            \"100\": \"#ffecb3\",\n            \"200\": \"#ffe082\",\n            \"300\": \"#ffd54f\",\n            \"400\": \"#ffca28\",\n            \"500\": \"#ffc107\",\n            \"600\": \"#ffb300\",\n            \"700\": \"#ffa000\",\n            \"800\": \"#ff8f00\",\n            \"900\": \"#ff6f00\",\n          },\n          \"orange\": {\n            \"50\": \"#fff3e0\",\n            \"100\": \"#ffe0b2\",\n            \"200\": \"#ffcc80\",\n            \"300\": \"#ffb74d\",\n            \"400\": \"#ffa726\",\n            \"500\": \"#ff9800\",\n            \"600\": \"#fb8c00\",\n            \"700\": \"#f57c00\",\n            \"800\": \"#ef6c00\",\n            \"900\": \"#e65100\",\n          },\n          \"deeporange\": {\n            \"50\": \"#fbe9e7\",\n            \"100\": \"#ffccbc\",\n            \"200\": \"#ffab91\",\n            \"300\": \"#ff8a65\",\n            \"400\": \"#ff7043\",\n            \"500\": \"#ff5722\",\n            \"600\": \"#f4511e\",\n            \"700\": \"#e64a19\",\n            \"800\": \"#d84315\",\n            \"900\": \"#bf360c\",\n          },\n          \"brown\": {\n            \"50\": \"#efebe9\",\n            \"100\": \"#d7ccc8\",\n            \"200\": \"#bcaaa4\",\n            \"300\": \"#a1887f\",\n            \"400\": \"#8d6e63\",\n            \"500\": \"#795548\",\n            \"600\": \"#6d4c41\",\n            \"700\": \"#5d4037\",\n            \"800\": \"#4e342e\",\n            \"900\": \"#3e2723\"\n          },\n          \"grey\": {\n            \"50\": \"#fafafa\",\n            \"100\": \"#f5f5f5\",\n            \"200\": \"#eeeeee\",\n            \"300\": \"#e0e0e0\",\n            \"400\": \"#bdbdbd\",\n            \"500\": \"#9e9e9e\",\n            \"600\": \"#757575\",\n            \"700\": \"#616161\",\n            \"800\": \"#424242\",\n            \"900\": \"#212121\"\n          },\n          \"bluegrey\": {\n            \"50\": \"#eceff1\",\n            \"100\": \"#cfd8dc\",\n            \"200\": \"#b0bec5\",\n            \"300\": \"#90a4ae\",\n            \"400\": \"#78909c\",\n            \"500\": \"#607d8b\",\n            \"600\": \"#546e7a\",\n            \"700\": \"#455a64\",\n            \"800\": \"#37474f\",\n            \"900\": \"#263238\"\n          }\n    };\n\n    var x = 0;\n    var y = 0;\n    var colors = [];\n\n    var col = Object.keys(palette);\n    var shade = Object.keys(palette[col[0]]);\n\n    for (var i = 0; i < col.length; i++) {\n        for (var j = 0; j < shade.length; j++) {\n            if (! colors[j]) {\n                colors[j] = [];\n            }\n            colors[j][i] = palette[col[i]][shade[j]];\n        }\n    };\n\n    // Value\n    if (obj.options.value) {\n        el.value = obj.options.value;\n    }\n\n    // Table container\n    var container = document.createElement('div');\n    container.className = 'jcolor';\n\n    // Table container\n    var backdrop = document.createElement('div');\n    backdrop.className = 'jcolor-backdrop';\n    container.appendChild(backdrop);\n\n    // Content\n    var content = document.createElement('div');\n    content.className = 'jcolor-content';\n\n    // Close button\n    var closeButton  = document.createElement('div');\n    closeButton.className = 'jcolor-close';\n    closeButton.innerHTML = 'Done';\n    closeButton.onclick = function() {\n        obj.close();\n    }\n    content.appendChild(closeButton);\n\n    // Table pallete\n    var table = document.createElement('table');\n    table.setAttribute('cellpadding', '7');\n    table.setAttribute('cellspacing', '0');\n\n    for (var i = 0; i < colors.length; i++) {\n        var tr = document.createElement('tr');\n        for (var j = 0; j < colors[i].length; j++) {\n            var td = document.createElement('td');\n            td.style.backgroundColor = colors[i][j];\n            td.setAttribute('data-value', colors[i][j]);\n            td.innerHTML = '';\n            tr.appendChild(td);\n\n            // Selected color\n            if (obj.options.value == colors[i][j]) {\n                td.classList.add('jcolor-selected');\n            }\n\n            // Possible values\n            obj.values[colors[i][j]] = td;\n        }\n        table.appendChild(tr);\n    }\n\n    /**\n     * Open color pallete\n     */\n    obj.open = function() {\n        if (jSuites.color.current) {\n            if (jSuites.color.current != obj) {\n                jSuites.color.current.close();\n            }\n        }\n\n        if (! jSuites.color.current) {\n            // Persist element\n            jSuites.color.current = obj;\n            // Show colorpicker\n            container.classList.add('jcolor-focus');\n\n            const rectContent = content.getBoundingClientRect();\n\n            if (jSuites.getWindowWidth() < 800) {\n                content.style.top = '';\n                content.classList.add('jcolor-fullscreen');\n                jSuites.slideBottom(content, 1);\n                backdrop.style.display = 'block';\n            } else {\n                if (content.classList.contains('jcolor-fullscreen')) {\n                    content.classList.remove('jcolor-fullscreen');\n                    backdrop.style.display = '';\n                }\n\n                const rect = el.getBoundingClientRect();\n\n                if (window.innerHeight < rect.bottom + rectContent.height) {\n                    content.style.top = -1 * (rectContent.height + 2) + 'px';\n                } else {\n                    content.style.top = rect.height + 'px';\n                }\n            }\n\n            container.focus();\n        }\n    }\n\n    /**\n     * Close color pallete\n     */\n    obj.close = function(ignoreEvents) {\n        if (jSuites.color.current) {\n            jSuites.color.current = null;\n            if (! ignoreEvents && typeof(obj.options.onclose) == 'function') {\n                obj.options.onclose(el);\n            }\n            container.classList.remove('jcolor-focus');\n        }\n\n        // Make sure backdrop is hidden\n        backdrop.style.display = '';\n\n        return obj.options.value;\n    }\n\n    /**\n     * Set value\n     */\n    obj.setValue = function(color) {\n        if (color) {\n            el.value = color;\n            obj.options.value = color;\n        }\n\n        // Remove current selecded mark\n        var selected = container.querySelector('.jcolor-selected');\n        if (selected) {\n            selected.classList.remove('jcolor-selected');\n        }\n\n        // Mark cell as selected\n        obj.values[color].classList.add('jcolor-selected');\n\n        // Onchange\n        if (typeof(obj.options.onchange) == 'function') {\n            obj.options.onchange(el, color);\n        }\n    }\n\n    /**\n     * Get value\n     */\n    obj.getValue = function() {\n        return obj.options.value;\n    }\n\n    /**\n     * If element is focus open the picker\n     */\n    el.addEventListener(\"focus\", function(e) {\n        obj.open();\n    });\n\n    el.addEventListener(\"mousedown\", function(e) {\n        obj.open();\n    });\n\n    // Select color\n    container.addEventListener(\"mouseup\", function(e) {\n        if (e.target.tagName == 'TD') {\n            jSuites.color.current.setValue(e.target.getAttribute('data-value'));\n            jSuites.color.current.close();\n        }\n    });\n\n    // Close controller\n    document.addEventListener(\"mousedown\", function(e) {\n        if (jSuites.color.current) {\n            var element = jSuites.getElement(e.target, 'jcolor');\n            if (! element) {\n                jSuites.color.current.close();\n            }\n        }\n    });\n\n    // Possible to focus the container\n    container.setAttribute('tabindex', '900');\n\n    // Placeholder\n    if (obj.options.placeholder) {\n        el.setAttribute('placeholder', obj.options.placeholder);\n    }\n\n    // Append to the table\n    content.appendChild(table);\n    container.appendChild(content);\n\n    // Insert picker after the element\n    el.parentNode.insertBefore(container, el);\n\n    // Keep object available from the node\n    el.color = obj;\n\n    return obj;\n});\n\r\n\r\njSuites.contextmenu = (function(el, options) {\n    var obj = {};\n    obj.options = {};\n\n    // Default configuration\n    var defaults = {\n        items: null,\n        onclick: null,\n    };\n\n    // Loop through our object\n    for (var property in defaults) {\n        if (options && options.hasOwnProperty(property)) {\n            obj.options[property] = options[property];\n        } else {\n            obj.options[property] = defaults[property];\n        }\n    }\n\n    // Class definition\n    el.classList.add('jcontextmenu');\n    // Focusable\n    el.setAttribute('tabindex', '900');\n\n    /**\n     * Open contextmenu\n     */\n    obj.open = function(e, items) {\n        if (items) {\n            // Update content\n            obj.options.items = items;\n            // Create items\n            obj.create(items);\n        }\n        // Coordinates\n        if (e.target) {\n            var x = e.clientX;\n            var y = e.clientY;\n        } else {\n            var x = e.x;\n            var y = e.y;\n        }\n\n        el.classList.add('jcontextmenu-focus');\n        el.focus();\n\n        const rect = el.getBoundingClientRect();\n\n        if (window.innerHeight < y + rect.height) {\n            el.style.top = (y - rect.height) + 'px';\n        } else {\n            el.style.top = y + 'px';\n        }\n\n        if (window.innerWidth < x + rect.width) {\n            if (x - rect.width > 0) {\n                el.style.left = (x - rect.width) + 'px';\n            } else {\n                el.style.left = '10px';\n            }\n        } else {\n            el.style.left = x + 'px';\n        }\n    }\n\n    /**\n     * Close menu\n     */\n    obj.close = function() {\n        if (el.classList.contains('jcontextmenu-focus')) {\n            el.classList.remove('jcontextmenu-focus');\n        }\n    }\n\n    /**\n     * Create items based on the declared objectd\n     * @param {object} items - List of object\n     */\n    obj.create = function(items) {\n        // Update content\n        el.innerHTML = '';\n\n        // Append items\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].type && items[i].type == 'line') {\n                var itemContainer = document.createElement('hr');\n            } else {\n                var itemContainer = document.createElement('div');\n                var itemText = document.createElement('a');\n                itemText.innerHTML = items[i].title;\n\n                if (items[i].disabled) {\n                    itemContainer.className = 'jcontextmenu-disabled';\n                } else if (items[i].onclick) {\n                    itemContainer.method = items[i].onclick;\n                    itemContainer.addEventListener(\"mouseup\", function() {\n                        // Execute method\n                        this.method(this);\n                    });\n                }\n                itemContainer.appendChild(itemText);\n\n                if (items[i].shortcut) {\n                    var itemShortCut = document.createElement('span');\n                    itemShortCut.innerHTML = items[i].shortcut;\n                    itemContainer.appendChild(itemShortCut);\n                }\n            }\n\n            el.appendChild(itemContainer);\n        }\n    }\n\n    if (typeof(obj.options.onclick) == 'function') {\n        el.addEventListener('click', function(e) {\n            obj.options.onclick(obj);\n        });\n    }\n\n    el.addEventListener('blur', function(e) {\n        setTimeout(function() {\n            obj.close();\n        }, 120);\n    });\n\n    window.addEventListener(\"mousewheel\", function() {\n        obj.close();\n    });\n\n    // Create items\n    if (obj.options.items) {\n        obj.create(obj.options.items);\n    }\n\n    el.contextmenu = obj;\n\n    return obj;\n});\n\njSuites.contextmenu.getElement = function(element) {\n    var foundId = 0;\n\n    function path (element) {\n        if (element.parentNode && element.getAttribute('aria-contextmenu-id')) {\n            foundId = element.getAttribute('aria-contextmenu-id')\n        } else {\n            if (element.parentNode) {\n                path(element.parentNode);\n            }\n        }\n    }\n\n    path(element);\n\n    return foundId;\n}\n\ndocument.addEventListener(\"contextmenu\", function(e) {\n    var id = jSuites.contextmenu.getElement(e.target);\n    if (id) {\n        var element = document.querySelector('#' + id);\n        if (! element) {\n            console.error('JSUITES: Contextmenu id not found');\n        } else {\n            element.contextmenu.open(e);\n            e.preventDefault();\n        }\n    }\n});\r\n\r\n/**\n * Dialog v1.0.1\n * Author: paul.hodel@gmail.com\n * https://github.com/paulhodel/jtools\n */\n \njSuites.dialog = (function() {\n    var obj = {};\n    obj.options = {};\n\n    var dialog = document.createElement('div');\n    dialog.setAttribute('tabindex', '901');\n    dialog.className = 'jdialog';\n    dialog.id = 'dialog';\n\n    var dialogHeader = document.createElement('div');\n    dialogHeader.className = 'jdialog-header';\n\n    var dialogTitle = document.createElement('div');\n    dialogTitle.className = 'jdialog-title';\n    dialogHeader.appendChild(dialogTitle);\n\n    var dialogMessage = document.createElement('div');\n    dialogMessage.className = 'jdialog-message';\n    dialogHeader.appendChild(dialogMessage);\n\n    var dialogFooter = document.createElement('div');\n    dialogFooter.className = 'jdialog-footer';\n\n    var dialogContainer = document.createElement('div');\n    dialogContainer.className = 'jdialog-container';\n    dialogContainer.appendChild(dialogHeader);\n    dialogContainer.appendChild(dialogFooter);\n\n    // Confirm\n    var dialogConfirm = document.createElement('div');\n    var dialogConfirmButton = document.createElement('input');\n    dialogConfirmButton.value = obj.options.confirmLabel;\n    dialogConfirmButton.type = 'button';\n    dialogConfirmButton.onclick = function() {\n        if (typeof(obj.options.onconfirm) == 'function') {\n            obj.options.onconfirm();\n        }\n        obj.close();\n    };\n    dialogConfirm.appendChild(dialogConfirmButton);\n    dialogFooter.appendChild(dialogConfirm);\n\n    // Cancel\n    var dialogCancel = document.createElement('div');\n    var dialogCancelButton = document.createElement('input');\n    dialogCancelButton.value = obj.options.cancelLabel;\n    dialogCancelButton.type = 'button';\n    dialogCancelButton.onclick = function() {\n        if (typeof(obj.options.oncancel) == 'function') {\n            obj.options.oncancel();\n        }\n        obj.close();\n    }\n    dialogCancel.appendChild(dialogCancelButton);\n    dialogFooter.appendChild(dialogCancel);\n\n    // Dialog\n    dialog.appendChild(dialogContainer);\n\n    obj.open = function(options) {\n        obj.options = options;\n\n        if (obj.options.title) {\n            dialogTitle.innerHTML = obj.options.title;\n        }\n\n        if (obj.options.message) {\n            dialogMessage.innerHTML = obj.options.message;\n        }\n\n        if (! obj.options.confirmLabel) {\n            obj.options.confirmLabel = 'OK';\n        }\n        dialogConfirmButton.value = obj.options.confirmLabel;\n\n        if (! obj.options.cancelLabel) {\n            obj.options.cancelLabel = 'Cancel';\n        }\n        dialogCancelButton.value = obj.options.cancelLabel;\n\n        if (obj.options.type == 'confirm') {\n            dialogCancelButton.parentNode.style.display = '';\n        } else {\n            dialogCancelButton.parentNode.style.display = 'none';\n        }\n\n        // Append element to the app\n        dialog.style.opacity = 100;\n\n        // Append to the page\n        if (jSuites.el) {\n            jSuites.el.appendChild(dialog);\n        } else {\n            document.body.appendChild(dialog);\n        }\n\n        // Focus\n        dialog.focus();\n\n        // Show\n        setTimeout(function() {\n            dialogContainer.style.opacity = 100;\n        }, 0);\n    };\n\n    obj.close = function() {\n        dialog.style.opacity = 0;\n        dialogContainer.style.opacity = 0;\n        setTimeout(function() {\n            dialog.remove();\n        }, 100);\n    };\n\n    return obj;\n})();\n\njSuites.confirm = (function(message, onconfirm) {\n    if (jSuites.getWindowWidth() < 800) {\n        jSuites.dialog.open({\n            type: 'confirm',\n            message: message,\n            title: 'Confirmation',\n            onconfirm: onconfirm,\n        });\n    } else {\n        if (confirm(message)) {\n            onconfirm();\n        }\n    }\n});\n\njSuites.alert = function(message) {\n    if (jSuites.getWindowWidth() < 800) {\n        jSuites.dialog.open({\n            title:'Alert',\n            message:message,\n        });\n    } else {\n        alert(message);\n    }\n}\n\r\n\r\njSuites.dropdown = (function(el, options) {\n    var obj = {};\n    obj.options = {};\n\n    // If the element is a SELECT tag, create a configuration object\n    if (el.tagName == 'SELECT') {\n        var ret = jSuites.dropdown.extractFromDom(el, options);\n        el = ret.el;\n        options = ret.options;\n    }\n\n    // Default configuration\n    var defaults = {\n        url: null,\n        data: [],\n        multiple: false,\n        autocomplete: false,\n        type: null,\n        width: null,\n        opened: false,\n        value: null,\n        placeholder: '',\n        position: false,\n        onchange: null,\n        onload: null,\n        onopen: null,\n        onclose: null,\n        onblur: null,\n    };\n\n    // Loop through our object\n    for (var property in defaults) {\n        if (options && options.hasOwnProperty(property)) {\n            obj.options[property] = options[property];\n        } else {\n            obj.options[property] = defaults[property];\n        }\n    }\n\n    // Global container\n    if (! jSuites.dropdown.current) {\n        jSuites.dropdown.current = null;\n    }\n\n    // Containers\n    obj.items = [];\n    obj.groups = [];\n    obj.selected = [];\n\n    // Create dropdown\n    el.classList.add('jdropdown');\n \n    if (obj.options.type == 'searchbar') {\n        el.classList.add('jdropdown-searchbar');\n    } else if (obj.options.type == 'list') {\n        el.classList.add('jdropdown-list');\n    } else if (obj.options.type == 'picker') {\n        el.classList.add('jdropdown-picker');\n    } else {\n        if (jSuites.getWindowWidth() < 800) {\n            el.classList.add('jdropdown-picker');\n            obj.options.type = 'picker';\n        } else {\n            if (obj.options.width) {\n                el.style.width = obj.options.width;\n                el.style.minWidth = obj.options.width;\n            }\n            el.classList.add('jdropdown-default');\n            obj.options.type = 'default';\n        }\n    }\n\n    // Header container\n    var containerHeader = document.createElement('div');\n    containerHeader.className = 'jdropdown-container-header';\n\n    // Header\n    var header = document.createElement('input');\n    header.className = 'jdropdown-header';\n    if (typeof(obj.options.onblur) == 'function') {\n        header.onblur = function() {\n            obj.options.onblur(el);\n        }\n    }\n\n    // Container\n    var container = document.createElement('div');\n    container.className = 'jdropdown-container';\n\n    // Dropdown content\n    var content = document.createElement('div');\n    content.className = 'jdropdown-content';\n\n    // Close button\n    var closeButton  = document.createElement('div');\n    closeButton.className = 'jdropdown-close';\n    closeButton.innerHTML = 'Done';\n\n    // Create backdrop\n    var backdrop  = document.createElement('div');\n    backdrop.className = 'jdropdown-backdrop';\n\n    // Autocomplete\n    if (obj.options.autocomplete == true) {\n        el.setAttribute('data-autocomplete', true);\n\n        // Handler\n        var keyTimer = null;\n        header.addEventListener('keyup', function(e) {\n            if (keyTimer) {\n                clearTimeout(keyTimer);\n            }\n            keyTimer = setTimeout(function() {\n                obj.find(header.value);\n                keyTimer = null;\n            }, 500);\n\n            if (! el.classList.contains('jdropdown-focus')) {\n                if (e.which > 65) {\n                    obj.open();\n                }\n            }\n        });\n    } else {\n        header.setAttribute('readonly', 'readonly');\n    }\n\n    // Place holder\n    if (! obj.options.placeholder && el.getAttribute('placeholder')) {\n        obj.options.placeholder = el.getAttribute('placeholder');\n    }\n\n    if (obj.options.placeholder) {\n        header.setAttribute('placeholder', obj.options.placeholder);\n    }\n\n    // Append elements\n    containerHeader.appendChild(header);\n    if (obj.options.type == 'searchbar') {\n        containerHeader.appendChild(closeButton);\n    } else {\n        container.appendChild(closeButton);\n    }\n    container.appendChild(content);\n    el.appendChild(containerHeader);\n    el.appendChild(container);\n    el.appendChild(backdrop);\n\n    /**\n     * Init dropdown\n     */\n    obj.init = function() {\n        if (obj.options.url) {\n            jSuites.ajax({\n                url: obj.options.url,\n                method: 'GET',\n                dataType: 'json',\n                success: function(data) {\n                    if (data) {\n                        // Set data\n                        obj.setData(data);\n                        // Set value\n                        if (obj.options.value != null) {\n                            obj.setValue(obj.options.value);\n                        }\n                        // Onload method\n                        if (typeof(obj.options.onload) == 'function') {\n                            obj.options.onload(el, obj, data);\n                        }\n                    }\n                }\n            });\n        } else {\n            // Set data\n            obj.setData();\n            // Set value\n            if (obj.options.value != null) {\n                obj.setValue(obj.options.value);\n            }\n            // Onload\n            if (typeof(obj.options.onload) == 'function') {\n                obj.options.onload(el, obj, data);\n            }\n        }\n\n        // Open dropdown\n        if (obj.options.opened == true) {\n            obj.open();\n        }\n    }\n\n    obj.getUrl = function() {\n        return obj.options.url;\n    }\n\n    obj.setUrl = function(url) {\n        obj.options.url = url;\n\n        jSuites.ajax({\n            url: obj.options.url,\n            method: 'GET',\n            dataType: 'json',\n            success: function(data) {\n                obj.setData(data);\n            }\n        });\n    }\n\n    /**\n     * Create a new item\n     */\n    obj.createItem = function(data) {\n        // Create item\n        var item = {};\n        item.element = document.createElement('div');\n        item.element.className = 'jdropdown-item';\n        item.value = data.id;\n        item.text = data.name;\n        item.textLowerCase = data.name.toLowerCase();\n\n        // Image\n        if (data.image) {\n            var image = document.createElement('img');\n            image.className = 'jdropdown-image';\n            image.src = data.image;\n            if (! data.title) {\n               image.classList.add('jdropdown-image-small');\n            }\n            item.element.appendChild(image);\n        }\n\n        // Set content\n        var node = document.createElement('div');\n        node.className = 'jdropdown-description';\n        node.innerHTML = data.name;\n\n        // Title\n        if (data.title) {\n            var title = document.createElement('div');\n            title.className = 'jdropdown-title';\n            title.innerHTML = data.title;\n            node.appendChild(title);\n        }\n\n        // Add node to item\n        item.element.appendChild(node);\n\n        return item;\n    }\n\n    obj.setData = function(data) {\n        // Update data\n        if (data) {\n            obj.options.data = data;\n        }\n\n        // Data\n        var data = obj.options.data;\n\n        // Make sure the content container is blank\n        content.innerHTML = '';\n\n        // Reset\n        obj.reset();\n\n        // Reset items\n        obj.items = [];\n\n        // Helpers\n        var items = [];\n        var groups = [];\n\n        // Create elements\n        if (data.length) {\n            // Prepare data\n            for (var i = 0; i < data.length; i++) {\n                // Compatibility\n                if (typeof(data[i]) != 'object') {\n                    // Correct format\n                    obj.options.data[i] = data[i] = { id: data[i], name: data[i] };\n                }\n\n                // Process groups\n                if (data[i].group) {\n                    if (! groups[data[i].group]) {\n                        groups[data[i].group] = [];\n                    }\n                    groups[data[i].group].push(i);\n                } else {\n                    items.push(i);\n                }\n            }\n\n            // Groups\n            var groupNames = Object.keys(groups);\n\n            // Append groups in case exists\n            if (groupNames.length > 0) {\n                for (var i = 0; i < groupNames.length; i++) {\n                    // Group container\n                    var group = document.createElement('div');\n                    group.className = 'jdropdown-group';\n                    // Group name\n                    var groupName = document.createElement('div');\n                    groupName.className = 'jdropdown-group-name';\n                    groupName.innerHTML = groupNames[i];\n                    // Group arrow\n                    var groupArrow = document.createElement('i');\n                    groupArrow.className = 'jdropdown-group-arrow jdropdown-group-arrow-down';\n                    groupName.appendChild(groupArrow);\n                    // Group items\n                    var groupContent = document.createElement('div');\n                    groupContent.className = 'jdropdown-group-items';\n                    for (var j = 0; j < groups[groupNames[i]].length; j++) {\n                        var item = obj.createItem(data[groups[groupNames[i]][j]]);\n                        groupContent.appendChild(item.element);\n                        // Items\n                        obj.items.push(item);\n                    }\n                    // Group itens\n                    group.appendChild(groupName);\n                    group.appendChild(groupArrow);\n                    group.appendChild(groupContent);\n                    content.appendChild(group);\n                }\n            }\n\n            if (items.length) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = obj.createItem(data[items[i]]);\n                    obj.items.push(item);\n                    content.appendChild(item.element);\n                }\n            }\n\n            // Create the Indexes\n            for (var i = 0; i < obj.items.length; i++) {\n                obj.items[i].element.setAttribute('data-index', i);\n            }\n        }\n    }\n\n    obj.getText = function(asArray) {\n        // Result\n        var result = [];\n        // Append options\n        for (var i = 0; i < obj.selected.length; i++) {\n            if (obj.items[obj.selected[i]]) {\n                result.push(obj.items[obj.selected[i]].text);\n            }\n        }\n\n        if (asArray) {\n            return result;\n        } else {\n            return result.join('; ');\n        }\n    }\n\n    obj.getValue = function(asArray) {\n        // Result\n        var result = [];\n        // Append options\n        for (var i = 0; i < obj.selected.length; i++) {\n            if (obj.items[obj.selected[i]]) {\n                result.push(obj.items[obj.selected[i]].value);\n            }\n        }\n\n        if (asArray) {\n            return result;\n        } else {\n            return result.join(';');\n        }\n    }\n\n    obj.setValue = function(value) {\n        // Remove values\n        for (var i = 0; i < obj.selected.length; i++) {\n            obj.items[obj.selected[i]].element.classList.remove('jdropdown-selected')\n        } \n\n        // Reset selected\n        obj.selected = [];\n\n        // Set values\n        if (value != null) {\n            if (Array.isArray(value)) {\n                for (var i = 0; i < obj.items.length; i++) {\n                    for (var j = 0; j < value.length; j++) {\n                        if (obj.items[i].value == value[j]) {\n                            // Keep index of the selected item\n                            obj.selected.push(i);\n                            // Visual selection\n                            obj.items[i].element.classList.add('jdropdown-selected');\n                        }\n                    }\n                }\n            } else {\n                for (var i = 0; i < obj.items.length; i++) {\n                    if (obj.items[i].value == value) {\n                        // Keep index of the selected item\n                        obj.selected.push(i);\n                        // Visual selection\n                        obj.items[i].element.classList.add('jdropdown-selected');\n                    }\n                }\n            }\n        }\n\n        // Update labels\n        obj.updateLabel();\n    }\n\n    obj.selectIndex = function(index) {\n        // Only select those existing elements\n        if (obj.items && obj.items[index]) {\n            var index = index = parseInt(index);\n            // Current selection\n            var oldValue = obj.getValue();\n            var oldLabel = obj.getText();\n\n            // Remove cursor style\n            if (obj.currentIndex != null) {\n                obj.items[obj.currentIndex].element.classList.remove('jdropdown-cursor');\n            }\n            // Set cursor style\n            obj.items[index].element.classList.add('jdropdown-cursor');\n\n            // Update cursor position\n            obj.currentIndex = index;\n\n            // Focus behaviour\n            if (! obj.options.multiple) {\n                // Unselect option\n                if (obj.items[index].element.classList.contains('jdropdown-selected')) {\n                    // Reset selected\n                    obj.resetSelected();\n                } else {\n                    // Reset selected\n                    obj.resetSelected();\n                    // Update selected item\n                    obj.items[index].element.classList.add('jdropdown-selected');\n                    // Add to the selected list\n                    obj.selected.push(index);\n                    // Close\n                    obj.close();\n                }\n            } else {\n                // Toggle option\n                if (obj.items[index].element.classList.contains('jdropdown-selected')) {\n                    obj.items[index].element.classList.remove('jdropdown-selected');\n                    // Remove from selected list\n                    var indexToRemove = obj.selected.indexOf(index);\n                    // Remove select\n                    obj.selected.splice(indexToRemove, 1);\n                } else {\n                    // Select element\n                    obj.items[index].element.classList.add('jdropdown-selected');\n                    // Add to the selected list\n                    obj.selected.push(index);\n                }\n\n                // Update labels for multiple dropdown\n                if (! obj.options.autocomplete) {\n                    obj.updateLabel();\n                }\n            }\n\n            // Current selection\n            var newValue = obj.getValue();\n            var newLabel = obj.getText();\n\n            // Events\n            if (typeof(obj.options.onchange) == 'function') {\n                obj.options.onchange(el, index, oldValue, newValue, oldLabel, newLabel);\n            }\n        }\n    }\n\n    obj.selectItem = function(item) {\n        if (jSuites.dropdown.current) {\n            var index = item.getAttribute('data-index');\n            if (index != null) {\n                obj.selectIndex(index);\n            }\n        }\n    }\n\n    obj.find = function(str) {\n        // Force lowercase\n        var str = str ? str.toLowerCase() : null;\n\n        // Append options\n        for (var i = 0; i < obj.items.length; i++) {\n            if (str == null || obj.items[i].textLowerCase.indexOf(str) != -1) {\n                obj.items[i].element.style.display = '';\n            } else {\n                if (obj.selected.indexOf(i) == -1) {\n                    obj.items[i].element.style.display = 'none';\n                } else {\n                    obj.items[i].element.style.display = '';\n                }\n            }\n        }\n\n        var numVisibleItems = function(items) {\n            var visible = 0;\n            for (var j = 0; j < items.length; j++) {\n                if (items[j].style.display != 'none') {\n                    visible++;\n                }\n            }\n            return visible;\n        }\n\n        // Hide groups\n        /*for (var i = 0; i < obj.groups.length; i++) {\n            if (numVisibleItems(obj.groups[i].querySelectorAll('.jdropdown-item'))) {\n                obj.groups[i].children[0].style.display = '';\n            } else {\n                obj.groups[i].children[0].style.display = 'none';\n            }\n        }*/\n    }\n\n    obj.updateLabel = function() {\n        // Update label\n        header.value = obj.getText();\n    }\n\n    obj.open = function() {\n        if (jSuites.dropdown.current != el) {\n            if (jSuites.dropdown.current) {\n                jSuites.dropdown.current.dropdown.close();\n            }\n            jSuites.dropdown.current = el;\n        }\n\n        // Focus\n        if (! el.classList.contains('jdropdown-focus')) {\n            // Add focus\n            el.classList.add('jdropdown-focus');\n\n            // Animation\n            if (jSuites.getWindowWidth() < 800) {\n                if (obj.options.type == null || obj.options.type == 'picker') {\n                    jSuites.slideBottom(container, 1);\n                }\n            }\n\n            // Filter\n            if (obj.options.autocomplete == true) {\n                // Redo search\n                obj.find();\n                // Clear search field\n                header.value = '';\n                header.focus();\n            }\n\n            // Set cursor for the first or first selected element\n            var cursor = (obj.selected && obj.selected[0]) ? obj.selected[0] : 0;\n            obj.updateCursor(cursor);\n\n            // Container Size\n            if (! obj.options.type || obj.options.type == 'default') {\n                const rect = el.getBoundingClientRect();\n                const rectContainer = container.getBoundingClientRect();\n\n                if (obj.options.position) {\n                    container.style.position = 'fixed';\n                    if (window.innerHeight < rect.bottom + rectContainer.height) {\n                        container.style.top = (rect.top - rectContainer.height - 2) + 'px';\n                    } else {\n                        container.style.top = (rect.top + rect.height + 1) + 'px';\n                    }\n                    container.style.left = rect.left + 'px';\n                } else {\n                    if (window.innerHeight < rect.bottom + rectContainer.height) {\n                        container.style.bottom = (rect.height) + 'px';\n                    } else {\n                        container.style.top = '';\n                        container.style.bottom = '';\n                    }\n                }\n\n                container.style.minWidth = rect.width + 'px';\n            }\n        }\n\n        // Events\n        if (typeof(obj.options.onopen) == 'function') {\n            obj.options.onopen(el);\n        }\n    }\n\n    obj.close = function(ignoreEvents) {\n        if (jSuites.dropdown.current) {\n            // Remove controller\n            jSuites.dropdown.current = null\n            // Remove cursor\n            obj.resetCursor();\n            // Update labels\n            obj.updateLabel();\n            // Events\n            if (! ignoreEvents && typeof(obj.options.onclose) == 'function') {\n                obj.options.onclose(el);\n            }\n            // Blur\n            if (header.blur) {\n                header.blur();\n            }\n            // Remove focus\n            el.classList.remove('jdropdown-focus');\n        }\n\n        return obj.getValue();\n    }\n\n    /**\n     * Update position cursor\n     */\n    obj.updateCursor = function(index) {\n        // Set new cursor\n        if (obj.items && obj.items[index] && obj.items[index].element) {\n            // Reset cursor\n            obj.resetCursor();\n\n            // Set new cursor\n            obj.items[index].element.classList.add('jdropdown-cursor');\n\n            // Update position\n            obj.currentIndex = parseInt(index);\n    \n            // Update scroll to the cursor element\n            var container = content.scrollTop;\n            var element = obj.items[obj.currentIndex].element;\n            content.scrollTop = element.offsetTop - element.scrollTop + element.clientTop - 95;\n        }\n    }\n\n    /**\n     * Reset cursor\n     */\n    obj.resetCursor = function() {\n        // Remove current cursor\n        if (obj.currentIndex != null) {\n            // Remove visual cursor\n            if (obj.items && obj.items[obj.currentIndex]) {\n                obj.items[obj.currentIndex].element.classList.remove('jdropdown-cursor');\n            }\n            // Reset cursor\n            obj.currentIndex = null;\n        }\n    }\n\n    /**\n     * Reset cursor\n     */\n    obj.resetSelected = function() {\n        // Unselected all\n        if (obj.selected) {\n            // Remove visual selection\n            for (var i = 0; i < obj.selected.length; i++) {\n                if (obj.items[obj.selected[i]]) {\n                    obj.items[obj.selected[i]].element.classList.remove('jdropdown-selected');\n                }\n            }\n            // Reset current selected items\n            obj.selected = [];\n        }\n    }\n\n    /**\n     * Reset cursor and selected items\n     */\n    obj.reset = function() {\n        // Reset cursor\n        obj.resetCursor();\n\n        // Reset selected\n        obj.resetSelected();\n\n        // Update labels\n        obj.updateLabel();\n    }\n\n    /**\n     * First visible item\n     */\n    obj.firstVisible = function() {\n        var newIndex = null;\n        for (var i = 0; i < obj.items.length; i++) {\n            if (obj.items[i].element.style.display != 'none') {\n                newIndex = i;\n                break;\n            }\n        }\n\n        if (newIndex == null) {\n            return false;\n        }\n\n        obj.updateCursor(newIndex);\n    }\n\n    /**\n     * Navigation\n     */\n    obj.first = function() {\n        var newIndex = null;\n        for (var i = obj.currentIndex - 1; i >= 0; i--) {\n            if (obj.items[i].element.style.display != 'none') {\n                newIndex = i;\n            }\n        }\n\n        if (newIndex == null) {\n            return false;\n        }\n\n        obj.updateCursor(newIndex);\n    }\n\n    obj.last = function() {\n        var newIndex = null;\n        for (var i = obj.currentIndex + 1; i < obj.items.length; i++) {\n            if (obj.items[i].element.style.display != 'none') {\n                newIndex = i;\n            }\n        }\n\n        if (newIndex == null) {\n            return false;\n        }\n\n        obj.updateCursor(newIndex);\n    }\n\n    obj.next = function() {\n        var newIndex = null;\n        for (var i = obj.currentIndex + 1; i < obj.items.length; i++) {\n            if (obj.items[i].element.style.display != 'none') {\n                newIndex = i;\n                break;\n            }\n        }\n\n        if (newIndex == null) {\n            return false;\n        }\n\n        obj.updateCursor(newIndex);\n    }\n\n    obj.prev = function() {\n        var newIndex = null;\n        for (var i = obj.currentIndex - 1; i >= 0; i--) {\n            if (obj.items[i].element.style.display != 'none') {\n                newIndex = i;\n                break;\n            }\n        }\n\n        if (newIndex == null) {\n            return false;\n        }\n\n        obj.updateCursor(newIndex);\n    }\n\n    if (! jSuites.dropdown.hasEvents) {\n        if ('ontouchsend' in document.documentElement === true) {\n            document.addEventListener('touchsend', jSuites.dropdown.mouseup);\n        } else {\n            document.addEventListener('mouseup', jSuites.dropdown.mouseup);\n        }\n        document.addEventListener('keydown', jSuites.dropdown.onkeydown);\n\n        jSuites.dropdown.hasEvents = true;\n    }\n\n    // Start dropdown\n    obj.init();\n\n    // Keep object available from the node\n    el.dropdown = obj;\n\n    return obj;\n});\n\njSuites.dropdown.hasEvents = false;\n\njSuites.dropdown.mouseup = function(e) {\n    var element = jSuites.getElement(e.target, 'jdropdown');\n    if (element) {\n        var dropdown = element.dropdown;\n        if (e.target.classList.contains('jdropdown-header')) {\n            if (element.classList.contains('jdropdown-focus') && element.classList.contains('jdropdown-default')) {\n                dropdown.close();\n            } else {\n                dropdown.open();\n            }\n        } else if (e.target.classList.contains('jdropdown-group-name')) {\n            var items = e.target.nextSibling.children;\n            if (e.target.nextSibling.style.display != 'none') {\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].style.display != 'none') {\n                        dropdown.selectItem(items[i]);\n                    }\n                }\n            }\n        } else if (e.target.classList.contains('jdropdown-group-arrow')) {\n            if (e.target.classList.contains('jdropdown-group-arrow-down')) {\n                e.target.classList.remove('jdropdown-group-arrow-down');\n                e.target.classList.add('jdropdown-group-arrow-up');\n                e.target.parentNode.nextSibling.style.display = 'none';\n            } else {\n                e.target.classList.remove('jdropdown-group-arrow-up');\n                e.target.classList.add('jdropdown-group-arrow-down');\n                e.target.parentNode.nextSibling.style.display = '';\n            }\n        } else if (e.target.classList.contains('jdropdown-item')) {\n            dropdown.selectItem(e.target);\n        } else if (e.target.classList.contains('jdropdown-image')) {\n            dropdown.selectIndex(e.target.parentNode.getAttribute('data-index'));\n        } else if (e.target.classList.contains('jdropdown-description')) {\n            dropdown.selectIndex(e.target.parentNode.getAttribute('data-index'));\n        } else if (e.target.classList.contains('jdropdown-title')) {\n            dropdown.selectIndex(e.target.parentNode.parentNode.getAttribute('data-index'));\n        } else if (e.target.classList.contains('jdropdown-close') || e.target.classList.contains('jdropdown-backdrop')) {\n            // Close\n            dropdown.close();\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n    } else {\n        if (jSuites.dropdown.current) {\n            jSuites.dropdown.current.dropdown.close();\n        }\n    }\n}\n\n\n// Keydown controls\njSuites.dropdown.onkeydown = function(e) {\n    if (jSuites.dropdown.current) {\n        // Element\n        var element = jSuites.dropdown.current.dropdown;\n        // Index\n        var index = element.currentIndex;\n\n        if (e.shiftKey) {\n\n        } else {\n            if (e.which == 13 || e.which == 27 || e.which == 35 || e.which == 36 || e.which == 38 || e.which == 40) {\n                // Move cursor\n                if (e.which == 13) {\n                    element.selectIndex(index)\n                } else if (e.which == 38) {\n                    if (index == null) {\n                        element.firstVisible();\n                    } else if (index > 0) {\n                        element.prev();\n                    }\n                } else if (e.which == 40) {\n                    if (index == null) {\n                        element.firstVisible();\n                    } else if (index + 1 < element.options.data.length) {\n                        element.next();\n                    }\n                } else if (e.which == 36) {\n                    element.first();\n                } else if (e.which == 35) {\n                    element.last();\n                } else if (e.which == 27) {\n                    element.close();\n                }\n\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        }\n    }\n}\n\njSuites.dropdown.extractFromDom = function(el, options) {\n    // Keep reference\n    var select = el;\n    if (! options) {\n        options = {};\n    }\n    // Prepare configuration\n    if (el.getAttribute('multiple') && (! options || options.multiple == undefined)) {\n        options.multiple = true;\n    }\n    if (el.getAttribute('placeholder') && (! options || options.placeholder == undefined)) {\n        options.placeholder = el.getAttribute('placeholder');\n    }\n    if (el.getAttribute('data-autocomplete') && (! options || options.autocomplete == undefined)) {\n        options.autocomplete = true;\n    }\n    if (! options || options.width == undefined) {\n        options.width = el.offsetWidth;\n    }\n    if (el.value && (! options || options.value == undefined)) {\n        options.value = el.value;\n    }\n    if (! options || options.data == undefined) {\n        options.data = [];\n        for (var j = 0; j < el.children.length; j++) {\n            if (el.children[j].tagName == 'OPTGROUP') {\n                for (var i = 0; i < el.children[j].children.length; i++) {\n                    options.data.push({\n                        id: el.children[j].children[i].value,\n                        name: el.children[j].children[i].innerHTML,\n                        group: el.children[j].getAttribute('label'),\n                    });\n                }\n            } else {\n                options.data.push({\n                    id: el.children[j].value,\n                    name: el.children[j].innerHTML,\n                });\n            }\n        }\n    }\n    if (! options || options.onchange == undefined) {\n        options.onchange = function(a,b,c,d) {\n            if (options.multiple == true) {\n                if (obj.items[b].classList.contains('jdropdown-selected')) {\n                    select.options[b].setAttribute('selected', 'selected');\n                } else {\n                    select.options[b].removeAttribute('selected');\n                }\n            } else {\n                select.value = d;\n            }\n        }\n    }\n    // Create DIV\n    var div = document.createElement('div');\n    el.parentNode.insertBefore(div, el);\n    el.style.display = 'none';\n    el = div;\n\n    return { el:el, options:options };\n}\r\n\r\n/**\n * (c) jTools Text Editor\n * https://github.com/paulhodel/jtools\n *\n * @author: Paul Hodel <paul.hodel@gmail.com>\n * @description: Inline richtext editor\n */\n\njSuites.editor = (function(el, options) {\n    var obj = {};\n    obj.options = {};\n\n    // Default configuration\n    var defaults = {\n        // Initial HTML content\n        value: null,\n        // Initial snippet\n        snippet: null,\n        // Add toolbar\n        toolbar: null,\n        // Max height\n        maxHeight: null,\n        // Website parser is to read websites and images from cross domain\n        remoteParser: null,\n        // Key from youtube to read properties from URL\n        youtubeKey: null,\n        // User list\n        userSearch: null,\n        // Parse URL\n        parseURL: false,\n        // Accept drop files\n        dropZone: true,\n        dropAsAttachment: false,\n        acceptImages: true,\n        acceptFiles: false,\n        maxFileSize: 5000000, \n        // Border\n        border: true,\n        padding: true,\n        focus: false,\n        // Events\n        onclick: null,\n        onfocus: null,\n        onblur: null,\n        onload: null,\n        onenter: null,\n        onkeyup: null,\n        onkeydown: null,\n    };\n\n    // Loop through our object\n    for (var property in defaults) {\n        if (options && options.hasOwnProperty(property)) {\n            obj.options[property] = options[property];\n        } else {\n            obj.options[property] = defaults[property];\n        }\n    }\n\n    // Private controllers\n    var imageResize = 0;\n    var editorTimer = null;\n    var editorAction = null;\n\n    // Make sure element is empty\n    el.innerHTML = '';\n\n    // Prepare container\n    el.classList.add('jeditor-container');\n\n    // Padding\n    if (obj.options.padding == true) {\n        el.classList.add('jeditor-padding');\n    }\n\n    // Border\n    if (obj.options.border == false) {\n        el.style.border = '0px';\n    }\n\n    // Snippet\n    var snippet = document.createElement('div');\n    snippet.className = 'snippet';\n    snippet.setAttribute('contenteditable', false);\n\n    // Toolbar\n    var toolbar = document.createElement('div');\n    toolbar.className = 'jeditor-toolbar';\n\n    // Create editor\n    var editor = document.createElement('div');\n    editor.setAttribute('contenteditable', true);\n    editor.setAttribute('spellcheck', false);\n    editor.className = 'jeditor';\n\n    // Max height\n    if (obj.options.maxHeight) {\n        editor.style.overflowY = 'auto';\n        editor.style.maxHeight = obj.options.maxHeight;\n    }\n\n    // Set editor initial value\n    if (obj.options.value) {\n        var value = obj.options.value;\n    } else {\n        var value = el.innerHTML ? el.innerHTML : ''; \n    }\n\n    if (! value) {\n        var value = '<br>';\n    }\n\n    /**\n     * Extract images from a HTML string\n     */\n    var extractImageFromHtml = function(html) {\n        // Create temp element\n        var div = document.createElement('div');\n        div.innerHTML = html;\n\n        // Extract images\n        var img = div.querySelectorAll('img');\n\n        if (img.length) {\n            for (var i = 0; i < img.length; i++) {\n                obj.addImage(img[i].src);\n            }\n        }\n    }\n\n    /**\n     * Insert node at caret\n     */\n    var insertNodeAtCaret = function(newNode) {\n        var sel, range;\n\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                var selectedText = range.toString();\n                range.deleteContents();\n                range.insertNode(newNode); \n                // move the cursor after element\n                range.setStartAfter(newNode);\n                range.setEndAfter(newNode); \n                sel.removeAllRanges();\n                sel.addRange(range);\n            }\n        }\n    }\n\n    /**\n     * Append snippet or thumbs in the editor\n     * @Param object data\n     */\n    var appendElement = function(data) {\n        // Reset snippet\n        snippet.innerHTML = '';\n\n        if (data.image) {\n            var div = document.createElement('div');\n            div.className = 'snippet-image';\n            div.setAttribute('data-k', 'image');\n            snippet.appendChild(div);\n\n            var image = document.createElement('img');\n            image.src = data.image;\n            div.appendChild(image);\n        }\n\n        var div = document.createElement('div');\n        div.className = 'snippet-title';\n        div.setAttribute('data-k', 'title');\n        div.innerHTML = data.title;\n        snippet.appendChild(div);\n\n        var div = document.createElement('div');\n        div.className = 'snippet-description';\n        div.setAttribute('data-k', 'description');\n        div.innerHTML = data.description;\n        snippet.appendChild(div);\n\n        var div = document.createElement('div');\n        div.className = 'snippet-host';\n        div.setAttribute('data-k', 'host');\n        div.innerHTML = data.host;\n        snippet.appendChild(div);\n\n        var div = document.createElement('div');\n        div.className = 'snippet-url';\n        div.setAttribute('data-k', 'url');\n        div.innerHTML = data.url;\n        snippet.appendChild(div);\n\n        editor.appendChild(snippet);\n    }\n\n    var verifyEditor = function() {\n        clearTimeout(editorTimer);\n        editorTimer = setTimeout(function() {\n            var snippet = editor.querySelector('.snippet');\n            var thumbsContainer = el.querySelector('.jeditor-thumbs-container');\n\n            if (! snippet && ! thumbsContainer) {\n                var html = editor.innerHTML.replace(/\\n/g, ' ');\n                var container = document.createElement('div');\n                container.innerHTML = html;\n                var thumbsContainer = container.querySelector('.jeditor-thumbs-container');\n                if (thumbsContainer) {\n                    thumbsContainer.remove();\n                }\n                var text = container.innerText; \n                var url = jSuites.editor.detectUrl(text);\n\n                if (url) {\n                    if (url[0].substr(-3) == 'jpg' || url[0].substr(-3) == 'png' || url[0].substr(-3) == 'gif') {\n                        if (jSuites.editor.getDomain(url[0]) == window.location.hostname) {\n                            obj.importImage(url[0], '');\n                        } else {\n                            obj.importImage(obj.options.remoteParser + url[0], '');\n                        }\n                    } else {\n                        var id = jSuites.editor.youtubeParser(url[0]);\n\n                        if (id) {\n                            obj.getYoutube(id);\n                        } else {\n                            obj.getWebsite(url[0]);\n                        }\n                    }\n                }\n            }\n        }, 1000);\n    }\n\n    obj.parseContent = function() {\n        verifyEditor();\n    }\n\n    /**\n     * Get metadata from a youtube video\n     */\n    obj.getYoutube = function(id) {\n        if (! obj.options.youtubeKey) {\n            console.error('The youtubeKey is not defined');\n        } else {\n            jSuites.ajax({\n                url: 'https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&key=' + obj.options.youtubeKey + '&id=' + id,\n                method: 'GET',\n                dataType: 'json',\n                success: function(result) {\n                    // Only valid elements to be appended\n                    if (result.items && result.items[0]) {\n                        var p = {\n                            title: '',\n                            description: '',\n                            image: '',\n                            host: 'www.youtube.com',\n                            url: 'https://www.youtube.com?watch=' + id,\n                        }\n                        if (result.items[0].snippet.title) {\n                            p.title = result.items[0].snippet.title;\n                        }\n                        if (result.items[0].snippet.description) {\n                            p.description = result.items[0].snippet.description;\n\n                            if (p.description.length > 150) {\n                                p.description = p.description.substr(0, 150) + '...';\n                            }\n                        }\n                        if (result.items[0].snippet.thumbnails.medium.url) {\n                            p.image = result.items[0].snippet.thumbnails.medium.url;\n                        }\n\n                        appendElement(p);\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * Get meta information from a website\n     */\n    obj.getWebsite = function(url) {\n        if (! obj.options.remoteParser) {\n            console.log('The remoteParser is not defined');\n        } else {\n            jSuites.ajax({\n                url: obj.options.remoteParser + encodeURI(url.trim()),\n                method: 'GET',\n                dataType: 'json',\n                success: function(result) {\n                    var p = {\n                        title: '',\n                        description: '',\n                        image: '',\n                        host: url,\n                        url: url,\n                    }\n\n                    if (result.title) {\n                        p.title = result.title;\n                    }\n                    if (result.description) {\n                        p.description = result.description;\n                    }\n                    if (result.image) {\n                        p.image = result.image;\n                    } else if (result['og:image']) {\n                        p.image = result['og:image'];\n                    }\n                    if (result.host) {\n                        p.host = result.host;\n                    }\n                    if (result.url) {\n                        p.url = result.url;\n                    }\n\n                    appendElement(p);\n                }\n            });\n        }\n    }\n\n    /**\n     * Set editor value\n     */\n    obj.setData = function(html) {\n        editor.innerHTML = html;\n        cursor();\n    }\n\n    /**\n     * Get editor data\n     */\n    obj.getData = function(json) {\n        if (! json) {\n            var data = editor.innerHTML;\n        } else {\n            var data = {\n                content : '',\n            }\n\n            // Get tag users\n            var tagged = editor.querySelectorAll('.post-tag');\n            if (tagged.length) {\n                data.users = [];\n                for (var i = 0; i < tagged.length; i++) {\n                    var userId = tagged[i].getAttribute('data-user');\n                    if (userId) {\n                        data.users.push(userId);\n                    }\n                }\n                data.users = data.users.join(',');\n            }\n\n            if (snippet.innerHTML) {\n                var index = 0;\n                data.snippet = {};\n                for (var i = 0; i < snippet.children.length; i++) {\n                    // Get key from element\n                    var key = snippet.children[i].getAttribute('data-k');\n                    if (key) {\n                        if (key == 'image') {\n                            data.snippet.image = snippet.children[i].children[0].getAttribute('src');\n                        } else {\n                            data.snippet[key] = snippet.children[i].innerHTML;\n                        }\n                    }\n                }\n\n                snippet.innerHTML = '';\n                snippet.remove();\n            }\n\n            var text = editor.innerHTML;\n            text = text.replace(/<br>/g, \"\\n\");\n            text = text.replace(/<\\/div>/g, \"<\\/div>\\n\");\n            text = text.replace(/<(?:.|\\n)*?>/gm, \"\");\n            data.content = text.trim();\n            data = JSON.stringify(data);\n        }\n\n        return data;\n    }\n\n    // Reset\n    obj.reset = function() {\n        editor.innerHTML = '';\n    }\n\n    obj.addPdf = function(data) {\n        if (data.result.substr(0,4) != 'data') {\n            console.error('Invalid source');\n        } else {\n            var canvas = document.createElement('canvas');\n            canvas.width = 60;\n            canvas.height = 60;\n\n            var img = new Image();\n            var ctx = canvas.getContext('2d');\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n            canvas.toBlob(function(blob) {\n                var newImage = document.createElement('img');\n                newImage.src = window.URL.createObjectURL(blob);\n                newImage.setAttribute('data-extension', 'pdf');\n                if (data.name) {\n                    newImage.setAttribute('data-name', data.name);\n                }\n                if (data.size) {\n                    newImage.setAttribute('data-size', data.size);\n                }\n                if (data.date) {\n                    newImage.setAttribute('data-date', data.date);\n                }\n                newImage.className = 'jfile pdf';\n\n                insertNodeAtCaret(newImage);\n                jSuites.files[newImage.src] = data.result.substr(data.result.indexOf(',') + 1);\n            });\n        }\n    }\n\n    obj.addImage = function(src, name, size, date) {\n        if (src.substr(0,4) != 'data' && ! obj.options.remoteParser) {\n            console.error('remoteParser not defined in your initialization');\n        } else {\n            // This is to process cross domain images\n            if (src.substr(0,4) == 'data') {\n                var extension = src.split(';')\n                extension = extension[0].split('/');\n                extension = extension[1];\n            } else {\n                var extension = src.substr(src.lastIndexOf('.') + 1);\n                // Work for cross browsers\n                src = obj.options.remoteParser + src;\n            }\n\n            var img = new Image();\n\n            img.onload = function onload() {\n                var canvas = document.createElement('canvas');\n                canvas.width = img.width;\n                canvas.height = img.height;\n\n                var ctx = canvas.getContext('2d');\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n                canvas.toBlob(function(blob) {\n                    var newImage = document.createElement('img');\n                    newImage.src = window.URL.createObjectURL(blob);\n                    newImage.setAttribute('tabindex', '900');\n                    newImage.setAttribute('data-extension', extension);\n                    if (name) {\n                        newImage.setAttribute('data-name', name);\n                    }\n                    if (size) {\n                        newImage.setAttribute('data-size', size);\n                    }\n                    if (date) {\n                        newImage.setAttribute('data-date', date);\n                    }\n                    newImage.className = 'jfile';\n                    var content = canvas.toDataURL();\n                    insertNodeAtCaret(newImage);\n\n                    jSuites.files[newImage.src] = content.substr(content.indexOf(',') + 1);\n                });\n            };\n\n            img.src = src;\n        }\n    }\n\n    obj.addFile = function(files) {\n        var reader = [];\n\n        for (var i = 0; i < files.length; i++) {\n            if (files[i].size > obj.options.maxFileSize) {\n                alert('The file is too big');\n            } else {\n                // Only PDF or Images\n                var type = files[i].type.split('/');\n\n                if (type[0] == 'image') {\n                    type = 1;\n                } else if (type[1] == 'pdf') {\n                    type = 2;\n                } else {\n                    type = 0;\n                }\n\n                if (type) {\n                    // Create file\n                    reader[i] = new FileReader();\n                    reader[i].index = i;\n                    reader[i].type = type;\n                    reader[i].name = files[i].name;\n                    reader[i].date = files[i].lastModified;\n                    reader[i].size = files[i].size;\n                    reader[i].addEventListener(\"load\", function (data) {\n                        // Get result\n                        if (data.target.type == 2) {\n                            if (obj.options.acceptFiles == true) {\n                                obj.addPdf(data.target);\n                            }\n                        } else {\n                            obj.addImage(data.target.result, data.target.name, data.total, data.target.lastModified);\n                        }\n                    }, false);\n\n                    reader[i].readAsDataURL(files[i])\n                } else {\n                    alert('The extension is not allowed');\n                }\n            }\n        }\n    }\n\n    // Destroy\n    obj.destroy = function() {\n        editor.removeEventListener('mouseup', editorMouseUp);\n        editor.removeEventListener('mousedown', editorMouseDown);\n        editor.removeEventListener('mousemove', editorMouseMove);\n        editor.removeEventListener('keyup', editorKeyUp);\n        editor.removeEventListener('keydown', editorKeyDown);\n        editor.removeEventListener('dragstart', editorDragStart);\n        editor.removeEventListener('dragenter', editorDragEnter);\n        editor.removeEventListener('dragover', editorDragOver);\n        editor.removeEventListener('drop', editorDrop);\n        editor.removeEventListener('paste', editorPaste);\n\n        if (typeof(obj.options.onblur) == 'function') {\n            editor.removeEventListener('blur', editorBlur);\n        }\n        if (typeof(obj.options.onfocus) == 'function') {\n            editor.removeEventListener('focus', editorFocus);\n        }\n\n        el.editor = null;\n        el.classList.remove('jeditor-container');\n\n        toolbar.remove();\n        snippet.remove();\n        editor.remove();\n    }\n\n    var isLetter = function (str) {\n        var regex = /([\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]+)/g;\n        return str.match(regex) ? 1 : 0;\n    }\n\n    // Event handlers\n    var editorMouseUp = function(e) {\n        editorAction = false;\n    }\n\n    var editorMouseDown = function(e) {\n        var close = function(snippet) {\n            var rect = snippet.getBoundingClientRect();\n            if (rect.width - (e.clientX - rect.left) < 40 && e.clientY - rect.top < 40) {\n                snippet.innerHTML = '';\n                snippet.remove();\n            }\n        }\n\n        if (e.target.tagName == 'IMG') {\n            if (e.target.style.cursor) {\n                var rect = e.target.getBoundingClientRect();\n                editorAction = {\n                    e: e.target,\n                    x: e.clientX,\n                    y: e.clientY,\n                    w: rect.width,\n                    h: rect.height,\n                    d: e.target.style.cursor,\n                }\n\n                if (! e.target.style.width) {\n                    e.target.style.width = rect.width + 'px';\n                }\n\n                if (! e.target.style.height) {\n                    e.target.style.height = rect.height + 'px';\n                }\n\n                var s = window.getSelection();\n                if (s.rangeCount) {\n                    for (var i = 0; i < s.rangeCount; i++) {\n                        s.removeRange(s.getRangeAt(i));\n                    }\n                }\n            } else {\n                editorAction = true;\n            }\n        } else { \n            if (e.target.classList.contains('snippet')) {\n                close(e.target);\n            } else if (e.target.parentNode.classList.contains('snippet')) {\n                close(e.target.parentNode);\n            }\n\n            editorAction = true;\n        }\n    }\n\n    var editorMouseMove = function(e) {\n        if (e.target.tagName == 'IMG') {\n            if (e.target.getAttribute('tabindex')) {\n                var rect = e.target.getBoundingClientRect();\n                if (e.clientY - rect.top < 5) {\n                    if (rect.width - (e.clientX - rect.left) < 5) {\n                        e.target.style.cursor = 'ne-resize';\n                    } else if (e.clientX - rect.left < 5) {\n                        e.target.style.cursor = 'nw-resize';\n                    } else {\n                        e.target.style.cursor = 'n-resize';\n                    }\n                } else if (rect.height - (e.clientY - rect.top) < 5) {\n                    if (rect.width - (e.clientX - rect.left) < 5) {\n                        e.target.style.cursor = 'se-resize';\n                    } else if (e.clientX - rect.left < 5) {\n                        e.target.style.cursor = 'sw-resize';\n                    } else {\n                        e.target.style.cursor = 's-resize';\n                    }\n                } else if (rect.width - (e.clientX - rect.left) < 5) {\n                    e.target.style.cursor = 'e-resize';\n                } else if (e.clientX - rect.left < 5) {\n                    e.target.style.cursor = 'w-resize';\n                } else {\n                    e.target.style.cursor = '';\n                }\n            }\n        }\n\n        // Move\n        if (e.which == 1 && editorAction && editorAction.d) {\n            if (editorAction.d == 'e-resize' || editorAction.d == 'ne-resize' ||  editorAction.d == 'se-resize') {\n                editorAction.e.style.width = (editorAction.w + (e.clientX - editorAction.x)) + 'px';\n\n                if (e.shiftKey) {\n                    var newHeight = (e.clientX - editorAction.x) * (editorAction.h / editorAction.w);\n                    editorAction.e.style.height = editorAction.h + newHeight + 'px';\n                } else {\n                    var newHeight =  null;\n                }\n            }\n\n            if (! newHeight) {\n                if (editorAction.d == 's-resize' || editorAction.d == 'se-resize' || editorAction.d == 'sw-resize') {\n                    if (! e.shiftKey) {\n                        editorAction.e.style.height = editorAction.h + (e.clientY - editorAction.y);\n                    }\n                }\n            }\n        }\n    }\n\n    var editorKeyUp = function(e) {\n        if (! editor.innerHTML) {\n            editor.innerHTML = '<div><br></div>';\n        }\n\n        if (typeof(obj.options.onkeyup) == 'function') { \n            obj.options.onkeyup(e, el);\n        }\n    }\n\n\n    var editorKeyDown = function(e) {\n        // Check for URL\n        if (obj.options.parseURL == true) {\n            verifyEditor();\n        }\n\n        // Closable\n        if (typeof(obj.options.onenter) == 'function' && e.which == 13) {\n            var data = obj.getData();\n            obj.options.onenter(obj, el, data, e);\n        }\n\n        if (typeof(obj.options.onkeydown) == 'function') { \n            obj.options.onkeydown(e, el);\n        }\n    }\n\n    var editorPaste = function(e) {\n        if (e.clipboardData || e.originalEvent.clipboardData) {\n            var html = (e.originalEvent || e).clipboardData.getData('text/html');\n            var text = (e.originalEvent || e).clipboardData.getData('text/plain');\n            var file = (e.originalEvent || e).clipboardData.files\n        } else if (window.clipboardData) {\n            var html = window.clipboardData.getData('Html');\n            var text = window.clipboardData.getData('Text');\n            var file = window.clipboardData.files\n        }\n\n        if (file.length) {\n            // Paste a image from the clipboard\n            obj.addFile(file);\n        } else {\n            // Paste text\n            text = text.split('\\r\\n');\n            var str = '';\n            if (e.target.nodeName == 'DIV' && ! e.target.classList.contains('jeditor')) {\n                for (var i = 0; i < text.length; i++) {\n                    if (text[i]) {\n                        str += text[i] + \"<br>\\r\\n\";\n                    }\n                }\n            } else {\n                for (var i = 0; i < text.length; i++) {\n                    if (text[i]) {\n                        str += '<div>' + text[i] + '</div>';\n                    } else {\n                        str += '<div><br></div>';\n                    }\n                }\n            }\n            // Insert text\n            document.execCommand('insertHtml', false, str);\n\n            // Extra images from the paste\n            if (obj.options.acceptImages == true) {\n                extractImageFromHtml(html);\n            }\n        }\n\n        e.preventDefault();\n    }\n\n    var editorDragStart = function(e) {\n        if (editorAction && editorAction.e) {\n            e.preventDefault();\n        }\n    }\n\n    var editorDragEnter = function(e) {\n        if (editorAction || obj.options.dropZone == false) {\n            // Do nothing\n        } else {\n            el.classList.add('jeditor-dragging');\n        }\n    }\n\n    var editorDragOver = function(e) {\n        if (editorAction || obj.options.dropZone == false) {\n            // Do nothing\n        } else {\n            if (editorTimer) {\n                clearTimeout(editorTimer);\n            }\n\n            editorTimer = setTimeout(function() {\n                el.classList.remove('jeditor-dragging');\n            }, 100);\n        }\n    }\n\n    var editorDrop = function(e) {\n        if (editorAction || obj.options.dropZone == false) {\n            // Do nothing\n        } else {\n            // Position caret on the drop\n            var range = null;\n            if (document.caretRangeFromPoint) {\n                range=document.caretRangeFromPoint(e.clientX, e.clientY);\n            } else if (e.rangeParent) {\n                range=document.createRange();\n                range.setStart(e.rangeParent,e.rangeOffset);\n            }\n            var sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n            sel.anchorNode.parentNode.focus();\n\n            var html = (e.originalEvent || e).dataTransfer.getData('text/html');\n            var text = (e.originalEvent || e).dataTransfer.getData('text/plain');\n            var file = (e.originalEvent || e).dataTransfer.files;\n    \n            if (file.length) {\n                obj.addFile(file);\n            } else if (text) {\n                extractImageFromHtml(html);\n            }\n\n            el.classList.remove('jeditor-dragging');\n            e.preventDefault();\n        }\n    }\n\n    var editorBlur = function() {\n        obj.options.onblur(obj, el, obj.getData());\n    }\n\n    var editorFocus = function() {\n        obj.options.onfocus(obj, el, obj.getData());\n    }\n\n    editor.addEventListener('mouseup', editorMouseUp);\n    editor.addEventListener('mousedown', editorMouseDown);\n    editor.addEventListener('mousemove', editorMouseMove);\n    editor.addEventListener('keyup', editorKeyUp);\n    editor.addEventListener('keydown', editorKeyDown);\n    editor.addEventListener('dragstart', editorDragStart);\n    editor.addEventListener('dragenter', editorDragEnter);\n    editor.addEventListener('dragover', editorDragOver);\n    editor.addEventListener('drop', editorDrop);\n    editor.addEventListener('paste', editorPaste);\n\n    // Blur\n    if (typeof(obj.options.onblur) == 'function') {\n        editor.addEventListener('blur', editorBlur);\n    }\n\n    // Focus\n    if (typeof(obj.options.onfocus) == 'function') {\n        editor.addEventListener('focus', editorFocus);\n    }\n\n    // Onload\n    if (typeof(obj.options.onload) == 'function') {\n        obj.options.onload(el, editor);\n    }\n\n    // Set value to the editor\n    editor.innerHTML = value;\n\n    // Append editor to the containre\n    el.appendChild(editor);\n\n    // Snippet\n    if (obj.options.snippet) {\n        appendElement(obj.options.snippet);\n    }\n\n    // Default toolbar\n    if (obj.options.toolbar == null) {\n        obj.options.toolbar = jSuites.editor.getDefaultToolbar();\n    }\n\n    // Add toolbar\n    if (obj.options.toolbar) {\n        for (var i = 0; i < obj.options.toolbar.length; i++) {\n            if (obj.options.toolbar[i].icon) {\n                var item = document.createElement('div');\n                item.style.userSelect = 'none';\n                var itemIcon = document.createElement('i');\n                itemIcon.className = 'material-icons';\n                itemIcon.innerHTML = obj.options.toolbar[i].icon;\n                itemIcon.onclick = (function (a) {\n                    let b = a;\n                    return function () {\n                        obj.options.toolbar[b].onclick(el, obj, this)\n                    };\n                })(i);\n                item.appendChild(itemIcon);\n                toolbar.appendChild(item);\n            } else {\n                if (obj.options.toolbar[i].type == 'divisor') {\n                    var item = document.createElement('div');\n                    item.className = 'jeditor-toolbar-divisor';\n                    toolbar.appendChild(item);\n                } else if (obj.options.toolbar[i].type == 'button') {\n                    var item = document.createElement('div');\n                    item.classList.add('jeditor-toolbar-button');\n                    item.innerHTML = obj.options.toolbar[i].value;\n                    toolbar.appendChild(item);\n                }\n            }\n        }\n\n        el.appendChild(toolbar);\n    }\n\n    // Focus to the editor\n    if (obj.options.focus) {\n        jSuites.editor.setCursor(editor, obj.options.focus == 'initial' ? true : false);\n    }\n\n    el.editor = obj;\n\n    return obj;\n});\n\njSuites.editor.setCursor = function(element, first) {\n    element.focus();\n    document.execCommand('selectAll');\n    var sel = window.getSelection();\n    var range = sel.getRangeAt(0);\n    if (first == true) {\n        var node = range.startContainer;\n        var size = 0;\n    } else {\n        var node = range.endContainer;\n        var size = node.length;\n    }\n    range.setStart(node, size);\n    range.setEnd(node, size);\n    sel.removeAllRanges();\n    sel.addRange(range);\n}\n\njSuites.editor.getDomain = function(url) {\n    return url.replace('http://','').replace('https://','').replace('www.','').split(/[/?#]/)[0].split(/:/g)[0];\n}\n\njSuites.editor.detectUrl = function(text) {\n    var expression = /(((https?:\\/\\/)|(www\\.))[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|]+)/ig;\n    var links = text.match(expression);\n\n    if (links) {\n        if (links[0].substr(0,3) == 'www') {\n            links[0] = 'http://' + links[0];\n        }\n    }\n\n    return links;\n}\n\njSuites.editor.youtubeParser = function(url) {\n    var regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*/;\n    var match = url.match(regExp);\n\n    return (match && match[7].length == 11) ? match[7] : false;\n}\n\njSuites.editor.getDefaultToolbar = function() { \n    return [\n        {\n            icon:'undo',\n            onclick: function() {\n                document.execCommand('undo');\n            }\n        },\n        {\n            icon:'redo',\n            onclick: function() {\n                document.execCommand('redo');\n            }\n        },\n        {\n            type:'divisor'\n        },\n        {\n            icon:'format_bold',\n            onclick: function(a,b,c) {\n                document.execCommand('bold');\n\n                if (document.queryCommandState(\"bold\")) {\n                    c.classList.add('selected');\n                } else {\n                    c.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_italic',\n            onclick: function(a,b,c) {\n                document.execCommand('italic');\n\n                if (document.queryCommandState(\"italic\")) {\n                    c.classList.add('selected');\n                } else {\n                    c.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_underline',\n            onclick: function(a,b,c) {\n                document.execCommand('underline');\n\n                if (document.queryCommandState(\"underline\")) {\n                    c.classList.add('selected');\n                } else {\n                    c.classList.remove('selected');\n                }\n            }\n        },\n        {\n            type:'divisor'\n        },\n        {\n            icon:'format_list_bulleted',\n            onclick: function(a,b,c) {\n                document.execCommand('insertUnorderedList');\n\n                if (document.queryCommandState(\"insertUnorderedList\")) {\n                    c.classList.add('selected');\n                } else {\n                    c.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_list_numbered',\n            onclick: function(a,b,c) {\n                document.execCommand('insertOrderedList');\n\n                if (document.queryCommandState(\"insertOrderedList\")) {\n                    c.classList.add('selected');\n                } else {\n                    c.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_indent_increase',\n            onclick: function(a,b,c) {\n                document.execCommand('indent', true, null);\n\n                if (document.queryCommandState(\"indent\")) {\n                    c.classList.add('selected');\n                } else {\n                    c.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_indent_decrease',\n            onclick: function(a,b,c) {\n                document.execCommand('outdent');\n\n                if (document.queryCommandState(\"outdent\")) {\n                    c.classList.add('selected');\n                } else {\n                    c.classList.remove('selected');\n                }\n            }\n        }\n        /*{\n            type:'select',\n            items: ['Verdana','Arial','Courier New'],\n            onchange: function() {\n            }\n        },\n        {\n            type:'select',\n            items: ['10px','12px','14px','16px','18px','20px','22px'],\n            onchange: function() {\n            }\n        },\n        {\n            icon:'format_align_left',\n            onclick: function() {\n                document.execCommand('JustifyLeft');\n\n                if (document.queryCommandState(\"JustifyLeft\")) {\n                    this.classList.add('selected');\n                } else {\n                    this.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_align_center',\n            onclick: function() {\n                document.execCommand('justifyCenter');\n\n                if (document.queryCommandState(\"justifyCenter\")) {\n                    this.classList.add('selected');\n                } else {\n                    this.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_align_right',\n            onclick: function() {\n                document.execCommand('justifyRight');\n\n                if (document.queryCommandState(\"justifyRight\")) {\n                    this.classList.add('selected');\n                } else {\n                    this.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_align_justify',\n            onclick: function() {\n                document.execCommand('justifyFull');\n\n                if (document.queryCommandState(\"justifyFull\")) {\n                    this.classList.add('selected');\n                } else {\n                    this.classList.remove('selected');\n                }\n            }\n        },\n        {\n            icon:'format_list_bulleted',\n            onclick: function() {\n                document.execCommand('insertUnorderedList');\n\n                if (document.queryCommandState(\"insertUnorderedList\")) {\n                    this.classList.add('selected');\n                } else {\n                    this.classList.remove('selected');\n                }\n            }\n        }*/\n    ];\n}\n\r\n\r\njSuites.image = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        minWidth: false,\r\n        onchange: null,\r\n        singleFile: true,\r\n        remoteParser: null,\r\n        text:{\r\n            extensionNotAllowed:'The extension is not allowed',\r\n            imageTooSmall:'The resolution is too low, try a image with a better resolution. width > 800px',\r\n        }\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Upload icon\r\n    el.classList.add('jupload');\r\n\r\n    // Add image\r\n    obj.addImage = function(file) {\r\n        if (! file.date) {\r\n            file.date = '';\r\n        }\r\n        var img = document.createElement('img');\r\n        img.setAttribute('data-date', file.lastmodified ? file.lastmodified : file.date);\r\n        img.setAttribute('data-name', file.name);\r\n        img.setAttribute('data-size', file.size);\r\n        img.setAttribute('data-small', file.small ? file.small : '');\r\n        img.setAttribute('data-cover', file.cover ? 1 : 0);\r\n        img.setAttribute('data-extension', file.extension);\r\n        img.setAttribute('src', file.file);\r\n        img.className = 'jfile';\r\n        img.style.width = '100%';\r\n\r\n        return img;\r\n    }\r\n\r\n    // Add image\r\n    obj.addImages = function(files) {\r\n        if (obj.options.singleFile == true) {\r\n            el.innerHTML = '';\r\n        }\r\n\r\n        for (var i = 0; i < files.length; i++) {\r\n            el.appendChild(obj.addImage(files[i]));\r\n        }\r\n    }\r\n\r\n    obj.addFromFile = function(file) {\r\n        var type = file.type.split('/');\r\n        if (type[0] == 'image') {\r\n            if (obj.options.singleFile == true) {\r\n                el.innerHTML = '';\r\n            }\r\n\r\n            var imageFile = new FileReader();\r\n            imageFile.addEventListener(\"load\", function (v) {\r\n\r\n                var img = new Image();\r\n\r\n                img.onload = function onload() {\r\n                    var canvas = document.createElement('canvas');\r\n                    canvas.width = img.width;\r\n                    canvas.height = img.height;\r\n\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n                    var data = {\r\n                        file: canvas.toDataURL(),\r\n                        extension: file.name.substr(file.name.lastIndexOf('.') + 1),\r\n                        name: file.name,\r\n                        size: file.size,\r\n                        lastmodified: file.lastModified,\r\n                    }\r\n                    var newImage = obj.addImage(data);\r\n                    el.appendChild(newImage);\r\n\r\n                    // Onchange\r\n                    if (typeof(obj.options.onchange) == 'function') {\r\n                        obj.options.onchange(newImage);\r\n                    }\r\n                };\r\n\r\n                img.src = v.srcElement.result;\r\n            });\r\n\r\n            imageFile.readAsDataURL(file);\r\n        } else {\r\n            alert(text.extentionNotAllowed);\r\n        }\r\n    }\r\n\r\n    obj.addFromUrl = function(src) {\r\n        if (src.substr(0,4) != 'data' && ! obj.options.remoteParser) {\r\n            console.error('remoteParser not defined in your initialization');\r\n        } else {\r\n            // This is to process cross domain images\r\n            if (src.substr(0,4) == 'data') {\r\n                var extension = src.split(';')\r\n                extension = extension[0].split('/');\r\n                extension = extension[1];\r\n            } else {\r\n                var extension = src.substr(src.lastIndexOf('.') + 1);\r\n                // Work for cross browsers\r\n                src = obj.options.remoteParser + src;\r\n            }\r\n\r\n            var img = new Image();\r\n\r\n            img.onload = function onload() {\r\n                var canvas = document.createElement('canvas');\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n\r\n                var ctx = canvas.getContext('2d');\r\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n                canvas.toBlob(function(blob) {\r\n                    var data = {\r\n                        file: window.URL.createObjectURL(blob),\r\n                        extension: extension\r\n                    }\r\n                    var newImage = obj.addImage(data);\r\n                    el.appendChild(newImage);\r\n\r\n                    // Keep base64 ready to go\r\n                    var content = canvas.toDataURL();\r\n                    jSuites.files[data.file] = content.substr(content.indexOf(',') + 1);\r\n\r\n                    // Onchange\r\n                    if (typeof(obj.options.onchange) == 'function') {\r\n                        obj.options.onchange(newImage);\r\n                    }\r\n                });\r\n            };\r\n\r\n            img.src = src;\r\n        }\r\n    }\r\n\r\n    var attachmentInput = document.createElement('input');\r\n    attachmentInput.type = 'file';\r\n    attachmentInput.setAttribute('accept', 'image/*');\r\n    attachmentInput.onchange = function() {\r\n        for (var i = 0; i < this.files.length; i++) {\r\n            obj.addFromFile(this.files[i]);\r\n        }\r\n    }\r\n\r\n    el.addEventListener(\"dblclick\", function(e) {\r\n        jSuites.click(attachmentInput);\r\n    });\r\n\r\n    el.addEventListener('dragenter', function(e) {\r\n        el.style.border = '1px dashed #000';\r\n    });\r\n\r\n    el.addEventListener('dragleave', function(e) {\r\n        el.style.border = '1px solid #eee';\r\n    });\r\n\r\n    el.addEventListener('dragstop', function(e) {\r\n        el.style.border = '1px solid #eee';\r\n    });\r\n\r\n    el.addEventListener('dragover', function(e) {\r\n        e.preventDefault();\r\n    });\r\n\r\n    el.addEventListener('drop', function(e) {\r\n        e.preventDefault();  \r\n        e.stopPropagation();\r\n\r\n\r\n        var html = (e.originalEvent || e).dataTransfer.getData('text/html');\r\n        var file = (e.originalEvent || e).dataTransfer.files;\r\n\r\n        if (file.length) {\r\n            for (var i = 0; i < e.dataTransfer.files.length; i++) {\r\n                obj.addFromFile(e.dataTransfer.files[i]);\r\n            }\r\n        } else if (html) {\r\n            if (obj.options.singleFile == true) {\r\n                el.innerHTML = '';\r\n            }\r\n\r\n            // Create temp element\r\n            var div = document.createElement('div');\r\n            div.innerHTML = html;\r\n\r\n            // Extract images\r\n            var img = div.querySelectorAll('img');\r\n\r\n            if (img.length) {\r\n                for (var i = 0; i < img.length; i++) {\r\n                    obj.addFromUrl(img[i].src);\r\n                }\r\n            }\r\n        }\r\n\r\n        el.style.border = '1px solid #eee';\r\n\r\n        return false;\r\n    });\r\n\r\n    el.image = obj;\r\n\r\n    return obj;\r\n});\r\n\r\n/**\n * (c) jLoading\n * https://github.com/paulhodel/jtools\n *\n * @author: Paul Hodel <paul.hodel@gmail.com>\n * @description: Page loading spin\n */\n\njSuites.loading = (function() {\n    var obj = {};\n\n    var loading = document.createElement('div');\n    loading.className = 'jloading';\n\n    obj.show = function() {\n        document.body.appendChild(loading);\n    };\n\n    obj.hide = function() {\n        document.body.removeChild(loading);\n    };\n\n    return obj;\n})();\r\n\r\n/**\n * (c) jLogin\n * https://github.com/paulhodel/jtools\n *\n * @author: Paul Hodel <paul.hodel@gmail.com>\n * @description: Login helper\n */\n\njSuites.login = (function(el, options) {\n    var obj = {};\n    obj.options = {};\n\n    // Default configuration\n    var defaults = {\n        url: window.location.href,\n        prepareRequest: null,\n        accessToken: null,\n        deviceToken: null,\n        facebookUrl: null,\n        maxHeight: null,\n        onload: null,\n        onerror: null,\n        message: null,\n        logo: null,\n        newProfile: false,\n        newProfileUrl: false,\n        newProfileLogin: false,\n        fullscreen: false,\n    };\n\n    // Loop through our object\n    for (var property in defaults) {\n        if (options && options.hasOwnProperty(property)) {\n            obj.options[property] = options[property];\n        } else {\n            obj.options[property] = defaults[property];\n        }\n    }\n\n    // Message console container\n    if (! obj.options.message) {\n        var messageElement = document.querySelector('.message');\n        if (messageElement) {\n            obj.options.message = messageElement;\n        }\n    }\n\n    // Action\n    var action = null;\n\n    // Container\n    var container = document.createElement('form');\n    el.appendChild(container);\n\n    // Logo\n    var divLogo = document.createElement('div');\n    divLogo.className = 'jlogin-logo'\n    container.appendChild(divLogo);\n\n    if (obj.options.logo) {\n        var logo = document.createElement('img');\n        logo.src = obj.options.logo;\n        divLogo.appendChild(logo);\n    }\n\n    // Code\n    var labelCode = document.createElement('label');\n    labelCode.innerHTML = 'Please enter here the code received';\n    var inputCode = document.createElement('input');\n    inputCode.type = 'number';\n    inputCode.id = 'code';\n    inputCode.setAttribute('maxlength', 6);\n    var divCode = document.createElement('div');\n    divCode.appendChild(labelCode);\n    divCode.appendChild(inputCode);\n\n    // Hash\n    var inputHash = document.createElement('input');\n    inputHash.type = 'hidden';\n    inputHash.name = 'h';\n    var divHash = document.createElement('div');\n    divHash.appendChild(inputHash);\n\n    // Recovery\n    var inputRecovery = document.createElement('input');\n    inputRecovery.type = 'hidden';\n    inputRecovery.name = 'recovery';\n    inputRecovery.value = '1';\n    var divRecovery = document.createElement('div');\n    divRecovery.appendChild(inputRecovery);\n\n    // Login\n    var labelLogin = document.createElement('label');\n    labelLogin.innerHTML = 'Login';\n    var inputLogin = document.createElement('input');\n    inputLogin.type = 'text';\n    inputLogin.name = 'login';\n    inputLogin.setAttribute('autocomplete', 'off');\n    inputLogin.onkeyup = function() {\n        this.value = this.value.toLowerCase().replace(/[^a-zA-Z0-9_+]+/gi, '');\n    } \n    var divLogin = document.createElement('div');\n    divLogin.appendChild(labelLogin);\n    divLogin.appendChild(inputLogin);\n\n    // Name\n    var labelName = document.createElement('label');\n    labelName.innerHTML = 'Name';\n    var inputName = document.createElement('input');\n    inputName.type = 'text';\n    inputName.name = 'name';\n    var divName = document.createElement('div');\n    divName.appendChild(labelName);\n    divName.appendChild(inputName);\n\n    // Email\n    var labelUsername = document.createElement('label');\n    labelUsername.innerHTML = 'E-mail';\n    var inputUsername = document.createElement('input');\n    inputUsername.type = 'text';\n    inputUsername.name = 'username';\n    inputUsername.setAttribute('autocomplete', 'new-username');\n    var divUsername = document.createElement('div');\n    divUsername.appendChild(labelUsername);\n    divUsername.appendChild(inputUsername);\n\n    // Password\n    var labelPassword = document.createElement('label');\n    labelPassword.innerHTML = 'Password';\n    var inputPassword = document.createElement('input');\n    inputPassword.type = 'password';\n    inputPassword.name = 'password';\n    inputPassword.setAttribute('autocomplete', 'new-password');\n    var divPassword = document.createElement('div');\n    divPassword.appendChild(labelPassword);\n    divPassword.appendChild(inputPassword);\n    divPassword.onkeydown = function(e) {\n        if (e.keyCode == 13) {\n            obj.execute();\n        }\n    }\n\n    // Repeat password\n    var labelRepeatPassword = document.createElement('label');\n    labelRepeatPassword.innerHTML = 'Password';\n    var inputRepeatPassword = document.createElement('input');\n    inputRepeatPassword.type = 'password';\n    inputRepeatPassword.name = 'password';\n    var divRepeatPassword = document.createElement('div');\n    divRepeatPassword.appendChild(labelRepeatPassword);\n    divRepeatPassword.appendChild(inputRepeatPassword);\n\n    // Remember checkbox\n    var labelRemember = document.createElement('label');\n    labelRemember.innerHTML = 'Remember me on this device';\n    var inputRemember = document.createElement('input');\n    inputRemember.type = 'checkbox';\n    inputRemember.name = 'remember';\n    inputRemember.value = '1';\n    labelRemember.appendChild(inputRemember);\n    var divRememberButton = document.createElement('div');\n    divRememberButton.className = 'rememberButton';\n    divRememberButton.appendChild(labelRemember);\n\n    // Login button\n    var actionButton = document.createElement('input');\n    actionButton.type = 'button';\n    actionButton.value = 'Log In';\n    actionButton.onclick = function() {\n        obj.execute();\n    }\n    var divActionButton = document.createElement('div');\n    divActionButton.appendChild(actionButton);\n\n    // Cancel button\n    var cancelButton = document.createElement('div');\n    cancelButton.innerHTML = 'Cancel';\n    cancelButton.className = 'cancelButton';\n    cancelButton.onclick = function() {\n        obj.requestAccess();\n    }\n    var divCancelButton = document.createElement('div');\n    divCancelButton.appendChild(cancelButton);\n\n    // Captcha\n    var labelCaptcha = document.createElement('label');\n    labelCaptcha.innerHTML = 'Please type here the code below';\n    var inputCaptcha = document.createElement('input');\n    inputCaptcha.type = 'text';\n    inputCaptcha.name = 'captcha';\n    var imageCaptcha = document.createElement('img');\n    var divCaptcha = document.createElement('div');\n    divCaptcha.className = 'jlogin-captcha';\n    divCaptcha.appendChild(labelCaptcha);\n    divCaptcha.appendChild(inputCaptcha);\n    divCaptcha.appendChild(imageCaptcha);\n\n    // Facebook\n    var facebookButton = document.createElement('div');\n    facebookButton.innerHTML = 'Login with Facebook';\n    facebookButton.className = 'facebookButton';\n    var divFacebookButton = document.createElement('div');\n    divFacebookButton.appendChild(facebookButton);\n    divFacebookButton.onclick = function() {\n        obj.requestLoginViaFacebook();\n    }\n    // Forgot password\n    var inputRequest = document.createElement('span');\n    inputRequest.innerHTML = 'Request a new password';\n    var divRequestButton = document.createElement('div');\n    divRequestButton.className = 'requestButton';\n    divRequestButton.appendChild(inputRequest);\n    divRequestButton.onclick = function() {\n        obj.requestNewPassword();\n    }\n    // Create a new Profile\n    var inputNewProfile = document.createElement('span');\n    inputNewProfile.innerHTML = 'Create a new profile';\n    var divNewProfileButton = document.createElement('div');\n    divNewProfileButton.className = 'newProfileButton';\n    divNewProfileButton.appendChild(inputNewProfile);\n    divNewProfileButton.onclick = function() {\n        obj.newProfile();\n    }\n\n    el.className = 'jlogin';\n\n    if (obj.options.fullscreen == true) {\n        el.classList.add('jlogin-fullscreen');\n    }\n\n    /** \n     * Show message\n     */\n    obj.showMessage = function(data) {\n        var message = (typeof(data) == 'object') ? data.message : data;\n\n        if (typeof(obj.options.showMessage) == 'function') {\n            obj.options.showMessage(data);\n        } else {\n            jSuites.alert(data);\n        }\n    }\n\n    /**\n     * New profile\n     */\n    obj.newProfile = function() {\n        container.innerHTML = '';\n        container.appendChild(divLogo);\n        if (obj.options.newProfileLogin) {\n            container.appendChild(divLogin);\n        }\n        container.appendChild(divName);\n        container.appendChild(divUsername);\n        container.appendChild(divActionButton);\n        container.appendChild(divFacebookButton);\n        container.appendChild(divCancelButton);\n\n        // Reset inputs\n        inputLogin.value = '';\n        inputUsername.value = '';\n        inputPassword.value = '';\n\n        // Button\n        actionButton.value = 'Create new profile';\n\n        // Action\n        action = 'newProfile';\n    }\n\n    /**\n     * Request the email with the recovery instructions\n     */\n    obj.requestNewPassword = function() {\n        if (Array.prototype.indexOf.call(container.children, divCaptcha) >= 0) {\n            var captcha = true;\n        }\n\n        container.innerHTML = '';\n        container.appendChild(divLogo);\n        container.appendChild(divRecovery);\n        container.appendChild(divUsername);\n        if (captcha) {\n            container.appendChild(divCaptcha);\n        }\n        container.appendChild(divActionButton);\n        container.appendChild(divCancelButton);\n        actionButton.value = 'Request a new password';\n        inputRecovery.value = 1;\n\n        // Action\n        action = 'requestNewPassword';\n    }\n\n    /**\n     * Confirm recovery code\n     */\n    obj.codeConfirmation = function() {\n        container.innerHTML = '';\n        container.appendChild(divLogo);\n        container.appendChild(divHash);\n        container.appendChild(divCode);\n        container.appendChild(divActionButton);\n        container.appendChild(divCancelButton);\n        actionButton.value = 'Confirm code';\n        inputRecovery.value = 2;\n\n        // Action\n        action = 'codeConfirmation';\n    }\n\n    /**\n     * Update my password\n     */\n    obj.changeMyPassword = function(hash) {\n        container.innerHTML = '';\n        container.appendChild(divLogo);\n        container.appendChild(divHash);\n        container.appendChild(divPassword);\n        container.appendChild(divRepeatPassword);\n        container.appendChild(divActionButton);\n        container.appendChild(divCancelButton);\n        actionButton.value = 'Change my password';\n        inputHash.value = hash;\n\n        // Action\n        action = 'changeMyPassword';\n    }\n\n    /**\n     * Request access default method\n     */\n    obj.requestAccess = function() {\n        container.innerHTML = '';\n        container.appendChild(divLogo);\n        container.appendChild(divUsername);\n        container.appendChild(divPassword);\n        container.appendChild(divActionButton);\n        container.appendChild(divFacebookButton);\n        container.appendChild(divRequestButton);\n        container.appendChild(divRememberButton);\n        container.appendChild(divRequestButton);\n        if (obj.options.newProfile == true) {\n            container.appendChild(divNewProfileButton);\n        }\n\n        // Button\n        actionButton.value = 'Login';\n\n        // Password\n        inputPassword.value = '';\n\n        // Email persistence\n        if (window.localStorage.getItem('username')) {\n            inputUsername.value = window.localStorage.getItem('username');\n            inputPassword.focus();\n        } else {\n            inputUsername.focus();\n        }\n\n        // Action\n        action = 'requestAccess';\n    }\n\n    /**\n     * Request login via facebook\n     */\n    obj.requestLoginViaFacebook = function() {\n        if (typeof(deviceNotificationToken) == 'undefined') {\n            FB.getLoginStatus(function(response) {\n                if (! response.status || response.status != 'connected') {\n                    FB.login(function(response) {\n                        if (response.authResponse) {\n                            obj.execute({ f:response.authResponse.accessToken });\n                        } else {\n                            obj.showMessage('Not authorized by facebook');\n                        }\n                    }, {scope: 'public_profile,email'});\n                } else {\n                    obj.execute({ f:response.authResponse.accessToken });\n                }\n            }, true);\n        } else {\n            jDestroy = function() {\n                fbLogin.removeEventListener('loadstart', jStart);\n                fbLogin.removeEventListener('loaderror', jError);\n                fbLogin.removeEventListener('exit', jExit);\n                fbLogin.close();\n                fbLogin = null;\n            }\n\n            jStart = function(event) {\n                var url = event.url;\n                if (url.indexOf(\"access_token\") >= 0) {\n                    setTimeout(function(){\n                        var u = url.match(/=(.*?)&/);\n                        if (u[1].length > 32) {\n                            obj.execute({ f:u[1] });\n                        }\n                        jDestroy();\n                   },500);\n                }\n\n                if (url.indexOf(\"error=access_denied\") >= 0) {\n                   setTimeout(jDestroy ,500);\n                   // Not authorized by facebook\n                   obj.showMessage('Not authorized by facebook');\n                }\n            }\n\n            jError = function(event) {\n                jDestroy();\n            }\n        \n            jExit = function(event) {\n                jDestroy();\n            }\n\n            fbLogin = window.open(this.facebookUrl, \"_blank\", \"location=no,closebuttoncaption=Exit,disallowoverscroll=yes,toolbar=no\");\n            fbLogin.addEventListener('loadstart', jStart);\n            fbLogin.addEventListener('loaderror', jError);\n            fbLogin.addEventListener('exit', jExit);\n        }\n\n        // Action\n        action = 'requestLoginViaFacebook';\n    }\n\n    // Perform request\n    obj.execute = function(data) {\n        // New profile\n        if (action == 'newProfile') {\n            var pattern = new RegExp(/^([\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4})?$/);\n            if (! inputUsername.value || ! pattern.test(inputUsername.value)) {\n                var message = 'Invalid e-mail address'; \n            }\n\n            var pattern = new RegExp(/^[a-zA-Z0-9\\_\\-\\.\\s+]+$/);\n            if (! inputLogin.value || ! pattern.test(inputLogin.value)) {\n                var message = 'Invalid username, please use only characters and numbers';\n            }\n\n            if (message) {\n                obj.showMessage(message);\n                return false;\n            }\n        }\n\n        // Keep email\n        if (inputUsername.value != '') {\n            window.localStorage.setItem('username', inputUsername.value);\n        }\n\n        // Captcha\n        if (Array.prototype.indexOf.call(container.children, divCaptcha) >= 0) {\n            if (inputCaptcha.value == '') {\n                obj.showMessage('Please enter the captch code below');\n                return false;\n            }\n        }\n\n        // Url\n        var url = obj.options.url;\n\n        // Device token\n        if (obj.options.deviceToken) {\n            url += '?token=' + obj.options.deviceToken;\n        }\n\n        // Callback\n        var onsuccess = function(result) {\n            if (result) {\n                // Successfully response\n                if (result.success == 1) {\n                    // Recovery process\n                    if (action == 'requestNewPassword') {\n                        obj.codeConfirmation();\n                    } else if (action == 'codeConfirmation') {\n                        obj.requestAccess();\n                    } else if (action == 'newProfile') {\n                        obj.requestAccess();\n                        // New profile\n                        result.newProfile = true;\n                    }\n\n                    // Token\n                    if (result.token) {\n                        // Set token\n                        obj.options.accessToken = result.token;\n                        // Save token\n                        window.localStorage.setItem('Access-Token', result.token);\n                    }\n                }\n\n                // Show message\n                if (result.message) {\n                    // Show message\n                    obj.showMessage(result.message)\n                }\n\n                // Request captcha code\n                if (! result.data) {\n                    if (Array.prototype.indexOf.call(container.children, divCaptcha) >= 0) {\n                        divCaptcha.remove();\n                    }\n                } else {\n                    container.insertBefore(divCaptcha, divActionButton);\n                    imageCaptcha.setAttribute('src', 'data:image/png;base64,' + result.data);\n                }\n\n                // Give time to user see the message\n                if (result.hash) {\n                    // Change password\n                    obj.changeMyPassword(result.hash);\n                } else if (result.url) {\n                    // App initialization\n                    if (result.success == 1) {\n                        if (typeof(obj.options.onload) == 'function') {\n                            obj.options.onload(result);\n                        } else {\n                            if (result.message) {\n                                setTimeout(function() { window.location.href = result.url; }, 2000);\n                            } else {\n                                window.location.href = result.url;\n                            }\n                        }\n                    } else {\n                        if (typeof(obj.options.onerror) == 'function') {\n                            obj.options.onerror(result);\n                        }\n                    }\n                }\n            }\n        }\n\n        // Password\n        if (! data) {\n            var data = jSuites.getFormElements(el);\n            // Encode passworfd\n            if (data.password) {\n                data.password = jSuites.login.sha512(data.password);\n            }\n            // Recovery code\n            if (Array.prototype.indexOf.call(container.children, divCode) >= 0 && inputCode.value) {\n                data.h = jSuites.login.sha512(inputCode.value);\n            }\n        }\n\n        // Loading\n        el.classList.add('jlogin-loading');\n\n        // Url\n        var url = (action == 'newProfile' && obj.options.newProfileUrl) ? obj.options.newProfileUrl : obj.options.url;\n\n        // Remote call\n        jSuites.ajax({\n            url: url,\n            method: 'POST',\n            dataType: 'json',\n            data: data,\n            success: function(result) {\n                // Remove loading\n                el.classList.remove('jlogin-loading');\n                // Callback\n                onsuccess(result);\n            },\n            error: function(result) {\n                // Error\n                el.classList.remove('jlogin-loading');\n\n                if (typeof(obj.options.onerror) == 'function') {\n                    obj.options.onerror(result);\n                }\n            }\n        });\n    }\n\n    obj.requestAccess();\n\n    return obj;\n});\n\njSuites.login.sha512 = (function(str) {\n    function int64(msint_32, lsint_32) {\n        this.highOrder = msint_32;\n        this.lowOrder = lsint_32;\n    }\n\n    var H = [new int64(0x6a09e667, 0xf3bcc908), new int64(0xbb67ae85, 0x84caa73b),\n        new int64(0x3c6ef372, 0xfe94f82b), new int64(0xa54ff53a, 0x5f1d36f1),\n        new int64(0x510e527f, 0xade682d1), new int64(0x9b05688c, 0x2b3e6c1f),\n        new int64(0x1f83d9ab, 0xfb41bd6b), new int64(0x5be0cd19, 0x137e2179)];\n\n    var K = [new int64(0x428a2f98, 0xd728ae22), new int64(0x71374491, 0x23ef65cd),\n        new int64(0xb5c0fbcf, 0xec4d3b2f), new int64(0xe9b5dba5, 0x8189dbbc),\n        new int64(0x3956c25b, 0xf348b538), new int64(0x59f111f1, 0xb605d019),\n        new int64(0x923f82a4, 0xaf194f9b), new int64(0xab1c5ed5, 0xda6d8118),\n        new int64(0xd807aa98, 0xa3030242), new int64(0x12835b01, 0x45706fbe),\n        new int64(0x243185be, 0x4ee4b28c), new int64(0x550c7dc3, 0xd5ffb4e2),\n        new int64(0x72be5d74, 0xf27b896f), new int64(0x80deb1fe, 0x3b1696b1),\n        new int64(0x9bdc06a7, 0x25c71235), new int64(0xc19bf174, 0xcf692694),\n        new int64(0xe49b69c1, 0x9ef14ad2), new int64(0xefbe4786, 0x384f25e3),\n        new int64(0x0fc19dc6, 0x8b8cd5b5), new int64(0x240ca1cc, 0x77ac9c65),\n        new int64(0x2de92c6f, 0x592b0275), new int64(0x4a7484aa, 0x6ea6e483),\n        new int64(0x5cb0a9dc, 0xbd41fbd4), new int64(0x76f988da, 0x831153b5),\n        new int64(0x983e5152, 0xee66dfab), new int64(0xa831c66d, 0x2db43210),\n        new int64(0xb00327c8, 0x98fb213f), new int64(0xbf597fc7, 0xbeef0ee4),\n        new int64(0xc6e00bf3, 0x3da88fc2), new int64(0xd5a79147, 0x930aa725),\n        new int64(0x06ca6351, 0xe003826f), new int64(0x14292967, 0x0a0e6e70),\n        new int64(0x27b70a85, 0x46d22ffc), new int64(0x2e1b2138, 0x5c26c926),\n        new int64(0x4d2c6dfc, 0x5ac42aed), new int64(0x53380d13, 0x9d95b3df),\n        new int64(0x650a7354, 0x8baf63de), new int64(0x766a0abb, 0x3c77b2a8),\n        new int64(0x81c2c92e, 0x47edaee6), new int64(0x92722c85, 0x1482353b),\n        new int64(0xa2bfe8a1, 0x4cf10364), new int64(0xa81a664b, 0xbc423001),\n        new int64(0xc24b8b70, 0xd0f89791), new int64(0xc76c51a3, 0x0654be30),\n        new int64(0xd192e819, 0xd6ef5218), new int64(0xd6990624, 0x5565a910),\n        new int64(0xf40e3585, 0x5771202a), new int64(0x106aa070, 0x32bbd1b8),\n        new int64(0x19a4c116, 0xb8d2d0c8), new int64(0x1e376c08, 0x5141ab53),\n        new int64(0x2748774c, 0xdf8eeb99), new int64(0x34b0bcb5, 0xe19b48a8),\n        new int64(0x391c0cb3, 0xc5c95a63), new int64(0x4ed8aa4a, 0xe3418acb),\n        new int64(0x5b9cca4f, 0x7763e373), new int64(0x682e6ff3, 0xd6b2b8a3),\n        new int64(0x748f82ee, 0x5defb2fc), new int64(0x78a5636f, 0x43172f60),\n        new int64(0x84c87814, 0xa1f0ab72), new int64(0x8cc70208, 0x1a6439ec),\n        new int64(0x90befffa, 0x23631e28), new int64(0xa4506ceb, 0xde82bde9),\n        new int64(0xbef9a3f7, 0xb2c67915), new int64(0xc67178f2, 0xe372532b),\n        new int64(0xca273ece, 0xea26619c), new int64(0xd186b8c7, 0x21c0c207),\n        new int64(0xeada7dd6, 0xcde0eb1e), new int64(0xf57d4f7f, 0xee6ed178),\n        new int64(0x06f067aa, 0x72176fba), new int64(0x0a637dc5, 0xa2c898a6),\n        new int64(0x113f9804, 0xbef90dae), new int64(0x1b710b35, 0x131c471b),\n        new int64(0x28db77f5, 0x23047d84), new int64(0x32caab7b, 0x40c72493),\n        new int64(0x3c9ebe0a, 0x15c9bebc), new int64(0x431d67c4, 0x9c100d4c),\n        new int64(0x4cc5d4be, 0xcb3e42b6), new int64(0x597f299c, 0xfc657e2a),\n        new int64(0x5fcb6fab, 0x3ad6faec), new int64(0x6c44198c, 0x4a475817)];\n\n    var W = new Array(64);\n    var a, b, c, d, e, f, g, h, i, j;\n    var T1, T2;\n    var charsize = 8;\n\n    function utf8_encode(str) {\n        return unescape(encodeURIComponent(str));\n    }\n\n    function str2binb(str) {\n        var bin = [];\n        var mask = (1 << charsize) - 1;\n        var len = str.length * charsize;\n    \n        for (var i = 0; i < len; i += charsize) {\n            bin[i >> 5] |= (str.charCodeAt(i / charsize) & mask) << (32 - charsize - (i % 32));\n        }\n    \n        return bin;\n    }\n\n    function binb2hex(binarray) {\n        var hex_tab = \"0123456789abcdef\";\n        var str = \"\";\n        var length = binarray.length * 4;\n        var srcByte;\n\n        for (var i = 0; i < length; i += 1) {\n            srcByte = binarray[i >> 2] >> ((3 - (i % 4)) * 8);\n            str += hex_tab.charAt((srcByte >> 4) & 0xF) + hex_tab.charAt(srcByte & 0xF);\n        }\n\n        return str;\n    }\n\n    function safe_add_2(x, y) {\n        var lsw, msw, lowOrder, highOrder;\n\n        lsw = (x.lowOrder & 0xFFFF) + (y.lowOrder & 0xFFFF);\n        msw = (x.lowOrder >>> 16) + (y.lowOrder >>> 16) + (lsw >>> 16);\n        lowOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\n\n        lsw = (x.highOrder & 0xFFFF) + (y.highOrder & 0xFFFF) + (msw >>> 16);\n        msw = (x.highOrder >>> 16) + (y.highOrder >>> 16) + (lsw >>> 16);\n        highOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\n\n        return new int64(highOrder, lowOrder);\n    }\n\n    function safe_add_4(a, b, c, d) {\n        var lsw, msw, lowOrder, highOrder;\n\n        lsw = (a.lowOrder & 0xFFFF) + (b.lowOrder & 0xFFFF) + (c.lowOrder & 0xFFFF) + (d.lowOrder & 0xFFFF);\n        msw = (a.lowOrder >>> 16) + (b.lowOrder >>> 16) + (c.lowOrder >>> 16) + (d.lowOrder >>> 16) + (lsw >>> 16);\n        lowOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\n\n        lsw = (a.highOrder & 0xFFFF) + (b.highOrder & 0xFFFF) + (c.highOrder & 0xFFFF) + (d.highOrder & 0xFFFF) + (msw >>> 16);\n        msw = (a.highOrder >>> 16) + (b.highOrder >>> 16) + (c.highOrder >>> 16) + (d.highOrder >>> 16) + (lsw >>> 16);\n        highOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\n\n        return new int64(highOrder, lowOrder);\n    }\n\n    function safe_add_5(a, b, c, d, e) {\n        var lsw, msw, lowOrder, highOrder;\n\n        lsw = (a.lowOrder & 0xFFFF) + (b.lowOrder & 0xFFFF) + (c.lowOrder & 0xFFFF) + (d.lowOrder & 0xFFFF) + (e.lowOrder & 0xFFFF);\n        msw = (a.lowOrder >>> 16) + (b.lowOrder >>> 16) + (c.lowOrder >>> 16) + (d.lowOrder >>> 16) + (e.lowOrder >>> 16) + (lsw >>> 16);\n        lowOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\n\n        lsw = (a.highOrder & 0xFFFF) + (b.highOrder & 0xFFFF) + (c.highOrder & 0xFFFF) + (d.highOrder & 0xFFFF) + (e.highOrder & 0xFFFF) + (msw >>> 16);\n        msw = (a.highOrder >>> 16) + (b.highOrder >>> 16) + (c.highOrder >>> 16) + (d.highOrder >>> 16) + (e.highOrder >>> 16) + (lsw >>> 16);\n        highOrder = ((msw & 0xFFFF) << 16) | (lsw & 0xFFFF);\n\n        return new int64(highOrder, lowOrder);\n    }\n\n    function maj(x, y, z) {\n        return new int64(\n            (x.highOrder & y.highOrder) ^ (x.highOrder & z.highOrder) ^ (y.highOrder & z.highOrder),\n            (x.lowOrder & y.lowOrder) ^ (x.lowOrder & z.lowOrder) ^ (y.lowOrder & z.lowOrder)\n        );\n    }\n\n    function ch(x, y, z) {\n        return new int64(\n            (x.highOrder & y.highOrder) ^ (~x.highOrder & z.highOrder),\n            (x.lowOrder & y.lowOrder) ^ (~x.lowOrder & z.lowOrder)\n        );\n    }\n\n    function rotr(x, n) {\n        if (n <= 32) {\n            return new int64(\n             (x.highOrder >>> n) | (x.lowOrder << (32 - n)),\n             (x.lowOrder >>> n) | (x.highOrder << (32 - n))\n            );\n        } else {\n            return new int64(\n             (x.lowOrder >>> n) | (x.highOrder << (32 - n)),\n             (x.highOrder >>> n) | (x.lowOrder << (32 - n))\n            );\n        }\n    }\n\n    function sigma0(x) {\n        var rotr28 = rotr(x, 28);\n        var rotr34 = rotr(x, 34);\n        var rotr39 = rotr(x, 39);\n\n        return new int64(\n            rotr28.highOrder ^ rotr34.highOrder ^ rotr39.highOrder,\n            rotr28.lowOrder ^ rotr34.lowOrder ^ rotr39.lowOrder\n        );\n    }\n\n    function sigma1(x) {\n        var rotr14 = rotr(x, 14);\n        var rotr18 = rotr(x, 18);\n        var rotr41 = rotr(x, 41);\n\n        return new int64(\n            rotr14.highOrder ^ rotr18.highOrder ^ rotr41.highOrder,\n            rotr14.lowOrder ^ rotr18.lowOrder ^ rotr41.lowOrder\n        );\n    }\n\n    function gamma0(x) {\n        var rotr1 = rotr(x, 1), rotr8 = rotr(x, 8), shr7 = shr(x, 7);\n\n        return new int64(\n            rotr1.highOrder ^ rotr8.highOrder ^ shr7.highOrder,\n            rotr1.lowOrder ^ rotr8.lowOrder ^ shr7.lowOrder\n        );\n    }\n\n    function gamma1(x) {\n        var rotr19 = rotr(x, 19);\n        var rotr61 = rotr(x, 61);\n        var shr6 = shr(x, 6);\n\n        return new int64(\n            rotr19.highOrder ^ rotr61.highOrder ^ shr6.highOrder,\n            rotr19.lowOrder ^ rotr61.lowOrder ^ shr6.lowOrder\n        );\n    }\n\n    function shr(x, n) {\n        if (n <= 32) {\n            return new int64(\n                x.highOrder >>> n,\n                x.lowOrder >>> n | (x.highOrder << (32 - n))\n            );\n        } else {\n            return new int64(\n                0,\n                x.highOrder << (32 - n)\n            );\n        }\n    }\n\n    var str = utf8_encode(str);\n    var strlen = str.length*charsize;\n    str = str2binb(str);\n\n    str[strlen >> 5] |= 0x80 << (24 - strlen % 32);\n    str[(((strlen + 128) >> 10) << 5) + 31] = strlen;\n\n    for (var i = 0; i < str.length; i += 32) {\n        a = H[0];\n        b = H[1];\n        c = H[2];\n        d = H[3];\n        e = H[4];\n        f = H[5];\n        g = H[6];\n        h = H[7];\n\n        for (var j = 0; j < 80; j++) {\n            if (j < 16) {\n                W[j] = new int64(str[j*2 + i], str[j*2 + i + 1]);\n            } else {\n                W[j] = safe_add_4(gamma1(W[j - 2]), W[j - 7], gamma0(W[j - 15]), W[j - 16]);\n            }\n\n            T1 = safe_add_5(h, sigma1(e), ch(e, f, g), K[j], W[j]);\n            T2 = safe_add_2(sigma0(a), maj(a, b, c));\n            h = g;\n            g = f;\n            f = e;\n            e = safe_add_2(d, T1);\n            d = c;\n            c = b;\n            b = a;\n            a = safe_add_2(T1, T2);\n        }\n\n        H[0] = safe_add_2(a, H[0]);\n        H[1] = safe_add_2(b, H[1]);\n        H[2] = safe_add_2(c, H[2]);\n        H[3] = safe_add_2(d, H[3]);\n        H[4] = safe_add_2(e, H[4]);\n        H[5] = safe_add_2(f, H[5]);\n        H[6] = safe_add_2(g, H[6]);\n        H[7] = safe_add_2(h, H[7]);\n    }\n\n    var binarray = [];\n    for (var i = 0; i < H.length; i++) {\n        binarray.push(H[i].highOrder);\n        binarray.push(H[i].lowOrder);\n    }\n\n    return binb2hex(binarray);\n});\r\n\r\n/**\r\n * (c) jTools Input Mask\r\n * https://github.com/paulhodel/jtools\r\n *\r\n * @author: Paul Hodel <paul.hodel@gmail.com>\r\n * @description: Input mask\r\n */\r\n\r\njSuites.mask = (function() {\r\n    var obj = {};\r\n    var index = 0;\r\n    var values = []\r\n    var pieces = [];\r\n\r\n    obj.run = function(value, mask, decimal) {\r\n        if (value && mask) {\r\n            if (! decimal) {\r\n                decimal = '.';\r\n            }\r\n            if (value == Number(value)) {\r\n                var number = (''+value).split('.');\r\n                var value = number[0];\r\n                var valueDecimal = number[1];\r\n            } else {\r\n                value = '' + value;\r\n            }\r\n            index = 0;\r\n            values = [];\r\n            // Create mask token\r\n            obj.prepare(mask);\r\n            // Current value\r\n            var currentValue = value;\r\n            if (currentValue) {\r\n                // Checking current value\r\n                for (var i = 0; i < currentValue.length; i++) {\r\n                    if (currentValue[i] != null) {\r\n                        obj.process(currentValue[i]);\r\n                    }\r\n                }\r\n            }\r\n            if (valueDecimal) {\r\n                obj.process(decimal);\r\n                var currentValue = valueDecimal;\r\n                if (currentValue) {\r\n                    // Checking current value\r\n                    for (var i = 0; i < currentValue.length; i++) {\r\n                        if (currentValue[i] != null) {\r\n                            obj.process(currentValue[i]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Formatted value\r\n            return values.join('');\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    obj.apply = function(e) {\r\n        var mask = e.target.getAttribute('data-mask');\r\n        if (mask && e.keyCode > 46) {\r\n            index = 0;\r\n            values = [];\r\n            // Create mask token\r\n            obj.prepare(mask);\r\n            // Current value\r\n            if (e.target.selectionStart < e.target.selectionEnd) {\r\n                var currentValue = e.target.value.substring(0, e.target.selectionStart); \r\n            } else {\r\n                var currentValue = e.target.value;\r\n            }\r\n            if (currentValue) {\r\n                // Checking current value\r\n                for (var i = 0; i < currentValue.length; i++) {\r\n                    if (currentValue[i] != null) {\r\n                        obj.process(currentValue[i]);\r\n                    }\r\n                }\r\n            }\r\n            // New input\r\n            obj.process(obj.fromKeyCode(e));\r\n            // Update value to the element\r\n            e.target.value = values.join('');\r\n            if (pieces.length == values.length && pieces[pieces.length-1].length == values[values.length-1].length) {\r\n                e.target.setAttribute('data-completed', 'true');\r\n            } else {\r\n                e.target.setAttribute('data-completed', 'false');\r\n            }\r\n            // Prevent default\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Process inputs and save to values\r\n     */\r\n    obj.process = function(input) {\r\n        do {\r\n            if (pieces[index] == 'mm') {\r\n                if (values[index] == null || values[index] == '') {\r\n                    if (parseInt(input) > 1 && parseInt(input) < 10) {\r\n                        values[index] = '0' + input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (parseInt(input) < 10) {\r\n                        values[index] = input;\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    if (values[index] == 1 && values[index] < 2 && parseInt(input) < 3) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (values[index] == 0 && values[index] < 10) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else {\r\n                        return false\r\n                    }\r\n                }\r\n            } else if (pieces[index] == 'dd') {\r\n                if (values[index] == null || values[index] == '') {\r\n                    if (parseInt(input) > 3 && parseInt(input) < 10) {\r\n                        values[index] = '0' + input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (parseInt(input) < 10) {\r\n                        values[index] = input;\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    if (values[index] == 3 && parseInt(input) < 2) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (values[index] < 3 && parseInt(input) < 10) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else {\r\n                        return false\r\n                    }\r\n                }\r\n            } else if (pieces[index] == 'hh24') {\r\n                if (values[index] == null || values[index] == '') {\r\n                    if (parseInt(input) > 2 && parseInt(input) < 10) {\r\n                        values[index] = '0' + input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (parseInt(input) < 10) {\r\n                        values[index] = input;\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    if (values[index] == 2 && parseInt(input) < 4) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (values[index] < 2 && parseInt(input) < 10) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else {\r\n                        return false\r\n                    }\r\n                }\r\n            } else if (pieces[index] == 'hh') {\r\n                if (values[index] == null || values[index] == '') {\r\n                    if (parseInt(input) > 1 && parseInt(input) < 10) {\r\n                        values[index] = '0' + input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (parseInt(input) < 10) {\r\n                        values[index] = input;\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    if (values[index] == 1 && parseInt(input) < 3) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (values[index] < 1 && parseInt(input) < 10) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                    } else {\r\n                        return false\r\n                    }\r\n                }\r\n            } else if (pieces[index] == 'mi' || pieces[index] == 'ss') {\r\n                if (values[index] == null || values[index] == '') {\r\n                    if (parseInt(input) > 5 && parseInt(input) < 10) {\r\n                        values[index] = '0' + input;\r\n                        index++;\r\n                        return true;\r\n                    } else if (parseInt(input) < 10) {\r\n                        values[index] = input;\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                } else {\r\n                    if (parseInt(input) < 10) {\r\n                        values[index] += input;\r\n                        index++;\r\n                        return true;\r\n                     } else {\r\n                        return false\r\n                    }\r\n                }\r\n            } else if (pieces[index] == 'yy' || pieces[index] == 'yyyy') {\r\n                if (parseInt(input) < 10) {\r\n                    if (values[index] == null || values[index] == '') {\r\n                        values[index] = input;\r\n                    } else {\r\n                        values[index] += input;\r\n                    }\r\n                    \r\n                    if (values[index].length == pieces[index].length) {\r\n                        index++;\r\n                    }\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else if (pieces[index] == '#' || pieces[index] == '#.##' || pieces[index] == '#,##' || pieces[index] == '# ##') {\r\n                if (input.match(/[0-9]/g)) {\r\n                    if (pieces[index] == '#.##') {\r\n                        var separator = '.';\r\n                    } else if (pieces[index] == '#,##') {\r\n                        var separator = ',';\r\n                    } else if (pieces[index] == '# ##') {\r\n                        var separator = ' ';\r\n                    } else {\r\n                        var separator = '';\r\n                    }\r\n                    if (values[index] == null || values[index] == '') {\r\n                        values[index] = input;\r\n                    } else {\r\n                        values[index] += input;\r\n                        if (separator) {\r\n                            values[index] = values[index].match(/[0-9]/g).join('');\r\n                            var t = [];\r\n                            var s = 0;\r\n                            for (var j = values[index].length - 1; j >= 0 ; j--) {\r\n                                t.push(values[index][j]);\r\n                                s++;\r\n                                if (! (s % 3)) {\r\n                                    t.push(separator);\r\n                                }\r\n                            }\r\n                            t = t.reverse();\r\n                            values[index] = t.join('');\r\n                            if (values[index].substr(0,1) == separator) {\r\n                                values[index] = values[index].substr(1);\r\n                            } \r\n                        }\r\n                    }\r\n                    return true;\r\n                } else {\r\n                    if (pieces[index] == '#.##' && input == '.') {\r\n                        // Do nothing\r\n                    } else if (pieces[index] == '#,##' && input == ',') {\r\n                        // Do nothing\r\n                    } else if (pieces[index] == '# ##' && input == ' ') {\r\n                        // Do nothing\r\n                    } else {\r\n                        if (values[index]) {\r\n                            index++;\r\n                            if (pieces[index]) {\r\n                                if (pieces[index] == input) {\r\n                                    values[index] = input;\r\n                                    return true;\r\n                                } else {\r\n                                    if (pieces[index] == '0' && pieces[index+1] == input) {\r\n                                        index++;\r\n                                        values[index] = input;\r\n                                        return true;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n            } else if (pieces[index] == '0') {\r\n                if (input.match(/[0-9]/g)) {\r\n                    values[index] = input;\r\n                    index++;\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else if (pieces[index] == 'a') {\r\n                if (input.match(/[a-zA-Z]/g)) {\r\n                    values[index] = input;\r\n                    index++;\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else {\r\n                if (pieces[index] != null) {\r\n                    if (pieces[index] == '\\\\a') {\r\n                        var v = 'a';\r\n                    } else if (pieces[index] == '\\\\0') {\r\n                        var v = '0';\r\n                    } else if (pieces[index] == '[-]') {\r\n                        if (input == '-' || input == '+') {\r\n                            var v = input;\r\n                        } else {\r\n                            var v = ' ';\r\n                        }\r\n                    } else {\r\n                        var v = pieces[index];\r\n                    }\r\n                    values[index] = v;\r\n                    if (input == v) {\r\n                        index++;\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            index++;\r\n        } while (pieces[index]);\r\n    }\r\n\r\n    /**\r\n     * Create tokens for the mask\r\n     */\r\n    obj.prepare = function(mask) {\r\n        pieces = [];\r\n        for (var i = 0; i < mask.length; i++) {\r\n            if (mask[i].match(/[0-9]|[a-z]|\\\\/g)) {\r\n                if (mask[i] == 'y' && mask[i+1] == 'y' && mask[i+2] == 'y' && mask[i+3] == 'y') {\r\n                    pieces.push('yyyy');\r\n                    i += 3;\r\n                } else if (mask[i] == 'y' && mask[i+1] == 'y') {\r\n                    pieces.push('yy');\r\n                    i++;\r\n                } else if (mask[i] == 'm' && mask[i+1] == 'm' && mask[i+2] == 'm' && mask[i+3] == 'm') {\r\n                    pieces.push('mmmm');\r\n                    i += 3;\r\n                } else if (mask[i] == 'm' && mask[i+1] == 'm' && mask[i+2] == 'm') {\r\n                    pieces.push('mmm');\r\n                    i += 2;\r\n                } else if (mask[i] == 'm' && mask[i+1] == 'm') {\r\n                    pieces.push('mm');\r\n                    i++;\r\n                } else if (mask[i] == 'd' && mask[i+1] == 'd') {\r\n                    pieces.push('dd');\r\n                    i++;\r\n                } else if (mask[i] == 'h' && mask[i+1] == 'h' && mask[i+2] == '2' && mask[i+3] == '4') {\r\n                    pieces.push('hh24');\r\n                    i += 3;\r\n                } else if (mask[i] == 'h' && mask[i+1] == 'h') {\r\n                    pieces.push('hh');\r\n                    i++;\r\n                } else if (mask[i] == 'm' && mask[i+1] == 'i') {\r\n                    pieces.push('mi');\r\n                    i++;\r\n                } else if (mask[i] == 's' && mask[i+1] == 's') {\r\n                    pieces.push('ss');\r\n                    i++;\r\n                } else if (mask[i] == 'a' && mask[i+1] == 'm') {\r\n                    pieces.push('am');\r\n                    i++;\r\n                } else if (mask[i] == 'p' && mask[i+1] == 'm') {\r\n                    pieces.push('pm');\r\n                    i++;\r\n                } else if (mask[i] == '\\\\' && mask[i+1] == '0') {\r\n                    pieces.push('\\\\0');\r\n                    i++;\r\n                } else if (mask[i] == '\\\\' && mask[i+1] == 'a') {\r\n                    pieces.push('\\\\a');\r\n                    i++;\r\n                } else {\r\n                    pieces.push(mask[i]);\r\n                }\r\n            } else {\r\n                if (mask[i] == '#' && mask[i+1] == '.' && mask[i+2] == '#' && mask[i+3] == '#') {\r\n                    pieces.push('#.##');\r\n                    i += 3;\r\n                } else if (mask[i] == '#' && mask[i+1] == ',' && mask[i+2] == '#' && mask[i+3] == '#') {\r\n                    pieces.push('#,##');\r\n                    i += 3;\r\n                } else if (mask[i] == '#' && mask[i+1] == ' ' && mask[i+2] == '#' && mask[i+3] == '#') {\r\n                    pieces.push('# ##');\r\n                    i += 3;\r\n                } else if (mask[i] == '[' && mask[i+1] == '-' && mask[i+2] == ']') {\r\n                    pieces.push('[-]');\r\n                    i += 2;\r\n                } else {\r\n                    pieces.push(mask[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Thanks for the collaboration\r\n     */\r\n    obj.fromKeyCode = function(e) {\r\n        var _to_ascii = {\r\n            '188': '44',\r\n            '109': '45',\r\n            '190': '46',\r\n            '191': '47',\r\n            '192': '96',\r\n            '220': '92',\r\n            '222': '39',\r\n            '221': '93',\r\n            '219': '91',\r\n            '173': '45',\r\n            '187': '61', //IE Key codes\r\n            '186': '59', //IE Key codes\r\n            '189': '45'  //IE Key codes\r\n        }\r\n\r\n        var shiftUps = {\r\n            \"96\": \"~\",\r\n            \"49\": \"!\",\r\n            \"50\": \"@\",\r\n            \"51\": \"#\",\r\n            \"52\": \"$\",\r\n            \"53\": \"%\",\r\n            \"54\": \"^\",\r\n            \"55\": \"&\",\r\n            \"56\": \"*\",\r\n            \"57\": \"(\",\r\n            \"48\": \")\",\r\n            \"45\": \"_\",\r\n            \"61\": \"+\",\r\n            \"91\": \"{\",\r\n            \"93\": \"}\",\r\n            \"92\": \"|\",\r\n            \"59\": \":\",\r\n            \"39\": \"\\\"\",\r\n            \"44\": \"<\",\r\n            \"46\": \">\",\r\n            \"47\": \"?\"\r\n        };\r\n\r\n        var c = e.which;\r\n\r\n        if (_to_ascii.hasOwnProperty(c)) {\r\n            c = _to_ascii[c];\r\n        }\r\n\r\n        if (!e.shiftKey && (c >= 65 && c <= 90)) {\r\n            c = String.fromCharCode(c + 32);\r\n        } else if (e.shiftKey && shiftUps.hasOwnProperty(c)) {\r\n            c = shiftUps[c];\r\n        } else if (96 <= c && c <= 105) {\r\n            c = String.fromCharCode(c - 48);\r\n        } else {\r\n            c = String.fromCharCode(c);\r\n        }\r\n\r\n        return c;\r\n    }\r\n\r\n    return obj;\r\n})();\r\n\r\njSuites.mobile = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    if (jSuites.el) {\r\n        jSuites.el.addEventListener('mousedown', function(e) {\r\n            if (e.target.classList.contains('option-title')) {\r\n                if (e.target.classList.contains('selected')) {\r\n                    e.target.classList.remove('selected');\r\n                } else {\r\n                    e.target.classList.add('selected');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return obj;\r\n})();\r\n\r\njSuites.pages = (function() {\r\n    var container = null;\r\n    var current = null;\r\n\r\n    // Create a page\r\n    var createPage = function(options, callback) {\r\n        // Create page\r\n        var page = document.createElement('div');\r\n        page.classList.add('page');\r\n\r\n        // Always hidden\r\n        page.style.display = 'none';\r\n\r\n        // Keep options\r\n        page.options = options ? options : {};\r\n\r\n        if (! current) {\r\n            container.appendChild(page);\r\n        } else {\r\n            container.insertBefore(page, current.nextSibling);\r\n        }\r\n\r\n        jSuites.ajax({\r\n            url: page.options.url,\r\n            method: 'GET',\r\n            success: function(result) {\r\n                // Push to refresh controls\r\n                jSuites.refresh(page, page.options.onpush);\r\n\n                // Open page\r\n                page.innerHTML = result;\r\n                // Get javascript\r\n                var script = page.getElementsByTagName('script');\r\n                // Run possible inline scripts\r\n                for (var i = 0; i < script.length; i++) {\r\n                    // Get type\r\n                    var type = script[i].getAttribute('type');\r\n                    if (! type || type == 'text/javascript') {\r\n                        eval(script[i].innerHTML);\r\n                    }\r\n                }\r\n                // Set title\r\n                page.setTitle = function(text) {\r\n                    this.children[0].children[0].children[1].innerHTML = text;\r\n                }\r\n                // Show page\r\n                if (! page.options.closed) {\r\n                    showPage(page);\r\n                }\r\n                // Onload callback\r\n                if (typeof(page.options.onload) == 'function') {\r\n                    page.options.onload(page);\r\n                }\r\n                // Force callback\r\n                if (typeof(callback) == 'function') {\r\n                    callback(page);\r\n                }\r\n            }\r\n        });\r\n\r\n        return page;\r\n    }\r\n\r\n    var showPage = function(page, ignoreHistory, callback) {\r\n        if (current) {\r\n            if (current == page) {\r\n                current = page;\r\n            } else {\r\n                // Keep scroll in the top\r\n                window.scrollTo({ top: 0 });\r\n\r\n                // Show page\r\n                page.style.display = '';\r\n\r\n                var a = Array.prototype.indexOf.call(container.children, current);\r\n                var b = Array.prototype.indexOf.call(container.children, page);\r\n\r\n                // Leave\r\n                if (typeof(current.options.onleave) == 'function') {\r\n                    current.options.onleave(current, page, ignoreHistory);\r\n                }\r\n\r\n                jSuites.slideLeft(container, (a < b ? 0 : 1), function() {\r\n                    current.style.display = 'none';\r\n                    current = page;\r\n                });\r\n\r\n                // Enter\r\n                if (typeof(page.options.onenter) == 'function') {\r\n                    page.options.onenter(page, current, ignoreHistory);\r\n                }\r\n            }\r\n        } else {\r\n            // Show\r\n            page.style.display = '';\r\n\r\n            // Keep current\r\n            current = page;\r\n\r\n            // Enter\r\n            if (typeof(page.options.onenter) == 'function') {\r\n                page.options.onenter(page);\r\n            }\r\n        }\r\n\r\n        // Add history\r\n        if (! ignoreHistory) {\r\n            // Add history\r\n            window.history.pushState({ route: page.options.route }, page.options.title, page.options.route);\r\n        }\r\n\r\n        // Callback\r\n        if (typeof(callback) == 'function') {\r\n            callback(page);\r\n        }\r\n    }\r\n\r\n    // Init method\r\n    var obj = function(route, mixed) {\r\n\r\n        // Create page container\r\n        if (! container) {\r\n            container = document.querySelector('.pages');\r\n            if (! container) {\r\n                container = document.createElement('div');\r\n                container.className = 'pages';\r\n            }\r\n\r\n            // Append container to the application\r\n            if (jSuites.el) {\r\n                jSuites.el.appendChild(container);\r\n            } else {\r\n                document.body.appendChild(container);\r\n            }\r\n        }\r\n\r\n        if (! obj.pages[route]) {\r\n            if (! route) {\r\n                alert('Error, no route provided');\r\n            } else {\r\n                if (typeof(mixed) == 'function') {\r\n                    var options = {};\r\n                    var callback = mixed;\r\n                } else {\r\n                    // Page options\r\n                    var options = mixed ? mixed : {};\r\n                }\r\n\r\n                // Closed\r\n                options.closed = mixed && mixed.closed ? 1 : 0;\r\n                // Keep Route\r\n                options.route = route;\r\n\r\n                // New page url\r\n                if (! options.url) {\r\n                    var routePath = route.split('#');\r\n                    options.url = jSuites.pages.path + routePath[0] + '.html';\r\n                }\r\n                // Title\r\n                if (! options.title) {\r\n                    options.title = 'Untitled';\r\n                }\r\n\r\n                // Create new page\r\n                obj.pages[route] = createPage(options, callback ? callback : null);\r\n            }\r\n        } else {\r\n            // Update config\r\n            if (mixed) {\r\n                // History\r\n                var ignoreHistory = 0;\r\n\r\n                if (typeof(mixed) == 'function') {\r\n                    var callback = mixed;\r\n                } else {\r\n                    if (typeof(mixed.onenter) == 'function') {\r\n                        obj.pages[route].options.onenter = mixed.onenter;\r\n                    }\r\n                    if (typeof(mixed.onleave) == 'function') {\r\n                        obj.pages[route].options.onleave = mixed.onleave;\r\n                    }\r\n\r\n                    // Ignore history\r\n                    ignoreHistory = mixed.ignoreHistory ? 1 : 0; \r\n                }\r\n            }\r\n\r\n            showPage(obj.pages[route], ignoreHistory, callback ? callback : null);\r\n        }\r\n    }\r\n\r\n    obj.pages = {};\r\n\r\n    // Get page\r\n    obj.get = function(route) {\r\n        if (obj.pages[route]) {\r\n            return obj.pages[route]; \r\n        }\r\n    }\r\n\r\n    obj.getContainer = function() {\r\n        return container;\r\n    }\r\n\r\n    obj.destroy = function() {\r\n        // Current is null\r\n        current = null;\r\n        // Destroy containers\r\n        obj.pages = {};\r\n        // Reset container\r\n        if (container) {\r\n            container.innerHTML = '';\r\n        }\r\n    }\r\n\r\n    return obj;\r\n})();\r\n\r\n// Path\r\njSuites.pages.path = 'pages';\r\n\r\n// Panel\r\njSuites.panel = (function() {\r\n    // No initial panel declared\r\n    var panel = null;\r\n\r\n    var obj = function(route) {\r\n        if (! panel) {\r\n            obj.create(jSuites.pages.path + route + '.html');\r\n        }\r\n\r\n        // Show panel\r\n        panel.style.display = '';\r\n\r\n        // Add animation\r\n        if (panel.classList.contains('panel-left')) {\r\n            jSuites.slideLeft(panel, 1);\r\n        } else {\r\n            jSuites.slideRight(panel, 1);\r\n        }\r\n    }\r\n\r\n    obj.create = function(route) {\r\n        if (! panel) {\r\n            // Create element\r\n            panel = document.createElement('div');\r\n            panel.classList.add('panel');\r\n            panel.classList.add('panel-left');\r\n            panel.style.display = 'none';\r\n\r\n            // Bind to the app\r\n            if (jSuites.el) {\r\n                jSuites.el.appendChild(panel);\r\n            } else {\r\n                document.body.appendChild(panel);\r\n            }\r\n        }\r\n\r\n        // Remote content\r\n        if (route) {\r\n\t        var url = jSuites.pages.path + route + '.html';\r\n\r\n            jSuites.ajax({\r\n                url: url,\r\n                method: 'GET',\r\n                success: function(result) {\r\n                    // Set content\r\n                    panel.innerHTML = result;\r\n                    // Get javascript\r\n                    var script = panel.getElementsByTagName('script');\r\n                    // Run possible inline scripts\r\n                    for (var i = 0; i < script.length; i++) {\r\n                        // Get type\r\n                        var type = script[i].getAttribute('type');\r\n                        if (! type || type == 'text/javascript') {\r\n                            eval(script[i].innerHTML);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    obj.close = function() {\r\n        if (panel) {\r\n            // Animation\r\n            if (panel.classList.contains('panel-left')) {\r\n                jSuites.slideLeft(panel, 0, function() {\r\n                    panel.style.display = 'none';\r\n                });\r\n            } else {\r\n                jSuites.slideRight(panel, 0, function() {\r\n                    panel.style.display = 'none';\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.get = function() {\r\n        return panel;\r\n    }\r\n\r\n    obj.destroy = function() {\r\n        panel.remove();\r\n        panel = null;\r\n    }\r\n\r\n    return obj;\r\n})();\r\n\r\njSuites.toolbar = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = options;\r\n\r\n    obj.selectItem = function(element) {\r\n        var elements = toolbarContent.children;\r\n        for (var i = 0; i < elements.length; i++) {\r\n            elements[i].classList.remove('selected');\r\n        }\r\n        element.classList.add('selected');\r\n    }\r\n\r\n    obj.hide = function() {\r\n        jSuites.slideBottom(toolbar, 0, function() {\r\n            toolbar.style.display = 'none';\r\n        });\r\n    }\r\n\r\n    obj.show = function() {\r\n        toolbar.style.display = '';\r\n        jSuites.slideBottom(toolbar, 1);\r\n    }\r\n\r\n    obj.get = function() {\r\n        return toolbar;\r\n    }\r\n\r\n    obj.setBadge = function(index, value) {\r\n        toolbarContent.children[index].children[1].firstChild.innerHTML = value;\r\n    }\r\n\r\n    obj.destroy = function() {\r\n        toolbar.remove();\r\n        toolbar = null;\r\n    }\r\n\r\n    var toolbar = document.createElement('div');\r\n    toolbar.classList.add('jtoolbar');\r\n    toolbar.onclick = function(e) {\r\n        var element = jSuites.getElement(e.target, 'jtoolbar-item');\r\n        if (element) {\r\n            obj.selectItem(element);\r\n        }\r\n    }\r\n\r\n    var toolbarContent = document.createElement('div');\r\n    toolbar.appendChild(toolbarContent);\r\n\r\n    for (var i = 0; i < options.items.length; i++) {\r\n        let toolbarItem = document.createElement('div');\r\n        toolbarItem.classList.add('jtoolbar-item');\r\n        if (options.items[i].route) {\r\n            toolbarItem.setAttribute('data-href', options.items[i].route);\r\n            jSuites.pages(options.items[i].route, {\r\n                closed: true,\r\n                onenter: function() {\r\n                    obj.selectItem(toolbarItem);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (options.items[i].icon) {\r\n            var toolbarIcon = document.createElement('i');\r\n            toolbarIcon.classList.add('material-icons');\r\n            toolbarIcon.innerHTML = options.items[i].icon;\r\n            toolbarItem.appendChild(toolbarIcon);\r\n        }\r\n\r\n        var toolbarBadge = document.createElement('div');\r\n        toolbarBadge.classList.add('jbadge');\r\n        var toolbarBadgeContent = document.createElement('div');\r\n        toolbarBadgeContent.innerHTML = options.items[i].badge ? options.items[i].badge : '';\r\n        toolbarBadge.appendChild(toolbarBadgeContent);\r\n        toolbarItem.appendChild(toolbarBadge);\r\n\r\n        if (options.items[i].title) {\r\n            var toolbarTitle = document.createElement('span');\r\n            toolbarTitle.innerHTML = options.items[i].title;\r\n            toolbarItem.appendChild(toolbarTitle);\r\n        }\r\n\r\n        toolbarContent.appendChild(toolbarItem);\r\n    }\r\n\r\n    el.toolbar = obj;\r\n\r\n    el.appendChild(toolbar);\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.actionsheet = (function() {\r\n    var actionsheet = document.createElement('div');\r\n    actionsheet.className = 'jactionsheet';\r\n    actionsheet.style.display = 'none';\r\n\r\n    var actionContent = document.createElement('div');\r\n    actionContent.className = 'jactionsheet-content';\r\n    actionsheet.appendChild(actionContent);\r\n\r\n    var obj = function(options) {\r\n        if (options) {\r\n            obj.options = options;\r\n        }\r\n\r\n        // Reset container\r\n        actionContent.innerHTML = '';\r\n\r\n        // Create new elements\r\n        for (var i = 0; i < obj.options.length; i++) {\r\n            var actionGroup = document.createElement('div');\r\n            actionGroup.className = 'jactionsheet-group';\r\n\r\n            for (var j = 0; j < obj.options[i].length; j++) {\r\n                var v = obj.options[i][j];\r\n                var actionItem = document.createElement('div');\r\n                var actionInput = document.createElement('input');\r\n                actionInput.type = 'button';\r\n                actionInput.value = v.title;\r\n                if (v.className) {\r\n                    actionInput.className = v.className; \r\n                }\r\n                if (v.onclick) {\r\n                    actionInput.onclick = v.onclick; \r\n                }\r\n                if (v.action == 'cancel') {\r\n                    actionInput.style.color = 'red';\r\n                }\r\n                actionItem.appendChild(actionInput);\r\n                actionGroup.appendChild(actionItem);\r\n            }\r\n\r\n            actionContent.appendChild(actionGroup);\r\n        }\r\n\r\n        // Show\r\n        actionsheet.style.display = '';\r\n\r\n        // Append\r\n        jSuites.el.appendChild(actionsheet);\r\n\r\n        // Animation\r\n        jSuites.slideBottom(actionContent, true);\r\n    }\r\n\r\n    obj.close = function() {\r\n        if (actionsheet.style.display != 'none') {\r\n            // Remove any existing actionsheet\r\n            jSuites.slideBottom(actionContent, false, function() {\r\n                actionsheet.remove();\r\n                actionsheet.style.display = 'none';\r\n            });\r\n        }\r\n    }\r\n\r\n    var mouseUp = function(e) {\r\n        obj.close();\r\n    }\r\n\r\n    actionsheet.addEventListener('mouseup', mouseUp);\r\n\r\n    obj.options = {};\r\n\r\n    return obj;\r\n})();\r\n\r\n/**\r\n * (c) jSuites modal\r\n * https://github.com/paulhodel/jsuites\r\n *\r\n * @author: Paul Hodel <paul.hodel@gmail.com>\r\n * @description: Modal\r\n */\r\n\r\njSuites.modal = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        url: null,\r\n        onopen: null,\r\n        onclose: null,\r\n        closed: false,\r\n        width: null,\r\n        height: null,\r\n        title: null,\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Title\r\n    if (! obj.options.title && el.getAttribute('title')) {\r\n        obj.options.title = el.getAttribute('title');\r\n    }\r\n\r\n    var temp = document.createElement('div');\r\n    for (var i = 0; i < el.children.length; i++) {\r\n        temp.appendChild(el.children[i]);\r\n    }\r\n\r\n    obj.content = document.createElement('div');\r\n    obj.content.className = 'jmodal_content';\r\n    obj.content.innerHTML = el.innerHTML;\r\n\r\n    for (var i = 0; i < temp.children.length; i++) {\r\n        obj.content.appendChild(temp.children[i]);\r\n    }\r\n\r\n    obj.container = document.createElement('div');\r\n    obj.container.className = 'jmodal';\r\n    obj.container.appendChild(obj.content);\r\n\r\n    if (obj.options.width) {\r\n        obj.container.style.width = obj.options.width;\r\n    }\r\n    if (obj.options.height) {\r\n        obj.container.style.height = obj.options.height;\r\n    }\r\n    if (obj.options.title) {\r\n        obj.container.setAttribute('title', obj.options.title);\r\n    } else {\r\n        obj.container.classList.add('no-title');\r\n    }\r\n    el.innerHTML = '';\r\n    el.style.display = 'none';\r\n    el.appendChild(obj.container);\r\n\r\n    // Backdrop\r\n    var backdrop = document.createElement('div');\r\n    backdrop.className = 'jmodal_backdrop';\r\n    el.appendChild(backdrop);\r\n\r\n    obj.open = function() {\r\n        el.style.display = 'block';\r\n        // Fullscreen\r\n        const rect = obj.container.getBoundingClientRect();\r\n        if (jSuites.getWindowWidth() < rect.width) {\r\n            obj.container.style.top = '';\r\n            obj.container.style.left = '';\r\n            obj.container.classList.add('jmodal_fullscreen');\r\n            jSuites.slideBottom(obj.container, 1);\r\n        } else {\r\n            backdrop.style.display = 'block';\r\n        }\r\n        // Current\r\n        jSuites.modal.current = obj;\r\n        // Event\r\n        if (typeof(obj.options.onopen) == 'function') {\r\n            obj.options.onopen(el, obj);\r\n        }\r\n    }\r\n\r\n    obj.resetPosition = function() {\r\n        obj.container.style.top = '';\r\n        obj.container.style.left = '';\r\n    }\r\n\r\n    obj.isOpen = function() {\r\n        return el.style.display != 'none' ? true : false;\r\n    }\r\n\r\n    obj.close = function() {\r\n        el.style.display = 'none';\r\n        // Backdrop\r\n        backdrop.style.display = '';\r\n        // Current\r\n        jSuites.modal.current = null;\r\n        // Remove fullscreen class\r\n        obj.container.classList.remove('jmodal_fullscreen');\r\n        // Event\r\n        if (typeof(obj.options.onclose) == 'function') {\r\n            obj.options.onclose(el, obj);\r\n        }\r\n    }\r\n\r\n    if (! jSuites.modal.hasEvents) {\r\n        jSuites.modal.current = obj;\r\n\r\n        if ('ontouchstart' in document.documentElement === true) {\r\n            document.addEventListener(\"touchstart\", jSuites.modal.mouseDownControls);\r\n        } else {\r\n            document.addEventListener('mousedown', jSuites.modal.mouseDownControls);\r\n            document.addEventListener('mousemove', jSuites.modal.mouseMoveControls);\r\n            document.addEventListener('mouseup', jSuites.modal.mouseUpControls);\r\n        }\r\n\r\n        document.addEventListener('keydown', jSuites.modal.keyDownControls);\r\n\r\n        jSuites.modal.hasEvents = true;\r\n    }\r\n\r\n    if (obj.options.url) {\r\n        jSuites.ajax({\r\n            url: obj.options.url,\r\n            method: 'GET',\r\n            success: function(data) {\r\n                obj.content.innerHTML = data;\r\n\r\n                if (! obj.options.closed) {\r\n                    obj.open();\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        if (! obj.options.closed) {\r\n            obj.open();\r\n        }\r\n    }\r\n\r\n    // Keep object available from the node\r\n    el.modal = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.modal.current = null;\r\njSuites.modal.position = null;\r\n\r\njSuites.modal.keyDownControls = function(e) {\r\n    if (e.which == 27) {\r\n        if (jSuites.modal.current) {\r\n            jSuites.modal.current.close();\r\n        }\r\n    }\r\n}\r\n\r\njSuites.modal.mouseUpControls = function(e) {\r\n    if (jSuites.modal.current) {\r\n        jSuites.modal.current.container.style.cursor = 'auto';\r\n    }\r\n    jSuites.modal.position = null;\r\n}\r\n\r\njSuites.modal.mouseMoveControls = function(e) {\r\n    if (jSuites.modal.current && jSuites.modal.position) {\r\n        if (e.which == 1 || e.which == 3) {\r\n            var position = jSuites.modal.position;\r\n            jSuites.modal.current.container.style.top = (position[1] + (e.clientY - position[3]) + (position[5] / 2)) + 'px';\r\n            jSuites.modal.current.container.style.left = (position[0] + (e.clientX - position[2]) + (position[4] / 2)) + 'px';\r\n            jSuites.modal.current.container.style.cursor = 'move';\r\n        } else {\r\n            jSuites.modal.current.container.style.cursor = 'auto';\r\n        }\r\n    }\r\n}\r\n\r\njSuites.modal.mouseDownControls = function(e) {\r\n    jSuites.modal.position = [];\r\n\r\n    if (e.target.classList.contains('jmodal')) {\r\n        setTimeout(function() {\r\n            // Get target info\r\n            var rect = e.target.getBoundingClientRect();\r\n\r\n            if (e.changedTouches && e.changedTouches[0]) {\r\n                var x = e.changedTouches[0].clientX;\r\n                var y = e.changedTouches[0].clientY;\r\n            } else {\r\n                var x = e.clientX;\r\n                var y = e.clientY;\r\n            }\r\n\r\n            if (rect.width - (x - rect.left) < 50 && (y - rect.top) < 50) {\r\n                setTimeout(function() {\r\n                    jSuites.modal.current.close();\r\n                }, 100);\r\n            } else {\r\n                if (e.target.getAttribute('title') && (y - rect.top) < 50) {\r\n                    if (document.selection) {\r\n                        document.selection.empty();\r\n                    } else if ( window.getSelection ) {\r\n                        window.getSelection().removeAllRanges();\r\n                    }\r\n\r\n                    jSuites.modal.position = [\r\n                        rect.left,\r\n                        rect.top,\r\n                        e.clientX,\r\n                        e.clientY,\r\n                        rect.width,\r\n                        rect.height,\r\n                    ];\r\n                }\r\n            }\r\n        }, 100);\r\n    }\r\n}\r\n\r\n\r\njSuites.notification = (function(options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        icon: null,\r\n        name: 'Notification',\r\n        date: null,\r\n        title: null,\r\n        message: null,\r\n        timeout: 4000,\r\n        autoHide: true,\r\n        closeable: true,\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    var notification = document.createElement('div');\r\n    notification.className = 'jnotification';\r\n\r\n    var notificationContainer = document.createElement('div');\r\n    notificationContainer.className = 'jnotification-container';\r\n    notification.appendChild(notificationContainer);\r\n\r\n    var notificationHeader = document.createElement('div');\r\n    notificationHeader.className = 'jnotification-header';\r\n    notificationContainer.appendChild(notificationHeader);\r\n\r\n    var notificationImage = document.createElement('div');\r\n    notificationImage.className = 'jnotification-image';\r\n    notificationHeader.appendChild(notificationImage);\r\n\r\n    if (obj.options.icon) {\r\n        var notificationIcon = document.createElement('img');\r\n        notificationIcon.src = obj.options.icon;\r\n        notificationImage.appendChild(notificationIcon);\r\n    }\r\n\r\n    var notificationName = document.createElement('div');\r\n    notificationName.className = 'jnotification-name';\r\n    notificationName.innerHTML = obj.options.name;\r\n    notificationHeader.appendChild(notificationName);\r\n\r\n    if (obj.options.closeable == true) {\r\n        var notificationClose = document.createElement('div');\r\n        notificationClose.className = 'jnotification-close';\r\n        notificationClose.onclick = function() {\r\n            obj.hide();\r\n        }\r\n        notificationHeader.appendChild(notificationClose);\r\n    }\r\n\r\n    var notificationDate = document.createElement('div');\r\n    notificationDate.className = 'jnotification-date';\r\n    notificationHeader.appendChild(notificationDate);\r\n\r\n    var notificationContent = document.createElement('div');\r\n    notificationContent.className = 'jnotification-content';\r\n    notificationContainer.appendChild(notificationContent);\r\n\r\n    if (obj.options.title) {\r\n        var notificationTitle = document.createElement('div');\r\n        notificationTitle.className = 'jnotification-title';\r\n        notificationTitle.innerHTML = obj.options.title;\r\n        notificationContent.appendChild(notificationTitle);\r\n    }\r\n\r\n    var notificationMessage = document.createElement('div');\r\n    notificationMessage.className = 'jnotification-message';\r\n    notificationMessage.innerHTML = obj.options.message;\r\n    notificationContent.appendChild(notificationMessage);\r\n\r\n    obj.show = function() {\r\n        document.body.appendChild(notification);\r\n        if (jSuites.getWindowWidth() > 800) { \r\n            jSuites.fadeIn(notification);\r\n        } else {\r\n            jSuites.slideTop(notification, 1);\r\n        }\r\n    }\r\n\r\n    obj.hide = function() {\r\n        if (jSuites.getWindowWidth() > 800) { \r\n            jSuites.fadeOut(notification, function() {\r\n                notification.parentNode.removeChild(notification);\r\n            });\r\n        } else {\r\n            jSuites.slideTop(notification, 0, function() {\r\n                notification.parentNode.removeChild(notification);\r\n            });\r\n        }\r\n    };\r\n\r\n    obj.show();\r\n\r\n    if (obj.options.autoHide == true) {\r\n        setTimeout(function() {\r\n            obj.hide();\r\n        }, obj.options.timeout);\r\n    }\r\n\r\n    if (jSuites.getWindowWidth() < 800) {\r\n        notification.addEventListener(\"swipeup\", function(e) {\r\n            obj.hide();\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.rating = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        number: 5,\r\n        value: 0,\r\n        tooltip: [ 'Very bad', 'Bad', 'Average', 'Good', 'Very good' ],\r\n        onchange: null,\r\n    };\r\n\r\n    // Loop through the initial configuration\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Class\r\n    el.classList.add('jrating');\r\n\r\n    // Add elements\r\n    for (var i = 0; i < obj.options.number; i++) {\r\n        var div = document.createElement('div');\r\n        div.setAttribute('data-index', (i + 1))\r\n        div.setAttribute('title', obj.options.tooltip[i])\r\n        el.appendChild(div);\r\n    }\r\n\r\n    // Set value\r\n    obj.setValue = function(index) {\r\n        for (var i = 0; i < obj.options.number; i++) {\r\n            if (i < index) {\r\n                el.children[i].classList.add('jrating-selected');\r\n            } else {\r\n                el.children[i].classList.remove('jrating-over');\r\n                el.children[i].classList.remove('jrating-selected');\r\n            }\r\n        }\r\n\r\n        obj.options.value = index;\r\n\r\n        if (typeof(obj.options.onchange) == 'function') {\r\n            obj.options.onchange(el, index);\r\n        }\r\n    }\r\n\r\n    obj.getValue = function() {\r\n        return obj.options.value;\r\n    }\r\n\r\n    if (obj.options.value) {\r\n        for (var i = 0; i < obj.options.number; i++) {\r\n            if (i < obj.options.value) {\r\n                el.children[i].classList.add('jrating-selected');\r\n            }\r\n        }\r\n    }\r\n\r\n    // Events\r\n    el.addEventListener(\"click\", function(e) {\r\n        var index = e.target.getAttribute('data-index');\r\n        if (index != undefined) {\r\n            if (index == obj.options.value) {\r\n                obj.setValue(0);\r\n            } else {\r\n                obj.setValue(index);\r\n            }\r\n        }\r\n    });\r\n\r\n    el.addEventListener(\"mouseover\", function(e) {\r\n        var index = e.target.getAttribute('data-index');\r\n        for (var i = 0; i < obj.options.number; i++) {\r\n            if (i < index) {\r\n                el.children[i].classList.add('jrating-over');\r\n            } else {\r\n                el.children[i].classList.remove('jrating-over');\r\n            }\r\n        }\r\n    });\r\n\r\n    el.addEventListener(\"mouseout\", function(e) {\r\n        for (var i = 0; i < obj.options.number; i++) {\r\n            el.children[i].classList.remove('jrating-over');\r\n        }\r\n    });\r\n\r\n    el.rating = obj;\r\n\r\n    return obj;\r\n});\r\n\r\n\r\n/**\r\n * (c) Image slider\r\n * https://github.com/paulhodel/jtools\r\n *\r\n * @author: Paul Hodel <paul.hodel@gmail.com>\r\n * @description: Image Slider\r\n */\r\n\r\njSuites.slider = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n    obj.currentImage = null;\r\n\r\n    if (options) {\r\n        obj.options = options;\r\n    }\r\n\r\n    // Items\r\n    obj.options.items = [];\r\n\r\n    if (! el.classList.contains('jslider')) {\r\n        el.classList.add('jslider');\r\n\r\n        // Create container\r\n        var container = document.createElement('div');\r\n        container.className = 'jslider-container';\r\n\r\n        // Move children inside\r\n        if (el.children.length > 0) {\r\n            // Keep children items\r\n            for (var i = 0; i < el.children.length; i++) {\r\n                obj.options.items.push(el.children[i]);\r\n            }\r\n        }\r\n        if (obj.options.items.length > 0) {\r\n            for (var i = 0; i < obj.options.items.length; i++) {\r\n                obj.options.items[i].classList.add('jfile');\r\n                var index = obj.options.items[i].src.lastIndexOf('/');\r\n                if (index < 0) {\r\n                    obj.options.items[i].setAttribute('data-name', obj.options.items[i].src);\r\n                } else {\r\n                    obj.options.items[i].setAttribute('data-name', obj.options.items[i].src.substr(index + 1));\r\n                }\r\n                var index = obj.options.items[i].src.lastIndexOf('/');\r\n\r\n                container.appendChild(obj.options.items[i]);\r\n            }\r\n        }\r\n        el.appendChild(container);\r\n        // Add close buttom\r\n        var close = document.createElement('div');\r\n        close.className = 'jslider-close';\r\n        close.innerHTML = '';\r\n        close.onclick =  function() {\r\n            obj.close();\r\n        }\r\n        el.appendChild(close);\r\n    } else {\r\n        var container = el.querySelector('slider-container');\r\n    }\r\n\r\n    obj.show = function(target) {\r\n        if (! target) {\r\n            var target = container.children[0];\r\n        }\r\n\r\n        if (! container.classList.contains('jslider-preview')) {\r\n            container.classList.add('jslider-preview');\r\n            close.style.display = 'block';\r\n        }\r\n\r\n        // Hide all images\r\n        for (var i = 0; i < container.children.length; i++) {\r\n            container.children[i].style.display = 'none';\r\n        }\r\n\r\n        // Show clicked only\r\n        target.style.display = 'block';\r\n\r\n        // Is there any previous\r\n        if (target.previousSibling) {\r\n            container.classList.add('jslider-left');\r\n        } else {\r\n            container.classList.remove('jslider-left');\r\n        }\r\n\r\n        // Is there any next\r\n        if (target.nextSibling) {\r\n            container.classList.add('jslider-right');\r\n        } else {\r\n            container.classList.remove('jslider-right');\r\n        }\r\n\r\n        obj.currentImage = target;\r\n    }\r\n\r\n    obj.open = function() {\r\n        obj.show();\r\n\r\n        // Event\r\n        if (typeof(obj.options.onopen) == 'function') {\r\n            obj.options.onopen(el);\r\n        }\r\n    }\r\n\r\n    obj.close = function() {\r\n        container.classList.remove('jslider-preview');\r\n        container.classList.remove('jslider-left');\r\n        container.classList.remove('jslider-right');\r\n\r\n        for (var i = 0; i < container.children.length; i++) {\r\n            container.children[i].style.display = '';\r\n        }\r\n\r\n        close.style.display = '';\r\n\r\n        obj.currentImage = null;\r\n\r\n        // Event\r\n        if (typeof(obj.options.onclose) == 'function') {\r\n            obj.options.onclose(el);\r\n        }\r\n    }\r\n\r\n    obj.reset = function() {\r\n        container.innerHTML = '';\r\n    }\r\n\r\n    obj.addFile = function(v, ignoreEvents) {\r\n        var img = document.createElement('img');\r\n        img.setAttribute('data-lastmodified', v.lastmodified);\r\n        img.setAttribute('data-name', v.name);\r\n        img.setAttribute('data-size', v.size);\r\n        img.setAttribute('data-extension', v.extension);\r\n        img.setAttribute('data-cover', v.cover);\r\n        img.setAttribute('src', v.file);\r\n        img.className = 'jfile';\r\n        container.appendChild(img);\r\n        obj.options.items.push(img);\r\n\r\n        // Onchange\r\n        if (! ignoreEvents) {\r\n            if (typeof(obj.options.onchange) == 'function') {\r\n                obj.options.onchange(el, v);\r\n            }\r\n        }\r\n    }\r\n\r\n    obj.addFiles = function(files) {\r\n        for (var i = 0; i < files.length; i++) {\r\n            obj.addFile(files[i]);\r\n        }\r\n    }\r\n\r\n    obj.next = function() {\r\n        if (obj.currentImage.nextSibling) {\r\n            obj.show(obj.currentImage.nextSibling);\r\n        }\r\n    }\r\n    \r\n    obj.prev = function() {\r\n        if (obj.currentImage.previousSibling) {\r\n            obj.show(obj.currentImage.previousSibling);\r\n        }\r\n    }\r\n\r\n    obj.getData = function() {\r\n        return jSuites.getFiles(container);\r\n    }\r\n\r\n    // Append data\r\n    if (obj.options.data && obj.options.data.length) {\r\n        for (var i = 0; i < obj.options.data.length; i++) {\r\n            if (obj.options.data[i]) {\r\n                obj.addFile(obj.options.data[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Allow insert\r\n    if (obj.options.allowAttachment) {\r\n        var attachmentInput = document.createElement('input');\r\n        attachmentInput.type = 'file';\r\n        attachmentInput.className = 'slider-attachment';\r\n        attachmentInput.setAttribute('accept', 'image/*');\r\n        attachmentInput.style.display = 'none';\r\n        attachmentInput.onchange = function() {\r\n            var reader = [];\r\n\r\n            for (var i = 0; i < this.files.length; i++) {\r\n                var type = this.files[i].type.split('/');\r\n\r\n                if (type[0] == 'image') {\r\n                    var extension = this.files[i].name;\r\n                    extension = extension.split('.');\r\n                    extension = extension[extension.length-1];\r\n\r\n                    var file = {\r\n                        size: this.files[i].size,\r\n                        name: this.files[i].name,\r\n                        extension: extension,\r\n                        cover: 0,\r\n                        lastmodified: this.files[i].lastModified,\r\n                    }\r\n\r\n                    reader[i] = new FileReader();\r\n                    reader[i].addEventListener(\"load\", function (e) {\r\n                        file.file = e.target.result;\r\n                        obj.addFile(file);\r\n                    }, false);\r\n\r\n                    reader[i].readAsDataURL(this.files[i]);\r\n                } else {\r\n                    alert('The extension is not allowed');\r\n                }\r\n            };\r\n        }\r\n\r\n        var attachmentIcon = document.createElement('i');\r\n        attachmentIcon.innerHTML = 'attachment';\r\n        attachmentIcon.className = 'jslider-attach material-icons';\r\n        attachmentIcon.onclick = function() {\r\n            jSuites.click(attachmentInput);\r\n        }\r\n\r\n        el.appendChild(attachmentInput);\r\n        el.appendChild(attachmentIcon);\r\n    }\r\n\r\n    // Push to refresh\r\n    var longTouchTimer = null;\r\n\r\n    var mouseDown = function(e) {\r\n        if (e.target.tagName == 'IMG') {\r\n            // Remove\r\n            var targetImage = e.target;\r\n            longTouchTimer = setTimeout(function() {\r\n                if (e.target.src.substr(0,4) == 'data') {\r\n                    e.target.remove();\r\n                } else {\r\n                    if (e.target.classList.contains('jremove')) {\r\n                        e.target.classList.remove('jremove');\r\n                    } else {\r\n                        e.target.classList.add('jremove');\r\n                    }\r\n                }\r\n\r\n                // Onchange\r\n                if (typeof(obj.options.onchange) == 'function') {\r\n                    obj.options.onchange(el, e.target);\r\n                }\r\n            }, 1000);\r\n        }\r\n    }\r\n\r\n    var mouseUp = function(e) {\r\n        if (longTouchTimer) {\r\n            clearTimeout(longTouchTimer);\r\n        }\r\n\r\n        // Open slider\r\n        if (e.target.tagName == 'IMG') {\r\n            if (! e.target.classList.contains('jremove')) {\r\n                obj.show(e.target);\r\n            }\r\n        } else {\r\n            // Arrow controls\r\n            if (e.target.clientWidth - e.offsetX < 40) {\r\n                // Show next image\r\n                obj.next();\r\n            } else if (e.offsetX < 40) {\r\n                // Show previous image\r\n                obj.prev();\r\n            }\r\n        }\r\n    }\r\n\r\n    container.addEventListener('mousedown', mouseDown);\r\n    container.addEventListener('touchstart', mouseDown);\r\n    container.addEventListener('mouseup', mouseUp);\r\n    container.addEventListener('touchend', mouseUp);\r\n\r\n    // Add global events\r\n    el.addEventListener(\"swipeleft\", function(e) {\r\n        obj.next();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    });\r\n\r\n    el.addEventListener(\"swiperight\", function(e) {\r\n        obj.prev();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    });\r\n\r\n\r\n    el.slider = obj;\r\n\r\n    return obj;\r\n});\r\n\r\n/**\n * (c) jTools v1.0.1 - Element sorting\n * https://github.com/paulhodel/jtools\n *\n * @author: Paul Hodel <paul.hodel@gmail.com>\n * @description: Element drag and drop sorting\n */\n\njSuites.sorting = (function(el, options) {\n    el.classList.add('jsorting');\n\n    el.addEventListener('dragstart', function(e) {\n        e.target.classList.add('dragging');\n    });\n\n    el.addEventListener('dragover', function(e) {\n        e.preventDefault();\n\n        if (e.target.clientHeight / 2 > e.offsetY) {\n            e.path[0].style.borderTop = '1px dotted #ccc';\n            e.path[0].style.borderBottom = '';\n        } else {\n            e.path[0].style.borderTop = '';\n            e.path[0].style.borderBottom = '1px dotted #ccc';\n        }\n    });\n\n    el.addEventListener('dragleave', function(e) {\n        e.path[0].style.borderTop = '';\n        e.path[0].style.borderBottom = '';\n    });\n\n    el.addEventListener('dragend', function(e) {\n        e.path[1].querySelector('.dragging').classList.remove('dragging');\n    });\n\n    el.addEventListener('drop', function(e) {\n        var element = e.path[1].querySelector('.dragging');\n\n        if (e.target.clientHeight / 2 > e.offsetY) {\n            e.path[1].insertBefore(element, e.path[0]);\n        } else {\n            e.path[1].insertBefore(element, e.path[0].nextSibling);\n        }\n\n        e.path[0].style.borderTop = '';\n        e.path[0].style.borderBottom = '';\n    });\n\n    for (var i = 0; i < el.children.length; i++) {\n        el.children[i].setAttribute('draggable', 'true');\n    };\n\n    return el;\n});\r\n\r\njSuites.tabs = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        data: null,\r\n        onchange: null,\r\n        onload: null,\r\n    };\r\n\r\n    // Loop through the initial configuration\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Class\r\n    el.classList.add('jtabs');\r\n\r\n    // Create from data\r\n    if (obj.options.data) {\r\n        // Make sure the component is blank\r\n        el.innerHTML = '';\r\n        var headers = document.createElement('div');\r\n        var content = document.createElement('div');\r\n        headers.classList.add('jtabs-headers');\r\n        content.classList.add('jtabs-content');\r\n        el.appendChild(headers);\r\n        el.appendChild(content);\r\n\r\n        for (var i = 0; i < obj.options.data.length; i++) {\r\n            var headersItem = document.createElement('div');\r\n            headers.appendChild(headersItem);\r\n            var contentItem = document.createElement('div');\r\n            content.appendChild(contentItem);\r\n\r\n            headersItem.innerHTML = obj.options.data[i].title;\r\n            if (obj.options.data[i].content) {\r\n                contentItem.innerHTML = obj.options.data[i].content;\r\n            } else if (obj.options.data[i].url) {\r\n                jSuites.ajax({\r\n                    url: obj.options.data[i].url,\r\n                    type: 'GET',\r\n                    success: function(result) {\r\n                        contentItem.innerHTML = result;\r\n                    },\r\n                    complete: function() {\r\n                        if (typeof(obj.options.onload) == 'function') {\r\n                            obj.options.onload(el);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    } else if (el.children[0] && el.children[1]) {\r\n        // Create from existing elements\r\n        var headers = el.children[0];\r\n        var content = el.children[1];\r\n        headers.classList.add('jtabs-headers');\r\n        content.classList.add('jtabs-content');\r\n    }\r\n\r\n    // Border\r\n    var border = document.createElement('div');\r\n    border.className = 'jtabs-border';\r\n    el.appendChild(border);\r\n\r\n    var setBorder = function(index) {\r\n        var rect = headers.children[index].getBoundingClientRect();\r\n        border.style.width = rect.width + 'px';\r\n        border.style.top = rect.top + rect.height - 2 + 'px';\r\n        border.style.left = rect.left + 'px';\r\n    }\r\n\r\n    // Set value\r\n    obj.open = function(index) {\r\n        for (var i = 0; i < headers.children.length; i++) {\r\n            headers.children[i].classList.remove('jtabs-selected');\r\n            if (content.children[i]) {\r\n                content.children[i].classList.remove('jtabs-selected');\r\n            }\r\n        }\r\n\r\n        headers.children[index].classList.add('jtabs-selected');\r\n        if (content.children[index]) {\r\n            content.children[index].classList.add('jtabs-selected');\r\n        }\r\n\r\n        // Set border\r\n        setTimeout(function() {\r\n            setBorder(index);\r\n        }, 10);\r\n    }\r\n\r\n    // Events\r\n    headers.addEventListener(\"click\", function(e) {\r\n        var index = Array.prototype.indexOf.call(headers.children, e.target);\r\n        if (index >= 0) {\r\n            obj.open(index);\r\n        }\r\n    });\r\n\r\n    obj.open(0);\r\n\r\n    el.tabs = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.tags = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    /**\r\n     * @typedef {Object} defaults\r\n     * @property {(string|Array)} value - Initial value of the compontent\r\n     * @property {number} limit - Max number of tags inside the element\r\n     * @property {string} search - The URL for suggestions\r\n     * @property {string} placeholder - The default instruction text on the element\r\n     * @property {validation} validation - Method to validate the tags\r\n     * @property {requestCallback} onbeforechange - Method to be execute before any changes on the element\r\n     * @property {requestCallback} onchange - Method to be execute after any changes on the element\r\n     * @property {requestCallback} onfocus - Method to be execute when on focus\r\n     * @property {requestCallback} onblur - Method to be execute when on blur\r\n     * @property {requestCallback} onload - Method to be execute when the element is loaded\r\n     */\r\n    var defaults = {\r\n        value: null,\r\n        limit: null,\r\n        search: null,\r\n        placeholder: null,\r\n        validation: null,\r\n        onbeforechange: null,\r\n        onchange: null,\r\n        onfocus: null,\r\n        onblur: null,\r\n        onload: null,\r\n        colors: null,\r\n    };\r\n\r\n    // Loop through though the default configuration\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    // Search helpers\r\n    var searchContainer = null;\r\n    var searchTerms = null;\r\n    var searchIndex = 0;\r\n    var searchTimer = 0;\r\n\r\n    /**\r\n     * Add a new tag to the element\r\n     * @param {(?string|Array)} value - The value of the new element\r\n     */\r\n    obj.add = function(value) {\r\n        if (typeof(obj.options.onbeforechange) == 'function') {\r\n            var v = obj.options.onbeforechange(el, obj, value);\r\n            if (v != null) {\r\n                value = v;\r\n            }\r\n        }\r\n\r\n        // Close search\r\n        if (searchContainer) {\r\n            searchContainer.style.display = '';\r\n        }\r\n        // Get node\r\n        var node = getSelectionStart();\r\n\r\n        // Mix argument string or array\r\n        if (! value || typeof(value) == 'string') {\r\n            var div = document.createElement('div');\r\n            div.innerHTML = value ? value : '<br>';\r\n            if (node && node.parentNode.classList.contains('jtags')) {\r\n                el.insertBefore(div, node.nextSibling);\r\n            } else {\r\n                el.appendChild(div);\r\n            }\r\n        } else {\r\n            if (node && node.parentNode.classList.contains('jtags')) {\r\n                if (! node.innerText.replace(\"\\n\", \"\")) {\r\n                    el.removeChild(node);\r\n                }\r\n            }\r\n\r\n            for (var i = 0; i < value.length; i++) {\r\n                var div = document.createElement('div');\r\n                div.innerHTML = value[i] ? value[i] : '<br>';\r\n                el.appendChild(div);\r\n            };\r\n\r\n            var div = document.createElement('div');\r\n            div.innerHTML = '<br>';\r\n            el.appendChild(div);\r\n        }\r\n\r\n        // Place caret\r\n        setTimeout(function() {\r\n            caret(div);\r\n        }, 0);\r\n\r\n        // Filter\r\n        filter();\r\n\r\n        if (typeof(obj.options.onchange) == 'function') {\r\n            obj.options.onchange(el, obj, value ? value : '');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get all tags in the element\r\n     * @return {Array} data - All tags as an array\r\n     */\r\n    obj.getData = function() {\r\n        var data = [];\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            var value = obj.getValue(i);\r\n            if (value) {\r\n                var id = el.children[i].getAttribute('data-id');\r\n                if (! id) {\r\n                    id = value;\r\n                }\r\n                data.push({ id: id, value: value });\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * Get the value of one tag. Null for all tags\r\n     * @param {?number} index - Tag index number. Null for all tags.\r\n     * @return {string} value - All tags separated by comma\r\n     */\r\n    obj.getValue = function(index) {\r\n        var value = null;\r\n\r\n        if (index != null) {\r\n            // Get one individual value\r\n            value = el.children[index].innerText.replace(\"\\n\", \"\");\r\n        } else {\r\n            // Get all\r\n            var data = [];\r\n            for (var i = 0; i < el.children.length; i++) {\r\n                value = el.children[i].innerText.replace(\"\\n\", \"\");\r\n                if (value) {\r\n                    data.push(obj.getValue(i));\r\n                }\r\n            }\r\n            value = data.join(',');\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Set the value of the element based on a string separeted by (,|;|\\r\\n)\r\n     * @param {string} value - A string with the tags\r\n     */\r\n    obj.setValue = function(text) {\r\n        // Remove whitespaces\r\n        text = text.trim();\r\n\r\n        if (text) {\r\n            // Tags\r\n            var data = extractTags(text);\r\n            console.log(data);\r\n            // Add tags to the element\r\n            obj.add(data);\r\n        }\r\n    }\r\n\r\n    obj.reset = function() {\r\n        el.innerHTML = '<div><br></div>';\r\n    }\r\n\r\n    /**\r\n     * Verify if all tags in the element are valid\r\n     * @return {boolean}\r\n     */\r\n    obj.isValid = function() {\r\n        var test = 0;\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            if (el.children[i].classList.contains('jtags_error')) {\r\n                test++;\r\n            }\r\n        }\r\n        return test == 0 ? true : false;\r\n    }\r\n\r\n    /**\r\n     * Add one element from the suggestions to the element\r\n     * @param {object} item - Node element in the suggestions container\r\n     */ \r\n    obj.selectIndex = function(item) {\r\n        // Reset terms\r\n        searchTerms = '';\r\n        var node = getSelectionStart();\r\n        // Append text to the caret\r\n        node.innerText = item.children[1].innerText;\r\n        // Set node id\r\n        if (item.children[1].getAttribute('data-id')) {\r\n            node.setAttribute('data-id', item.children[1].getAttribute('data-id'));\r\n        }\r\n        // Close container\r\n        if (searchContainer) {\r\n            searchContainer.style.display = '';\r\n            searchContainer.innerHTML = '';\r\n        }\r\n        // Remove any error\r\n        node.classList.remove('jtags_error');\r\n        // Add new item\r\n        obj.add();\r\n    }\r\n\r\n    /**\r\n     * Search for suggestions\r\n     * @param {object} node - Target node for any suggestions\r\n     */\r\n    obj.search = function(node) {\r\n        // Create and append search container to the DOM\r\n        if (! searchContainer) {\r\n            var div = document.createElement('div');\r\n            div.style.position = 'relative';\r\n            el.parentNode.insertBefore(div, el.nextSibling);\r\n\r\n            // Create container\r\n            searchContainer = document.createElement('div');\r\n            searchContainer.classList.add('jtags_search');\r\n            div.appendChild(searchContainer);\r\n        }\r\n\r\n        // Search for\r\n        var terms = node.anchorNode.nodeValue;\r\n\r\n        // Search\r\n        if (node.anchorNode.nodeValue && terms != searchTerms) {\r\n            // Terms\r\n            searchTerms = node.anchorNode.nodeValue;\r\n            // Reset index\r\n            searchIndex = 0;\r\n            // Get remove results\r\n            jSuites.ajax({\r\n                url: obj.options.search + searchTerms,\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Reset container\r\n                    searchContainer.innerHTML = '';\r\n\r\n                    // Print results\r\n                    if (! data.length) {\r\n                        // Show container\r\n                        searchContainer.style.display = '';\r\n                    } else {\r\n                        // Show container\r\n                        searchContainer.style.display = 'block';\r\n\r\n                        // Show items\r\n                        var len = data.length < 11 ? data.length : 10;\r\n                        for (var i = 0; i < len; i++) {\r\n                            var div = document.createElement('div');\r\n                            if (i == 0) {\r\n                                div.classList.add('selected');\r\n                            }\r\n                            var img = document.createElement('img');\r\n                            if (data[i].image) {\r\n                                img.src = data[i].image;\r\n                            } else {\r\n                                img.style.display = 'none';\r\n                            }\r\n                            div.appendChild(img);\r\n\r\n                            var item = document.createElement('div');\r\n                            item.setAttribute('data-id', data[i].id);\r\n                            item.innerHTML = data[i].name;\r\n                            div.onclick = function() {\r\n                                // Add item\r\n                                obj.selectIndex(this);\r\n                            }\r\n                            div.appendChild(item);\r\n                            // Append item to the container\r\n                            searchContainer.appendChild(div);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // Destroy tags element\r\n    obj.destroy = function() {\r\n        // Bind events\r\n        el.removeEventListener('mouseup', tagsMouseUp);\r\n        el.removeEventListener('keydown', tagsKeyDown);\r\n        el.removeEventListener('keyup', tagsKeyUp);\r\n        el.removeEventListener('paste', tagsPaste);\r\n        el.removeEventListener('focus', tagsFocus);\r\n        el.removeEventListener('blur', tagsBlur);\r\n        // Remove element\r\n        el.parentNode.removeChild(el);\r\n    }\r\n\r\n    var getRandomColor = function(index) {\r\n        var rand = function(min, max) {\r\n            return min + Math.random() * (max - min);\r\n        }\r\n        return 'hsl(' + rand(1, 360) + ',' + rand(40, 70) + '%,' + rand(65, 72) + '%)';\r\n    }\r\n\r\n    /**\r\n     * Filter tags\r\n     */\r\n    var filter = function() {\r\n        for (var i = 0; i < el.children.length; i++) {\r\n            // Create label design\r\n            if (! obj.getValue(i)) {\r\n                el.children[i].classList.remove('jtags_label');\r\n            } else {\r\n                el.children[i].classList.add('jtags_label');\r\n\r\n                // Validation in place\r\n                if (typeof(obj.options.validation) == 'function') {\r\n                    if (obj.getValue(i)) {\r\n                        if (! obj.options.validation(el.children[i], el.children[i].innerText, el.children[i].getAttribute('data-id'))) {\r\n                            el.children[i].classList.add('jtags_error');\r\n                        } else {\r\n                            el.children[i].classList.remove('jtags_error');\r\n                        }\r\n                    } else {\r\n                        el.children[i].classList.remove('jtags_error');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Place caret in the element node\r\n     */\r\n    var caret = function(e) {\r\n        var range = document.createRange();\r\n        var sel = window.getSelection();\r\n        range.setStart(e, e.innerText.length);\r\n        range.collapse(true);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n    }\r\n\r\n    /**\r\n     * Selection\r\n     */\r\n    var getSelectionStart = function() {\r\n        var node = document.getSelection().anchorNode;\r\n        if (node) {\r\n            return (node.nodeType == 3 ? node.parentNode : node);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Extract tags from a string\r\n     * @param {string} text - Raw string\r\n     * @return {Array} data - Array with extracted tags\r\n     */\r\n    var extractTags = function(text) {\r\n        /** @type {Array} */\r\n        var data = [];\r\n\r\n        /** @type {string} */\r\n        var word = '';\r\n\r\n        // Remove whitespaces\r\n        text = text.trim();\r\n\r\n        if (text) {\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (text[i] == ',' || text[i] == ';' || text[i] == '\\r\\n') {\r\n                    if (word) {\r\n                        data.push(word);\r\n                    }\r\n                } else {\r\n                    word += text[i];\r\n                }\r\n            }\r\n\r\n            if (word) {\r\n                data.push(word);\r\n            }\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    /** @type {number} */\r\n    var anchorOffset = 0;\r\n\r\n    /**\r\n     * Processing event keydown on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsKeyDown = function(e) {\r\n        // Anchoroffset\r\n        anchorOffset = window.getSelection().anchorOffset;\r\n\r\n        // Verify content\r\n        if (! el.children.length) {\r\n            var div = document.createElement('div');\r\n            div.innerHTML = '<br>';\r\n            el.appendChild(div);\r\n        }\r\n        // Comma\r\n        if (e.which == 9 || e.which == 186 || e.which == 188) {\r\n            var n = window.getSelection().anchorOffset;\r\n            if (n > 1) {\r\n                obj.add();\r\n            }\r\n            e.preventDefault();\r\n        } else if (e.which == 13) {\r\n            // Enter\r\n            if (searchContainer && searchContainer.style.display != '') {\r\n                obj.selectIndex(searchContainer.children[searchIndex]);\r\n            } else {\r\n                var n = window.getSelection().anchorOffset;\r\n                if (n > 1) {\r\n                    obj.add();\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        } else if (e.which == 38) {\r\n            // Up\r\n            if (searchContainer && searchContainer.style.display != '') {\r\n                searchContainer.children[searchIndex].classList.remove('selected');\r\n                if (searchIndex > 0) {\r\n                    searchIndex--;\r\n                }\r\n                searchContainer.children[searchIndex].classList.add('selected');\r\n                e.preventDefault();\r\n            }\r\n        } else if (e.which == 40) {\r\n            // Down\r\n            if (searchContainer && searchContainer.style.display != '') {\r\n                searchContainer.children[searchIndex].classList.remove('selected');\r\n                if (searchIndex < 9) {\r\n                    searchIndex++;\r\n                }\r\n                searchContainer.children[searchIndex].classList.add('selected');\r\n                e.preventDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Processing event keyup on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsKeyUp = function(e) {\r\n        if (e.which == 39) {\r\n            var n = window.getSelection().anchorOffset;\r\n            if (n > 1 && n == anchorOffset) {\r\n                obj.add();\r\n            }\r\n        } else if (e.which == 13 || e.which == 38 || e.which == 40) {\r\n            e.preventDefault();\r\n        } else {\r\n            if (searchTimer) {\r\n                clearTimeout(searchTimer);\r\n            }\r\n\r\n            searchTimer = setTimeout(function() {\r\n                // Current node\r\n                var node = window.getSelection();\r\n                // Search\r\n                if (obj.options.search) {\r\n                    obj.search(node);\r\n                }\r\n                searchTimer = null;\r\n            }, 300);\r\n        }\r\n\r\n        filter();\r\n    }\r\n\r\n    /**\r\n     * Processing event paste on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsPaste =  function(e) {\r\n        if (e.clipboardData || e.originalEvent.clipboardData) {\r\n            var html = (e.originalEvent || e).clipboardData.getData('text/html');\r\n            var text = (e.originalEvent || e).clipboardData.getData('text/plain');\r\n        } else if (window.clipboardData) {\r\n            var html = window.clipboardData.getData('Html');\r\n            var text = window.clipboardData.getData('Text');\r\n        }\r\n\r\n        obj.setValue(text);\r\n        e.preventDefault();\r\n    }\r\n\r\n    /**\r\n     * Processing event mouseup on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsMouseUp = function(e) {\r\n        if (e.target.parentNode && e.target.parentNode.classList.contains('jtags')) {\r\n            if (e.target.classList.contains('jtags_label') || e.target.classList.contains('jtags_error')) {\r\n                const rect = e.target.getBoundingClientRect();\r\n                if (rect.width - (e.clientX - rect.left) < 16) {\r\n                    el.removeChild(e.target);\r\n                    el.focus();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (searchContainer) {\r\n            searchContainer.style.display = '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Processing event focus on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsFocus = function(e) {\r\n        if (! el.children.length || obj.getValue(el.children.length - 1)) {\r\n            var div = document.createElement('div');\r\n            div.innerHTML = '<br>';\r\n            el.appendChild(div);\r\n        }\r\n\r\n        if (typeof(obj.options.onfocus) == 'function') {\r\n            obj.options.onfocus(el, obj, obj.getValue());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Processing event blur on the element\r\n     * @param e {object}\r\n     */\r\n    var tagsBlur = function(e) {\r\n        if (searchContainer) {\r\n            setTimeout(function() {\r\n                searchContainer.style.display = '';\r\n            }, 200);\r\n        }\r\n\r\n        for (var i = 0; i < el.children.length - 1; i++) {\r\n            // Create label design\r\n            if (! obj.getValue(i)) {\r\n                el.removeChild(el.children[i]);\r\n            }\r\n        }\r\n\r\n        if (typeof(obj.options.onblur) == 'function') {\r\n            obj.options.onblur(el, obj, obj.getValue());\r\n        }\r\n    }\r\n\r\n    // Bind events\r\n    el.addEventListener('mouseup', tagsMouseUp);\r\n    el.addEventListener('keydown', tagsKeyDown);\r\n    el.addEventListener('keyup', tagsKeyUp);\r\n    el.addEventListener('paste', tagsPaste);\r\n    el.addEventListener('focus', tagsFocus);\r\n    el.addEventListener('blur', tagsBlur);\r\n\r\n    // Prepare container\r\n    el.classList.add('jtags');\r\n    el.setAttribute('contenteditable', true);\r\n    el.setAttribute('spellcheck', false);\r\n\r\n    if (obj.options.placeholder) {\r\n        el.placeholder = obj.options.placeholder;\r\n    }\r\n\r\n    // Make sure element is empty\r\n    if (obj.options.value) {\r\n        obj.setValue(obj.options.value);\r\n    } else {\r\n        el.innerHTML = '<div><br></div>';\r\n    }\r\n\r\n    if (typeof(obj.options.onload) == 'function') {\r\n        obj.options.onload(el, obj);\r\n    }\r\n\r\n    el.tags = obj;\r\n\r\n    return obj;\r\n});\r\n\r\njSuites.tracker = (function(el, options) {\r\n    var obj = {};\r\n    obj.options = {};\r\n\r\n    // Default configuration\r\n    var defaults = {\r\n        url: null,\r\n        message: 'Are you sure? There are unsaved information in your form',\r\n        ignore: false,\r\n        currentHash: null,\r\n        submitButton:null,\r\n        onload: null,\r\n        onbeforesave: null,\r\n        onsave: null,\r\n    };\r\n\r\n    // Loop through our object\r\n    for (var property in defaults) {\r\n        if (options && options.hasOwnProperty(property)) {\r\n            obj.options[property] = options[property];\r\n        } else {\r\n            obj.options[property] = defaults[property];\r\n        }\r\n    }\r\n\r\n    obj.setUrl = function(url) {\r\n        obj.options.url = url;\r\n    }\r\n\r\n    obj.load = function() {\r\n        jSuites.ajax({\r\n            url: obj.options.url,\r\n            method: 'GET',\r\n            dataType: 'json',\r\n            success: function(data) {\r\n                var elements = el.querySelectorAll(\"input, select, textarea\");\r\n \r\n                for (var i = 0; i < elements.length; i++) {\r\n                    var name = elements[i].getAttribute('name');\r\n                    if (data[name]) {\r\n                        elements[i].value = data[name];\r\n                    }\r\n                }\r\n\r\n                if (typeof(obj.options.onload) == 'function') {\r\n                    obj.options.onload(el, data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    obj.save = function() {\r\n        var test = obj.validate();\r\n\r\n        if (test) {\r\n            jSuites.alert(test);\r\n        } else {\r\n            var data = obj.getElements(true);\r\n\r\n            if (typeof(obj.options.onbeforesave) == 'function') {\r\n                var data = obj.options.onbeforesave(el, data);\r\n\r\n                if (data === false) {\r\n                    console.log('Onbeforesave returned false');\r\n                    return; \r\n                }\r\n            }\r\n\r\n            jSuites.ajax({\r\n                url: obj.options.url,\r\n                method: 'POST',\r\n                dataType: 'json',\r\n                data: data,\r\n                success: function(result) {\r\n                    jSuites.alert(result.message);\r\n\r\n                    if (typeof(obj.options.onsave) == 'function') {\r\n                        var data = obj.options.onsave(el, result);\r\n                    }\r\n\r\n                    obj.reset();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    obj.validateElement = function(element) {\r\n        var emailChecker = function(data) {\r\n            var pattern = new RegExp(/^([\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4})?$/);\r\n            return pattern.test(data) ? true : false; \r\n        }\r\n\r\n        var passwordChecker = function(data) {\r\n            return (data.length > 5) ? true : false;\r\n        }\r\n\r\n        var addError = function(element) {\r\n            // Add error in the element\r\n            element.classList.add('error');\r\n            // Submit button\r\n            if (obj.options.submitButton) {\r\n                obj.options.submitButton.setAttribute('disabled', true);\r\n            }\r\n            // Return error message\r\n            return element.getAttribute('data-error') || 'There is an error in the form';\r\n        }\r\n\r\n        var delError = function(element) {\r\n            var error = false;\r\n            // Remove class from this element\r\n            element.classList.remove('error');\r\n            // Get elements in the form\r\n            var elements = el.querySelectorAll(\"input, select, textarea\");\r\n            // Run all elements \r\n            for (var i = 0; i < elements.length; i++) {\r\n                if (elements[i].getAttribute('data-validation')) {\r\n                    if (elements[i].classList.contains('error')) {\r\n                        error = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (obj.options.submitButton) {\r\n                if (error) {\r\n                    obj.options.submitButton.setAttribute('disabled', true);\r\n                } else {\r\n                    obj.options.submitButton.removeAttribute('disabled');\r\n                }\r\n            }\r\n        }\r\n\r\n        // Blank\r\n        var test = '';\r\n        if (! element.value) {\r\n            test = addError(element);\r\n        } else if (element.getAttribute('data-email') && ! emailChecker(element.value)) {\r\n            test = addError(element);\r\n        } else if (element.getAttribute('data-password') && ! emailChecker(element.value)) {\r\n            test = addError(element);\r\n        } else {\r\n            if (element.classList.contains('error')) {\r\n                delError(element);\r\n            }\r\n        }\r\n\r\n        return test;\r\n    }\r\n\r\n    // Run form validation\r\n    obj.validate = function() {\r\n        var test = '';\r\n        // Get elements in the form\r\n        var elements = el.querySelectorAll(\"input, select, textarea\");\r\n        // Run all elements \r\n        for (var i = 0; i < elements.length; i++) {\r\n            if (elements[i].getAttribute('data-validation')) {\r\n                if (test) {\r\n                    test += \"<br>\\r\\n\";\r\n                }\r\n                test += obj.validateElement(elements[i]);\r\n            }\r\n        }\r\n        return test;\r\n    }\r\n\r\n    // Check the form\r\n    obj.getError = function() {\r\n        // Validation\r\n        return obj.validation() ? true : false;\r\n    }\r\n\r\n    // Return the form hash\r\n    obj.setHash = function() {\r\n        return obj.getHash(obj.getElements());\r\n    }\r\n\r\n    // Get the form hash\r\n    obj.getHash = function(str) {\r\n        var hash = 0, i, chr;\r\n\r\n        if (str.length === 0) {\r\n            return hash;\r\n        } else {\r\n            for (i = 0; i < str.length; i++) {\r\n              chr = str.charCodeAt(i);\r\n              hash = ((hash << 5) - hash) + chr;\r\n              hash |= 0;\r\n            }\r\n        }\r\n\r\n        return hash;\r\n    }\r\n\r\n    // Is there any change in the form since start tracking?\r\n    obj.isChanged = function() {\r\n        var hash = obj.setHash();\r\n        return (obj.options.currentHash != hash);\r\n    }\r\n\r\n    // Restart tracking\r\n    obj.resetTracker = function() {\r\n        obj.options.currentHash = obj.setHash();\r\n        obj.options.ignore = false;\r\n    }\r\n\r\n    obj.reset = function() {\r\n        obj.options.currentHash = obj.setHash();\r\n        obj.options.ignore = false;\r\n    }\r\n\r\n    // Ignore flag\r\n    obj.setIgnore = function(ignoreFlag) {\r\n        obj.options.ignore = ignoreFlag ? true : false;\r\n    }\r\n\r\n    // Get form elements\r\n    obj.getElements = function(asArray) {\r\n        var data = {};\r\n        var elements = el.querySelectorAll(\"input, select, textarea\");\r\n\r\n        for (var i = 0; i < elements.length; i++) {\r\n            var element = elements[i];\r\n            var name = element.name;\r\n            var value = element.value;\r\n\r\n            if (name) {\r\n                data[name] = value;\r\n            }\r\n        }\r\n\r\n        return asArray == true ? data : JSON.stringify(data);\r\n    }\r\n\r\n    // Start tracking in one second\r\n    setTimeout(function() {\r\n        obj.options.currentHash = obj.setHash();\r\n    }, 1000);\r\n\r\n    // Alert\r\n    window.addEventListener(\"beforeunload\", function (e) {\r\n        if (obj.isChanged() && obj.options.ignore == false) {\r\n            var confirmationMessage =  obj.options.message? obj.options.message : \"\\o/\";\r\n\r\n            if (confirmationMessage) {\r\n                if (typeof e == 'undefined') {\r\n                    e = window.event;\r\n                }\r\n\r\n                if (e) {\r\n                    e.returnValue = confirmationMessage;\r\n                }\r\n\r\n                return confirmationMessage;\r\n            } else {\r\n                return void(0);\r\n            }\r\n        }\r\n    });\r\n\r\n    // Validations\r\n    el.addEventListener(\"keyup\", function(e) {\r\n        if (e.target.getAttribute('data-validation')) {\r\n            obj.validateElement(e.target);\r\n        }\r\n    });\r\n\r\n    el.tracker = obj;\r\n\r\n    return obj;\r\n});\r\n\r\n\r\n\r\n    return jSuites;\r\n\r\n})));"]},"metadata":{},"sourceType":"script"}